(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d13b341","chunk-21a1149f","chunk-b13d9db6","chunk-2d0bd650","chunk-2d0d7882","chunk-2d0cebea"],{"0573":function(e,t,a){},"1bde":function(e,t,a){},"2c8a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Cascader",{attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",size:e.size,transfer:e.transfer,"transfer-class-name":e.transferClassName,disabled:e.disabled,filterable:e.filterable,clearable:e.clearable,placeholder:e.placeholder},on:{"on-change":e.handleChangeDep,"on-visible-change":e.handleVisibleChange},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})],1)},i=[],l=a("365c"),r={name:"departmentChoose",props:{size:String,transfer:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择或输入搜索部门"},transferClassName:String},data(){return{selectDep:[],department:[]}},methods:{initDepartmentData(){Object(l["jc"])().then(e=>{e.success&&(e.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),this.department=e.result)})},loadData(e,t){e.loading=!0,Object(l["lc"])(e.value).then(a=>{e.loading=!1,a.success&&(a.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=a.result,t())})},handleChangeDep(e,t){let a="";e&&e.length>0&&(a=e[e.length-1]),this.$emit("on-change",a)},handleVisibleChange(e){this.$emit("on-visible-change",e)},clearSelect(){this.selectDep=[],this.$emit("on-change","")}},mounted(){this.initDepartmentData()}},n=r,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);t["default"]=c.exports},"31c5":function(e,t,a){},"4fdd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{display:"flex"}},[t("Select",{attrs:{size:e.size,loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:"",transfer:e.transfer,clearable:e.clearable,placement:e.placement,"not-found-text":e.notFoundText,"label-in-value":e.labelInValue,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder,"remote-method":e.searchUser},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.userList,(function(a,s){return t("Option",{key:s,attrs:{value:a.id,label:a.nickname,tag:a.username}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(a.nickname))]),t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(a.username))])])})),1),e.showButton?t("Button",{staticStyle:{"margin-left":"10px"},attrs:{size:e.size,disabled:e.disabled,icon:e.icon,type:e.type,shape:e.shape,ghost:e.ghost},on:{click:function(t){e.userModalVisible=!0}}},[e._v(e._s(e.text))]):e._e()],1),e.showButton?t("Drawer",{staticClass:"user-select-drawer",attrs:{title:"选择用户",closable:"",width:"815",draggable:"",transfer:e.drawerTransfer,"mask-style":e.maskStyle,"class-name":e.className},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:"userModalVisible"}},[t("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"用户名",prop:"nickname"}},[t("Input",{staticStyle:{width:"180px"},attrs:{type:"text",clearable:"",placeholder:"请输入用户名"},model:{value:e.searchForm.nickname,callback:function(t){e.$set(e.searchForm,"nickname",t)},expression:"searchForm.nickname"}})],1),t("FormItem",{attrs:{label:"部门",prop:"department"}},[t("department-choose",{ref:"dep",staticStyle:{width:"180px"},on:{"on-change":e.handleSelectDep}})],1),e.drop?t("span",[t("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[t("Input",{staticStyle:{width:"180px"},attrs:{type:"text",clearable:"",placeholder:"请输入手机号"},model:{value:e.searchForm.mobile,callback:function(t){e.$set(e.searchForm,"mobile",t)},expression:"searchForm.mobile"}})],1),t("FormItem",{attrs:{label:"邮箱",prop:"email"}},[t("Input",{staticStyle:{width:"180px"},attrs:{type:"text",clearable:"",placeholder:"请输入邮箱"},model:{value:e.searchForm.email,callback:function(t){e.$set(e.searchForm,"email",t)},expression:"searchForm.email"}})],1),t("FormItem",{attrs:{label:"性别",prop:"sex"}},[t("dict",{staticStyle:{width:"180px"},attrs:{dict:"sex"},model:{value:e.searchForm.sex,callback:function(t){e.$set(e.searchForm,"sex",t)},expression:"searchForm.sex"}})],1),t("FormItem",{attrs:{label:"登录账号",prop:"username"}},[t("Input",{staticStyle:{width:"180px"},attrs:{type:"text",clearable:"",placeholder:"请输入登录账号"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),t("FormItem",{attrs:{label:"用户ID",prop:"id"}},[t("Input",{staticStyle:{width:"180px"},attrs:{type:"text",clearable:"",placeholder:"请输入用户ID"},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1)],1):e._e(),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearchUser}},[e._v("搜索")]),t("Button",{on:{click:e.handleResetUser}},[e._v("重置")]),t("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v(" "+e._s(e.dropDownContent)+" "),t("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1),t("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" 项 "),t("a",{staticStyle:{"margin-left":"10px"},on:{click:e.clearData}},[e._v("清空已选")])]),t("Table",{staticStyle:{margin:"2vh 0"},attrs:{loading:e.userLoading,border:"",columns:e.userColumns,data:e.userData}}),t("Row",{attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.totalUser,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":"",transfer:!0},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1):e._e()],1)},i=[],l=a("365c"),r=a("2c8a"),n=a("76e2"),o={name:"userSelect",components:{departmentChoose:r["default"],dict:n["default"]},props:{showButton:{type:Boolean,default:!0},text:{type:String,default:"选择用户"},icon:{type:String,default:"md-person-add"},size:String,type:String,shape:String,ghost:{type:Boolean,default:!1},transfer:{type:Boolean,default:!0},drawerTransfer:{type:Boolean,default:!0},placeholder:{type:String,default:"请输入用户名搜索选择用户"},placement:{type:String,default:"bottom-start"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},notFoundText:{type:String,default:"无匹配数据"},labelInValue:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0},maskStyle:Object,className:Object},data(){return{value:null,userList:[],loading:!1,userLoading:!0,userModalVisible:!1,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",selectCount:0,searchForm:{id:"",nickname:"",type:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},userColumns:[{type:"index",width:60,align:"center"},{title:"用户名",key:"nickname",minWidth:130,sortable:!0},{title:"登录账号",key:"username",minWidth:130,sortable:!0},{title:"头像",key:"avatar",width:80,align:"center",render:(e,t)=>e("Avatar",{props:{src:t.row.avatar}})},{title:"所属部门",key:"departmentTitle",width:120},{title:"手机",key:"mobile",width:125,sortable:!0},{title:"邮箱",key:"email",width:180,sortable:!0},{title:"性别",key:"sex",width:70,align:"center"},{title:"创建时间",key:"createTime",sortable:!0,sortType:"desc",width:170},{title:"操作",key:"action",width:130,align:"center",fixed:"right",render:(e,t)=>{let a="添加用户";return this.multiple||(a="选择用户"),e("div",[e("Button",{props:{type:"default",size:"small"},on:{click:()=>{this.addUser(t.row)}}},a)])}}],userData:[],totalUser:0}},methods:{searchUser(e){e&&(this.loading=!0,Object(l["Fc"])(e).then(e=>{this.loading=!1,e.success&&(this.userList=e.result)}))},handleChange(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange(e){this.$emit("on-query-change",e)},handleClear(){this.$emit("on-clear","")},handleOpenChange(e){this.$emit("on-open-change",e)},handleSelect(e){this.$emit("on-select",e)},setData(e){if(e.length||0==e.length)if(e.length>0){if(!this.multiple)return void this.$Message.warning("单个选择仅支持传入单个用户数据");let t=[],a=[];e.forEach(e=>{t.push(e),a.push(e.id)}),this.userList=t,setTimeout(()=>{this.value=a,this.$emit("input",a),this.selectCount=e.length},10)}else this.multiple?(this.value=[],this.$emit("input",[])):(this.value="",this.$emit("input",""));else{if(this.multiple)return void this.$Message.warning("多个选择仅支持传入用户数组数据");if(!e)return;let t=[e];this.userList=t,setTimeout(()=>{this.value=e.id,this.$emit("input",e.id),this.selectCount=1},10)}},handleSelectDep(e){this.searchForm.departmentId=e},dropDown(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},changePage(e){this.searchForm.pageNumber=e,this.getDataList()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},getDataList(){this.userLoading=!0,Object(l["ec"])(this.searchForm).then(e=>{this.userLoading=!1,e.success&&(this.userData=e.result.content,this.totalUser=e.result.totalElements)})},handleSearchUser(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleResetUser(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.$refs.dep.clearSelect(),this.searchForm.departmentId="",this.getDataList()},clearData(){this.selectCount=0,this.multiple?(this.value=[],this.$emit("input",[]),this.$emit("on-change",[])):(this.value="",this.$emit("input",""),this.$emit("on-change",""))},addUser(e){if(this.multiple){let t=!0;if(this.value&&this.value.length>0?this.value.forEach(a=>{e.id==a&&(this.$Message.warning("已经添加过啦，请勿重复选择"),t=!1)}):this.value=[],t){let t={id:e.id,username:e.username,nickname:e.nickname},a=!1;this.userList.forEach(t=>{e.id==t.id&&(a=!0)}),a||this.userList.push(t),setTimeout(()=>{this.value.push(e.id),this.$emit("input",this.value),this.$emit("on-change",this.value),this.selectCount=this.value.length},10),this.$Message.success(`添加用户 ${e.nickname} 成功`)}}else this.userList=[{id:e.id,username:e.username,nickname:e.nickname}],setTimeout(()=>{this.value=e.id,this.$emit("input",this.value),this.$emit("on-change",this.value),this.selectCount=1},10),this.$Message.success(`选择用户 ${e.nickname} 成功`)}},mounted(){this.getDataList()}},c=o,h=(a("f03c"),a("2877")),d=Object(h["a"])(c,s,i,!1,null,null,null);t["default"]=d.exports},6181:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{width:"100%","margin-right":"10px"}},[t("Input",{attrs:{placeholder:e.placeholder,size:e.size,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength},on:{"on-change":e.handleChange},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[t("Poptip",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{slot:"append",transfer:"",trigger:"hover",title:"图片预览",placement:"right",width:"350"},slot:"append"},[t("Button",{attrs:{icon:e.previewIcon}}),t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.currentValue,expression:"currentValue"}],staticStyle:{width:"100%",margin:"0 auto",display:"block",cursor:"zoom-in"},attrs:{src:e.currentValue},on:{click:e.viewImage}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.currentValue,expression:"!currentValue"}]},[e._v("无效的图片链接")]),t("a",{directives:[{name:"show",rawName:"v-show",value:e.currentValue,expression:"currentValue"}],staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:e.viewImage}},[e._v("查看大图")])])],1)],1)],1),e.material?e._e():t("Upload",{attrs:{action:e.uploadFileUrl,headers:e.accessToken,"on-success":e.handleSuccess,"on-error":e.handleError,format:e.format,accept:e.accept,"max-size":1024*e.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.beforeUpload,"show-upload-list":!1,"v-show":e.showUpload}},[t("Button",{attrs:{loading:e.loading,size:e.size,disabled:e.disabled,icon:e.icon,type:e.type,shape:e.shape,ghost:e.ghost}},[e._v(e._s(e.text))])],1),e.material?t("Button",{attrs:{size:e.size,disabled:e.disabled,icon:e.icon,type:e.type,shape:e.shape,ghost:e.ghost},on:{click:function(t){e.showMaterialCenter=!0}}},[e._v(e._s(e.text))]):e._e(),e.material?t("materialCenter",{attrs:{showInput:!1,acceptImg:e.accept,maxSize:e.maxSize},on:{"on-change":e.selectFile},model:{value:e.showMaterialCenter,callback:function(t){e.showMaterialCenter=t},expression:"showMaterialCenter"}}):e._e()],1)])},i=[],l=(a("0808"),a("6a37")),r=a.n(l),n=a("365c"),o=a("1f5f"),c={name:"uploadPicInput",components:{materialCenter:o["default"]},props:{value:String,size:String,placeholder:{type:String,default:"可输入图片链接"},disabled:{type:Boolean,default:!1},material:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,previewIcon:{type:String,default:"md-eye"},icon:{type:String,default:"ios-cloud-upload-outline"},text:{type:String,default:"上传图片"},type:String,shape:String,ghost:{type:Boolean,default:!1},maxSize:{type:Number,default:5},accept:{type:String,default:".jpg, .jpeg, .png, .gif"},showUpload:{type:Boolean,default:!0}},computed:{format(){if(this.accept){let e=[];return this.accept.split(",").forEach(t=>{e.push(t.replace(".","").replace(" ",""))}),e}return[]}},data(){return{accessToken:{},currentValue:this.value,loading:!1,uploadFileUrl:n["Tc"],showMaterialCenter:!1}},methods:{init(){this.accessToken={accessToken:this.getStore("accessToken")}},viewImage(){let e=new Image;e.src=this.currentValue;let t=new r.a(e,{hidden:function(){t.destroy()}});t.show()},handleFormatError(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 "+this.accept+" 格式文件"})},handleMaxSize(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},beforeUpload(){return this.loading=!0,!0},handleSuccess(e,t){this.loading=!1,e.success?(this.currentValue=e.result,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)):this.$Message.error(e.message)},handleError(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))},selectFile(e){this.setCurrentValue(e)}},watch:{value(e){this.setCurrentValue(e)}},mounted(){this.init()}},h=c,d=a("2877"),u=Object(d["a"])(h,s,i,!1,null,null,null);t["default"]=u.exports},"6c6d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=[{text:"今日",value(){var e=new Date,t=new Date;return e.setTime(t.getTime()),[t,e]}},{text:"昨日",value(){var e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),e.setTime(e.getTime()-864e5),[t,e]}},{text:"本周",value(){var e=new Date,t=e.getDay(),a=e.getDate(),s=e.getMonth(),i=t||7,l=new Date(e.getFullYear(),s,a+1-i),r=new Date(e.getFullYear(),s,a+7-i);return l.setTime(l.getTime()),r.setTime(r.getTime()),[l,r]}},{text:"本月",value(){var e=new Date,t=e.getYear();t+=t<2e3?1900:0;var a=e.getMonth(),s=new Date(t,a,1),i=new Date(t,a+1,1),l=(i-s)/864e5,r=new Date(t,a,1),n=new Date(t,a,l);return r.setTime(r.getTime()),n.setTime(n.getTime()),[r,n]}}]},"76e2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Select",{attrs:{size:e.size,loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(a,s){return t("Option",{key:s,attrs:{value:a.value}},[e._v(e._s(a.title))])})),1)],1)},i=[],l=a("365c"),r={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData(e){this.loading=!0,Object(l["Ab"])(e).then(e=>{this.loading=!1,e.success&&(this.dictData=e.result)})},handleChange(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange(e){this.$emit("on-query-change",e)},handleClear(){this.$emit("on-clear","")},handleOpenChange(e){this.$emit("on-open-change",e)},handleSelect(e){this.$emit("on-select",e)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value(e){this.setCurrentValue(e)},dict(e){this.getData(e)}},mounted(){this.getData(this.dict)}},n=r,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,null,null);t["default"]=c.exports},a3d2:function(e,t,a){"use strict";a("1bde")},acd8:function(e,t,a){"use strict";a("0573")},af7c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[t("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"名称",prop:"name"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("FormItem",{attrs:{label:"所属类别",prop:"category"}},[t("Cascader",{staticStyle:{width:"200px"},attrs:{data:e.category,"load-data":e.loadData,"change-on-select":"",filterable:"",placeholder:"请选择或输入搜索类别"},on:{"on-change":e.handleChangeCat},model:{value:e.selectCat,callback:function(t){e.selectCat=t},expression:"selectCat"}})],1),e.drop?t("span",[t("FormItem",{attrs:{label:"状态",prop:"status"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[t("Option",{attrs:{value:"0"}},[e._v("正常")]),t("Option",{attrs:{value:"-1"}},[e._v("禁用")])],1)],1),t("FormItem",{attrs:{label:"创建时间"}},[t("DatePicker",{staticStyle:{width:"200px"},attrs:{options:e.options,type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1)],1):e._e(),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")]),t("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v(" "+e._s(e.dropDownContent)+" "),t("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1),t("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[t("div",[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加")]),t("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),t("Dropdown",{on:{"on-click":e.handleDropdown}},[t("Button",[e._v(" 更多操作 "),t("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{name:"exportData"}},[e._v("导出所选数据")]),t("DropdownItem",{attrs:{name:"exportAll"}},[e._v("导出全部数据")])],1)],1)],1),t("div",{staticClass:"icons"},[t("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:e.getDataList}})],1),t("Tooltip",{attrs:{content:e.openSearch?"关闭搜索":"开启搜索",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"ios-search",size:"18"},on:{click:function(t){e.openSearch=!e.openSearch}}})],1),t("Tooltip",{attrs:{content:e.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(t){e.openTip=!e.openTip}}})],1),t("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.changeTableSize}},[t("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{selected:"default"==e.tableSize,name:"default"}},[e._v("默认")]),t("DropdownItem",{attrs:{selected:"large"==e.tableSize,name:"large"}},[e._v("宽松")]),t("DropdownItem",{attrs:{selected:"small"==e.tableSize,name:"small"}},[e._v("紧密")])],1)],1)],1)],1)]),t("Alert",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])]),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,size:e.tableSize,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}}),t("Table",{ref:"exportTable",staticStyle:{display:"none"},attrs:{columns:e.exportColumns,data:e.exportData}}),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,"z-index":800,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,"label-width":70,rules:e.formValidate}},[t("FormItem",{attrs:{label:"名称",prop:"name"}},[t("Input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),0==e.modalType?t("FormItem",{attrs:{label:"密码",prop:"password",error:e.errorPass}},[t("Input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),t("FormItem",{staticClass:"form-noheight",attrs:{label:"头像",prop:"avatar"}},[t("upload-pic-input",{ref:"upload",model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1),t("FormItem",{attrs:{label:"关联用户",prop:"userId"}},[t("userSelect",{attrs:{maskStyle:{zIndex:9998},className:"userIndex"},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1),t("FormItem",{attrs:{label:"图片资料",prop:"pic"}},[t("uploadPicThumb",{model:{value:e.form.pic,callback:function(t){e.$set(e.form,"pic",t)},expression:"form.pic"}})],1),t("FormItem",{staticClass:"block-pop",attrs:{label:"所属类别",prop:"categoryTitle"}},[t("Poptip",{attrs:{trigger:"click",placement:"right",title:"选择类别",width:"250"}},[t("div",{staticStyle:{display:"flex"}},[t("Input",{staticStyle:{"margin-right":"10px"},attrs:{readonly:""},model:{value:e.form.categoryTitle,callback:function(t){e.$set(e.form,"categoryTitle",t)},expression:"form.categoryTitle"}}),t("Button",{attrs:{icon:"md-trash"},on:{click:e.clearSelectCat}},[e._v("清空已选")])],1),t("div",{attrs:{slot:"content"},slot:"content"},[t("Tree",{attrs:{data:e.dataCat,"load-data":e.loadDataTree},on:{"on-select-change":e.selectTree}}),e.loading?t("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)])],1),t("FormItem",{attrs:{label:"类型",prop:"type"}},[t("Select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("Option",{attrs:{value:0}},[e._v("类型1")]),t("Option",{attrs:{value:1}},[e._v("类型2")])],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:e.handleCancel}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1),t("Modal",{attrs:{title:"确认导出",loading:e.loadingExport},on:{"on-ok":e.exportAll},model:{value:e.modalExportAll,callback:function(t){e.modalExportAll=t},expression:"modalExportAll"}},[t("p",[e._v("您确认要导出全部 "+e._s(e.total)+" 条数据？")])])],1)},i=[],l=a("6181"),r=a("4fdd"),n=a("d014"),o=a("6c6d"),c={name:"complex-table",components:{uploadPicInput:l["default"],userSelect:r["default"],uploadPicThumb:n["default"]},data(){return{tableSize:"default",openSearch:!0,openTip:!0,loading:!0,modalExportAll:!1,loadingExport:!0,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",selectList:[],viewImage:!1,category:[],selectCat:[],dataCat:[],searchForm:{name:"",categoryId:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:""},selectDate:null,options:{shortcuts:o["a"]},modalType:0,modalVisible:!1,modalTitle:"",form:{type:0,avatar:"https://s1.ax1x.com/2018/05/19/CcdVQP.png",categoryId:"",categoryTitle:""},errorPass:"",formValidate:{name:[{required:!0,message:"不能为空",trigger:"blur"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"名称",key:"name",minWidth:150,sortable:!0,fixed:"left"},{title:"头像",key:"avatar",width:150,align:"center",render:(e,t)=>e("Avatar",{props:{src:t.row.avatar}})},{title:"所属类别",key:"categoryTitle",width:150},{title:"类型",key:"type",align:"center",width:150,render:(e,t)=>{let a="";return 0==t.row.type?a="类型1":1==t.row.type&&(a="类型2"),e("div",a)}},{title:"状态",key:"status",align:"center",width:150,render:(e,t)=>0==t.row.status?e("div",[e("Badge",{props:{status:"success",text:"启用"}})]):-1==t.row.status?e("div",[e("Badge",{props:{status:"error",text:"禁用"}})]):void 0,filters:[{label:"启用",value:0},{label:"禁用",value:-1}],filterMultiple:!1,filterMethod(e,t){return t.status==e}},{title:"创建时间",key:"createTime",sortable:!0,sortType:"desc",width:180},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:(e,t)=>{let a="";return a=0==t.row.status?e("a",{on:{click:()=>{this.disable(t.row)}}},"禁用"):e("a",{on:{click:()=>{this.enable(t.row)}}},"启用"),e("div",[e("a",{on:{click:()=>{this.edit(t.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),a,e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.remove(t.row)}}},"删除")])}}],exportColumns:[{title:"名称",key:"name"},{title:"头像",key:"avatar"},{title:"所属类别",key:"categoryTitle"},{title:"类型",key:"type"},{title:"状态",key:"status"},{title:"创建时间",key:"createTime"}],data:[],exportData:[],total:0}},methods:{init(){this.getDataList(),this.initCategoryData(),this.initCategoryForEdit()},initCategoryData(){this.category=[{label:"分类1",value:"1",loading:!1,children:[{label:"二级分类",value:"1.1"}]},{label:"分类2",value:"2"}]},initCategoryForEdit(){this.dataCat=[{title:"分类1",id:"1",loading:!1,children:[{title:"二级分类",id:"2"}]},{title:"分类2",id:"3"}]},loadData(e,t){},loadDataTree(e,t){},selectTree(e){if(e.length>0){for(let s in e[0])null==e[0][s]&&(e[0][s]="");let t=JSON.stringify(e[0]),a=JSON.parse(t);this.form.categoryId=a.id,this.form.categoryTitle=a.title}},clearSelectCat(){this.form.categoryId="",this.form.categoryTitle=""},handleChangeCat(e,t){e&&e.length>0?this.searchForm.categoryId=e[e.length-1]:this.searchForm.categoryId=""},handleChangeUserFormDep(e,t){e&&e.length>0?this.form.categoryId=e[e.length-1]:this.form.categoryId=""},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},selectDateRange(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},changeTableSize(e){this.tableSize=e},getDataList(){this.loading=!0,this.data=[{id:"1",name:"XBoot",avatar:"https://s1.ax1x.com/2018/05/19/CcdVQP.png",categoryTitle:"分类1",categoryId:1,type:0,status:0,createTime:"2018-08-08 00:08:00"},{id:"2",name:"Exrick",avatar:"https://s1.ax1x.com/2018/05/19/CcdVQP.png",categoryTitle:"分类2",categoryId:2,type:1,status:-1,createTime:"2018-08-08 00:08:00"}],this.exportData=this.data,this.total=this.data.length,this.loading=!1},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.selectCat=[],this.searchForm.categoryId="",this.getDataList()},changeSort(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getDataList()},handleDropdown(e){if("exportData"==e){if(this.selectList.length<=0)return void this.$Message.warning("您还未选择要导出的数据");this.$Modal.confirm({title:"确认导出",content:"您确认要导出所选 "+this.selectList.length+" 条数据?",onOk:()=>{this.$refs.exportTable.exportCsv({filename:"导出数据"})}})}else"exportAll"==e&&(this.modalExportAll=!0)},exportAll(){this.modalExportAll=!1,this.$refs.exportTable.exportCsv({filename:"用户全部数据"})},handleCancel(){this.modalVisible=!1},handleSubmit(){this.$refs.form.validate(e=>{if(e)if(0==this.modalType){if(delete this.form.id,delete this.form.status,""==this.form.password||void 0==this.form.password)return void(this.errorPass="密码不能为空");if(this.form.password.length<6)return void(this.errorPass="密码长度不得少于6位");this.submitLoading=!0,this.submitLoading=!1,this.$Message.success("操作成功"),this.modalVisible=!1}else 1==this.modalType&&(this.submitLoading=!0,this.submitLoading=!1,this.$Message.success("操作成功"),this.modalVisible=!1)})},handleUpload(e){this.form.avatar=e},add(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),this.modalVisible=!0},edit(e){this.modalType=1,this.modalTitle="编辑",this.$refs.form.resetFields();for(let s in e)null==e[s]&&(e[s]="");let t=JSON.stringify(e),a=JSON.parse(t);this.form=a,this.modalVisible=!0},enable(e){this.$Modal.confirm({title:"确认启用",content:"您确认要启用 "+e.name+" ?",loading:!0,onOk:()=>{this.$Message.success("操作成功"),this.$Modal.remove(),this.getDataList()}})},disable(e){this.$Modal.confirm({title:"确认禁用",content:"您确认要禁用 "+e.name+" ?",loading:!0,onOk:()=>{this.$Message.success("操作成功"),this.$Modal.remove(),this.getDataList()}})},remove(e){this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.name+" ?",loading:!0,onOk:()=>{this.$Message.success("操作成功"),this.clearSelectAll(),this.$Modal.remove(),this.getDataList()}})},dropDown(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},showSelect(e){this.exportData=e,this.selectList=e},clearSelectAll(){this.$refs.table.selectAll(!1)},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let e="";this.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),this.$Message.success("操作成功"),this.$Modal.remove(),this.clearSelectAll(),this.getDataList()}})}},mounted(){this.init()}},h=c,d=(a("a3d2"),a("2877")),u=Object(d["a"])(h,s,i,!1,null,null,null);t["default"]=u.exports},d014:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-thumb"},[t("vuedraggable",{staticClass:"list-group",attrs:{list:e.uploadList,disabled:!e.draggable||!e.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:e.onEnd}},e._l(e.uploadList,(function(a,s){return t("div",{key:s,staticClass:"upload-list",style:{width:`calc(${e.width} + 2px)`,height:`calc(${e.height} + 2px)`,lineHeight:e.height,marginBottom:e.marginBottom}},["finished"==a.status?t("div",[t("img",{style:{height:e.height},attrs:{src:a.url}}),t("div",{staticClass:"upload-list-cover"},[t("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(t){return e.handleView(a.url,s)}}}),t("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(t){return e.handleRemove(a)}}})],1)]):t("div",[a.showProgress?t("Progress",{attrs:{percent:a.percentage,"hide-info":""}}):e._e()],1)])})),0),e.material?e._e():t("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:e.width,marginBottom:e.marginBottom},attrs:{multiple:e.multiple,"show-upload-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,format:e.format,accept:e.accept,"max-size":1024*e.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,type:"drag",action:e.uploadFileUrl,headers:e.accessToken}},[t("div",{style:{width:e.width,height:e.height,lineHeight:e.height}},[t("Icon",{attrs:{type:"md-camera",size:"20"}})],1)]),e.material?t("div",{staticClass:"ivu-upload-drag",style:{width:e.width,height:e.height,lineHeight:e.height},on:{click:function(t){e.showMaterialCenter=!0}}},[t("Icon",{attrs:{type:"md-camera",size:"20"}})],1):e._e(),e.material?t("materialCenter",{attrs:{acceptImg:e.accept,maxSize:e.maxSize,multiple:e.multiple},on:{"on-change":e.selectFile},model:{value:e.showMaterialCenter,callback:function(t){e.showMaterialCenter=t},expression:"showMaterialCenter"}}):e._e()],1)},i=[],l=(a("0808"),a("6a37")),r=a.n(l),n=a("365c"),o=a("289a"),c=a.n(o),h=a("1f5f"),d={name:"uploadPicThumb",components:{vuedraggable:c.a,materialCenter:h["default"]},props:{value:{type:null},material:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:5},limit:{type:Number,default:5},width:{type:String,default:"60px"},height:{type:String,default:"60px"},marginBottom:{type:String,default:"0"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format(){if(this.accept){let e=[];return this.accept.split(",").forEach(t=>{e.push(t.replace(".","").replace(" ",""))}),e}return[]}},data(){return{accessToken:{},uploadFileUrl:n["Tc"],uploadList:[],showMaterialCenter:!1}},methods:{onEnd(){this.returnValue()},init(){this.setData(this.value),this.accessToken={accessToken:this.getStore("accessToken")}},handleView(e,t){let a=new Image;a.src=e;let s=new r.a(a,{hidden:function(){s.destroy()}});s.show()},handleRemove(e){const t=this.uploadList;this.uploadList.splice(t.indexOf(e),1),this.returnValue()},handleSuccess(e,t){e.success?(t.url=e.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(t),this.returnValue()):this.$Message.error(e.message)},handleError(e,t,a){this.$Message.error(e.toString())},handleFormatError(e){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize(e){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){let e=[];this.uploadList.forEach(t=>{e.push(t.url)}),this.$emit("input",e),this.$emit("on-change",e)}else{let e=this.uploadList[0].url;this.$emit("input",e),this.$emit("on-change",e)}},setData(e){if("string"==typeof e){if(this.multiple)return void this.$Message.warning("多张上传仅支持传入数组数据类型");if(!e)return;this.uploadList=[];let t={url:e,status:"finished"};this.uploadList.push(t),this.$emit("on-change",e)}else if("object"==typeof e){if(!this.multiple)return void this.$Message.warning("单张上传仅支持传入字符串数据类型");if(this.uploadList=[],e.length>this.limit){for(let t=0;t<this.limit;t++)this.uploadList.push({url:e[t],status:"finished"});this.$emit("on-change",e.slice(0,this.limit)),this.$emit("input",e.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else e.forEach(e=>{let t={url:e,status:"finished"};this.uploadList.push(t)}),this.$emit("on-change",e)}},selectFile(e){this.multiple?e.forEach(e=>{this.uploadList.push({url:e,status:"finished"})}):this.uploadList[0]={url:e,status:"finished"},this.returnValue()}},watch:{value(e){this.setData(e)}},mounted(){this.init()}},u=d,p=(a("acd8"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,null,null);t["default"]=m.exports},f03c:function(e,t,a){"use strict";a("31c5")}}]);