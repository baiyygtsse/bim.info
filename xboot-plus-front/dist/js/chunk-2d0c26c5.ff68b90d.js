(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c26c5"],{"49f0":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e._self._c;return s("div",{staticStyle:{display:"flex",position:"relative"}},[s("Form",{ref:"smsForm",attrs:{model:e.sms,"label-width":110,"label-position":"left",rules:e.smsValidate}},[s("FormItem",{attrs:{label:"服务提供商",prop:"serviceName"}},[s("Select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择"},on:{"on-change":e.changeSms},model:{value:e.sms.serviceName,callback:function(s){e.$set(e.sms,"serviceName",s)},expression:"sms.serviceName"}},[s("Option",{attrs:{value:"ALI_SMS"}},[e._v("阿里云")]),s("Option",{attrs:{value:"TENCENT_SMS"}},[e._v("腾讯云")])],1)],1),s("FormItem",{attrs:{label:"accessKey",prop:"accessKey"}},[s("Input",{staticStyle:{width:"380px"},attrs:{type:"text",placeholder:"请输入accessKey/secretId",disabled:e.changeLoading},model:{value:e.sms.accessKey,callback:function(s){e.$set(e.sms,"accessKey",s)},expression:"sms.accessKey"}})],1),s("FormItem",{attrs:{label:"secretKey",prop:"secretKey"}},[s("Tooltip",{attrs:{placement:"right",content:"无法编辑时请先点击查看图标"}},[s("Input",{staticClass:"input-see",staticStyle:{width:"380px"},attrs:{type:"text",readonly:!e.changedSmsSK,disabled:e.changeLoading,icon:"ios-eye",placeholder:"请输入secretKey"},on:{"on-click":function(s){return e.seeSecret(e.sms.serviceName)}},model:{value:e.sms.secretKey,callback:function(s){e.$set(e.sms,"secretKey",s)},expression:"sms.secretKey"}})],1)],1),"TENCENT_SMS"==e.sms.serviceName?s("FormItem",{attrs:{label:"应用ID",prop:"appId"}},[s("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入应用ID（短信控制台-应用管理）"},model:{value:e.sms.appId,callback:function(s){e.$set(e.sms,"appId",s)},expression:"sms.appId"}})],1):e._e(),s("FormItem",{attrs:{label:"短信签名",prop:"signName"}},[s("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入短信签名，例如XBoot"},model:{value:e.sms.signName,callback:function(s){e.$set(e.sms,"signName",s)},expression:"sms.signName"}})],1),s("FormItem",{attrs:{label:"使用场景",prop:"type"}},[s("Select",{staticStyle:{width:"380px"},attrs:{disabled:e.changeLoading,placeholder:"请选择",transfer:""},on:{"on-change":e.changeSmsType},model:{value:e.sms.type,callback:function(s){e.$set(e.sms,"type",s)},expression:"sms.type"}},[s("Option",{attrs:{value:"0"}},[e._v("通用验证码")]),s("Option",{attrs:{value:"1"}},[e._v("注册")]),s("Option",{attrs:{value:"2"}},[e._v("登录")]),s("Option",{attrs:{value:"3"}},[e._v("修改绑定手机号")]),s("Option",{attrs:{value:"4"}},[e._v("修改密码")]),s("Option",{attrs:{value:"5"}},[e._v("重置密码")]),s("Option",{attrs:{value:"6"}},[e._v("工作流消息")])],1)],1),s("FormItem",{attrs:{label:"模版CODE/ID",prop:"templateCode"}},[s("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入场景对应短信模版CODE/ID，如SMS_123456789"},model:{value:e.sms.templateCode,callback:function(s){e.$set(e.sms,"templateCode",s)},expression:"sms.templateCode"}})],1),s("FormItem",[s("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",disabled:e.changeLoading,loading:e.saveLoading},on:{click:e.saveEditSms}},[e._v("保存更改")])],1)],1),e.loading?s("Spin",{attrs:{fix:""}}):e._e()],1)},i=[],l=t("365c"),r={name:"sms",data(){return{loading:!1,changeLoading:!1,saveLoading:!1,sms:{serviceName:"ALI_SMS",accessKey:"",secretKey:"",appId:"",signName:"",type:"",templateCode:""},changedSmsSK:!1,smsValidate:{serviceName:[{required:!0,message:"请选择",trigger:"change"}],accessKey:[{required:!0,message:"不能为空",trigger:"blur"}],secretKey:[{required:!0,message:"不能为空",trigger:"blur"}],appId:[{required:!0,message:"不能为空",trigger:"blur"}],signName:[{required:!0,message:"不能为空",trigger:"blur"}],type:[{required:!0,message:"不能为空",trigger:"blur"}],templateCode:[{required:!0,message:"不能为空",trigger:"blur"}]}}},methods:{init(){this.initSmsSet()},initSmsSet(){this.loading=!0,Object(l["s"])().then(e=>{if(e.success&&e.result){let s=e.result;Object(l["ac"])(s).then(e=>{if(this.loading=!1,e.result){for(let s in e.result)null==e.result[s]&&(e.result[s]="");this.sms=e.result,this.sms.type="0",this.changeSmsType(this.sms.type)}else this.changedSmsSK=!0})}else this.loading=!1,this.changedSmsSK=!0})},changeSms(e){this.$refs.smsForm.resetFields(),this.changeLoading=!0,Object(l["ac"])(e).then(s=>{if(this.changeLoading=!1,s.result){for(let e in s.result)null==s.result[e]&&(s.result[e]="");this.sms=s.result,this.changedSmsSK=!1,this.sms.type="0",this.changeSmsType(this.sms.type)}else this.sms={serviceName:e},this.sms.type="0",this.changedSmsSK=!0})},seeSecret(e){e&&Object(l["Gc"])(e).then(e=>{e.success&&(this.sms.secretKey=e.result,this.changedSmsSK=!0)})},changeSmsType(e){""!=e&&null!=e&&"undefined"!=e&&Object(l["bc"])(this.sms.serviceName,e).then(e=>{e.success&&(this.sms.templateCode=e.result)})},saveEditSms(){this.$refs.smsForm.validate(e=>{e&&(this.saveLoading=!0,this.sms.changed=this.changedSmsSK,Object(l["nb"])(this.sms).then(e=>{this.saveLoading=!1,e.success&&this.$Message.success("保存成功")}))})}},mounted(){this.init()}},c=r,n=t("2877"),m=Object(n["a"])(c,a,i,!1,null,null,null);s["default"]=m.exports}}]);