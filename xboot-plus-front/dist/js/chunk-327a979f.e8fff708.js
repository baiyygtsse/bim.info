(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-327a979f"],{"7efb":function(t,e,s){"use strict";s("cb7e")},cb7e:function(t,e,s){},d254:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",[e("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[e("div",[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addRole}},[t._v("添加新任务")]),e("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),e("Input",{staticStyle:{width:"250px"},attrs:{suffix:"ios-search",placeholder:"输入关键词搜索",clearable:""},on:{"on-change":t.getDataList},model:{value:t.searchForm.key,callback:function(e){t.$set(t.searchForm,"key",e)},expression:"searchForm.key"}})],1),e("div",{staticClass:"icons"},[e("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[e("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:t.getDataList}})],1),e("Tooltip",{attrs:{content:t.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[e("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(e){t.openTip=!t.openTip}}})],1),e("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[e("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.changeTableSize}},[e("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{selected:"default"==t.tableSize,name:"default"}},[t._v("默认")]),e("DropdownItem",{attrs:{selected:"large"==t.tableSize,name:"large"}},[t._v("宽松")]),e("DropdownItem",{attrs:{selected:"small"==t.tableSize,name:"small"}},[t._v("紧密")])],1)],1)],1),e("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[e("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:t.exportData}})],1)],1)]),e("Alert",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[t._v(" 已选择 "),e("span",{staticClass:"select-count"},[t._v(t._s(t.selectList.length))]),t._v(" 项 "),e("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])]),e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,size:t.tableSize,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}}),e("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[e("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),e("Modal",{attrs:{draggable:"",title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[e("Form",{ref:"form",attrs:{model:t.form,"label-position":"top",rules:t.formValidate}},[e("FormItem",{attrs:{label:"任务类引用路径",prop:"jobClassName"}},[e("Input",{attrs:{placeholder:"例如 cn.exrick.xboot.quartz.jobs.Job",clearable:""},model:{value:t.form.jobClassName,callback:function(e){t.$set(t.form,"jobClassName",e)},expression:"form.jobClassName"}})],1),e("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"Cron表达式",prop:"cronExpression"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.cronExpression,callback:function(e){t.$set(t.form,"cronExpression",e)},expression:"form.cronExpression"}}),e("a",{attrs:{target:"_blank",href:"https://www.pppet.net/"}},[e("Icon",{staticStyle:{margin:"0 3px 3px 0"},attrs:{type:"md-arrow-dropright-circle",size:"16"}}),t._v("在线cron表达式生成 ")],1)],1),e("FormItem",{attrs:{label:"参数",prop:"parameter"}},[e("Input",{attrs:{type:"textarea",rows:2,clearable:""},model:{value:t.form.parameter,callback:function(e){t.$set(t.form,"parameter",e)},expression:"form.parameter"}})],1),e("FormItem",{attrs:{label:"备注",prop:"description"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:t.cancelSubmit}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handleSubmit}},[t._v("保存并执行")])],1)],1)],1)},i=[],o=s("365c"),r={name:"quartz-manage",data(){return{tableSize:"default",openTip:!0,loading:!0,sortColumn:"createTime",sortType:"desc",modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",key:""},form:{id:"",jobClassName:"",cronExpression:"",paramter:"",description:""},formValidate:{jobClassName:[{required:!0,message:"任务类名不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"cron表达式不能为空",trigger:"blur"}]},submitLoading:!1,selectList:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"任务类",key:"jobClassName",sortable:!0,minWidth:300},{title:"cron表达式",key:"cronExpression",sortable:!0,width:150},{title:"参数",key:"parameter",sortable:!0,minWidth:180},{title:"备注",key:"description",sortable:!0,minWidth:180},{title:"状态",key:"status",align:"center",width:130,render:(t,e)=>0==e.row.status?t("div",[t("Badge",{props:{status:"success",text:"执行中"}})]):-1==e.row.status?t("div",[t("Badge",{props:{status:"error",text:"已停止"}})]):void 0,filters:[{label:"执行中",value:0},{label:"已停止",value:-1}],filterMultiple:!1,filterMethod(t,e){return e.status==t}},{title:"创建时间",key:"createTime",width:170,sortable:!0,sortType:"desc"},{title:"操作",key:"action",align:"center",fixed:"right",width:200,render:(t,e)=>{let s="";return s=0==e.row.status?t("a",{on:{click:()=>{this.pause(e.row)}}},"暂停"):t("a",{on:{click:()=>{this.resume(e.row)}}},"恢复执行"),t("div",[s,t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:()=>{this.edit(e.row)}}},"编辑"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:()=>{this.remove(e.row)}}},"删除")])}}],data:[],total:0}},methods:{init(){this.getDataList()},changePage(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize(t){this.searchForm.pageSize=t,this.getDataList()},changeSort(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"==t.order&&(this.searchForm.order=""),this.getDataList()},changeTableSize(t){this.tableSize=t},exportData(){this.$refs.table.exportCsv({filename:"数据"})},getDataList(){this.loading=!0,Object(o["Sb"])(this.searchForm).then(t=>{this.loading=!1,t.success&&(this.data=t.result.content,this.total=t.result.totalElements,0==this.data.length&&this.searchForm.pageNumber>1&&(this.searchForm.pageNumber-=1,this.getDataList()))})},cancelSubmit(){this.modalVisible=!1},handleSubmit(){this.$refs.form.validate(t=>{t&&(0==this.modalType?(this.submitLoading=!0,Object(o["i"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)})):(this.submitLoading=!0,Object(o["jb"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)})))})},addRole(){this.modalType=0,this.modalTitle="添加任务",this.$refs.form.resetFields(),this.form={paramter:"",description:""},this.modalVisible=!0},edit(t){this.modalType=1,this.modalTitle="编辑任务",this.$refs.form.resetFields();for(let a in t)null==t[a]&&(t[a]="");let e=JSON.stringify(t),s=JSON.parse(e);this.form=s,this.modalVisible=!0},pause(t){this.$Modal.confirm({title:"确认停止",content:"您确认要停止任务 "+t.jobClassName+" ?",loading:!0,onOk:()=>{Object(o["pc"])(t).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("操作成功"),this.getDataList())})}})},resume(t){this.$Modal.confirm({title:"确认恢复",content:"您确认要恢复任务 "+t.jobClassName+" ?",loading:!0,onOk:()=>{Object(o["zc"])(t).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("操作成功"),this.getDataList())})}})},remove(t){this.$Modal.confirm({title:"确认删除",content:"您确认要删除任务 "+t.jobClassName+" ?",loading:!0,onOk:()=>{Object(o["L"])({ids:t.id}).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})},clearSelectAll(){this.$refs.table.selectAll(!1)},changeSelect(t){this.selectList=t},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let t="";this.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),Object(o["L"])({ids:t}).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("删除成功"),this.clearSelectAll(),this.getDataList())})}})}},mounted(){this.init()}},l=r,n=(s("7efb"),s("2877")),c=Object(n["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports}}]);