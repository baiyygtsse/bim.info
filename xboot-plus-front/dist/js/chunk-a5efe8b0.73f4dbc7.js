(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5efe8b0","chunk-b724fa14","chunk-2d0d7882"],{4158:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",{staticStyle:{"margin-bottom":"10px"}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"edit-head"},[t("a",{staticClass:"back-title",on:{click:e.close}},[t("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("返回 ")],1),t("div",{staticClass:"head-name"},[e._v("流程审批进度历史")]),t("span"),t("a",{staticClass:"window-close",on:{click:e.close}},[t("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)])]),t("div",{staticStyle:{position:"relative"}},[t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data}}),t("div",{staticClass:"img-title"},[e._v("实时流程图")]),t("div",{staticStyle:{position:"relative"}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgUrl,expression:"imgUrl"}]}),e.loadingImg?t("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),e.loading?t("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)])],1)},r=[],i=s("81c1"),o=s("c276"),n={name:"historic_detail",props:{procInstId:String},data(){return{loading:!1,loadingImg:!1,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"任务名称",key:"name",minWidth:120,sortable:!0},{title:"处理人",key:"assignees",align:"center",sortable:!0,minWidth:150,render:(e,t)=>{if(t.row.assignees)return e("div",t.row.assignees.map((function(t,s){return t.isExecutor?e("Tooltip",{props:{placement:"top",content:t.username}},[e("Tag",{style:{"margin-right":"8px"},props:{type:"border",color:"primary"}},t.nickname)]):e("Tooltip",{props:{placement:"top",content:t.username}},[e("Tag",{style:{"margin-right":"8px"},props:{type:"border"}},t.nickname)])})))}},{title:"审批操作",key:"deleteReason",align:"center",minWidth:150,sortable:!0},{title:"审批意见",key:"comment",align:"center",minWidth:120,sortable:!0},{title:"耗时",key:"duration",align:"center",width:100,sortable:!0,render:(e,t)=>e("div",o["a"].millsToTime(t.row.duration))},{title:"创建时间",key:"createTime",width:170,sortType:"asc",sortable:!0},{title:"完成时间",key:"endTime",width:170,sortable:!0},{title:"状态",align:"center",width:120,render:(e,t)=>{let s="",a="";return t.row.endTime?(a="blue",s="已办理"):(a="default",s="待处理"),e("div",[e("Tag",{props:{color:a}},s)])}}],data:[],id:"",imgUrl:"",backRoute:""}},methods:{init(){this.$route.query.id?(this.id=this.$route.query.id,this.backRoute=this.$route.query.backRoute):this.id=this.procInstId,this.imgUrl=i["D"]+this.id+"?accessToken="+this.getStore("accessToken")+"&time="+new Date,this.getDataList()},getDataList(){this.loading=!0,Object(i["M"])(this.id).then(e=>{this.loading=!1,e.success&&(this.data=e.result,e.result&&0!=e.result.length||this.$Modal.info({title:"未找到该记录审批历史数据",content:"历史数据可能已被删除"}))})},close(){this.$route.query.id?(this.$store.commit("removeTag","historic_detail"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList),this.$router.push({name:this.backRoute})):this.$emit("close",!0)}},mounted(){this.init()},watch:{$route(e,t){"historic_detail"==e.name&&this.init()}}},l=n,c=(s("6a25"),s("2877")),d=Object(c["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports},"45b8":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[e.showHistory?t("historicDetail",{attrs:{procInstId:e.procInstId},on:{close:function(t){e.showHistory=!1}}}):e._e(),t("Card",{directives:[{name:"show",rawName:"v-show",value:!e.showHistory,expression:"!showHistory"}]},[t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[t("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"标题",prop:"title"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",clearable:""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),t("FormItem",{attrs:{label:"状态",prop:"status"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[t("Option",{attrs:{value:"0"}},[e._v("草稿")]),t("Option",{attrs:{value:"1"}},[e._v("处理中")]),t("Option",{attrs:{value:"2"}},[e._v("已结束")]),t("Option",{attrs:{value:"3"}},[e._v("已撤回")])],1)],1),e.drop?t("span",[t("FormItem",{attrs:{label:"结果",prop:"result"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchForm.result,callback:function(t){e.$set(e.searchForm,"result",t)},expression:"searchForm.result"}},[t("Option",{attrs:{value:"0"}},[e._v("未提交")]),t("Option",{attrs:{value:"1"}},[e._v("处理中")]),t("Option",{attrs:{value:"2"}},[e._v("通过")]),t("Option",{attrs:{value:"3"}},[e._v("驳回")])],1)],1),t("FormItem",{attrs:{label:"创建时间"}},[t("DatePicker",{staticStyle:{width:"200px"},attrs:{options:e.options,type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1)],1):e._e(),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")]),t("a",{staticClass:"drop-down",on:{click:e.dropDown}},[e._v(" "+e._s(e.dropDownContent)+" "),t("Icon",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1),t("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[t("div",[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("新增申请")]),t("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")])],1),t("div",{staticClass:"icons"},[t("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:e.getDataList}})],1),t("Tooltip",{attrs:{content:e.openSearch?"关闭搜索":"开启搜索",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"ios-search",size:"18"},on:{click:function(t){e.openSearch=!e.openSearch}}})],1),t("Tooltip",{attrs:{content:e.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(t){e.openTip=!e.openTip}}})],1),t("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.changeTableSize}},[t("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{selected:"default"==e.tableSize,name:"default"}},[e._v("默认")]),t("DropdownItem",{attrs:{selected:"large"==e.tableSize,name:"large"}},[e._v("宽松")]),t("DropdownItem",{attrs:{selected:"small"==e.tableSize,name:"small"}},[e._v("紧密")])],1)],1)],1),t("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:e.exportData}})],1)],1)]),t("Alert",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])]),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,size:e.tableSize,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}}),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),t("Drawer",{attrs:{title:"选择流程",closable:"",width:"780",draggable:""},model:{value:e.processModalVisible,callback:function(t){e.processModalVisible=t},expression:"processModalVisible"}},[t("div",{staticClass:"apply-operation"},[t("div",[t("Form",{ref:"searchProcessForm",attrs:{model:e.searchProcessForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"流程名称",prop:"name"}},[t("Input",{staticStyle:{width:"140px"},attrs:{type:"text",clearable:"",placeholder:"请输入流程名"},model:{value:e.searchProcessForm.name,callback:function(t){e.$set(e.searchProcessForm,"name",t)},expression:"searchProcessForm.name"}})],1),t("FormItem",{attrs:{label:"所属分类",prop:"category"}},[t("Cascader",{staticStyle:{width:"140px"},attrs:{data:e.category,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"请选择分类"},on:{"on-change":e.handleChangeCat},model:{value:e.selectCat,callback:function(t){e.selectCat=t},expression:"selectCat"}})],1),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-70px"}},[t("Button",{attrs:{icon:"ios-search"},on:{click:e.searchProcess}},[e._v("搜索")]),t("i-switch",{staticStyle:{margin:"0 5px"},attrs:{size:"large"},on:{"on-change":e.searchProcess},model:{value:e.searchProcessForm.showLatest,callback:function(t){e.$set(e.searchProcessForm,"showLatest",t)},expression:"searchProcessForm.showLatest"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("最新")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("全部")])])],1)],1)],1),t("div",[t("RadioGroup",{attrs:{type:"button"},model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[t("Radio",{attrs:{title:"缩略图",label:"thumb"}},[t("Icon",{attrs:{type:"ios-apps"}})],1),t("Radio",{attrs:{title:"列表",label:"list"}},[t("Icon",{attrs:{type:"md-list"}})],1)],1)],1)]),"thumb"==e.showType?t("div",{staticClass:"process-list-wrapper",style:{maxHeight:e.maxHeight+"px"}},[e._l(e.processData,(function(s,a){return t("Card",{key:a,staticClass:"process-card",style:{marginRight:a%2==0?"25px":"0"}},[t("div",{staticClass:"content",on:{click:function(t){return e.chooseProcess(s)}}},[t("div",{staticClass:"other"},[t("div",{staticClass:"name"},[e._v(e._s(a+1)+". "+e._s(s.name))]),t("div",{staticClass:"key"},[e._v(e._s(s.description))]),t("div",{staticClass:"info"},[e._v(" 版本：v."+e._s(s.version)+" "),t("span",{staticStyle:{"margin-left":"10px"}}),e._v(" 所属分类："+e._s(s.categoryTitle)+" ")])])])])})),e.processLoading?t("Spin",{attrs:{fix:""}}):e._e()],2):e._e(),"list"==e.showType?t("Table",{ref:"processTable",attrs:{height:e.maxHeight,loading:e.processLoading,border:"",columns:e.processColumns,data:e.processData}}):e._e(),t("Row",{staticClass:"process-choose-drawer-footer"},[t("Page",{attrs:{current:e.searchProcessForm.pageNumber,"page-size":e.searchProcessForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-elevator":"","show-sizer":""},on:{"on-change":e.changeProcessPage,"on-page-size-change":e.changeProcessPageSize}})],1)],1),t("Modal",{attrs:{title:"提交申请","mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,"label-width":85,rules:e.formValidate}},[t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.showAssign,expression:"showAssign"}],attrs:{label:"选择审批人",prop:"assignees",error:e.error}},[t("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:"",multiple:"",loading:e.userLoading},model:{value:e.form.assignees,callback:function(t){e.$set(e.form,"assignees",t)},expression:"form.assignees"}},e._l(e.assigneeList,(function(s,a){return t("Option",{key:a,attrs:{value:s.id,label:s.nickname}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(s.nickname))]),t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(s.username))])])})),1)],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.isCustom,expression:"isCustom"}],attrs:{label:"自定义搜索选择审批人",prop:"assignees",error:e.error}},[t("Select",{attrs:{placeholder:"请输入用户名搜索选择用户",filterable:"",remote:"",multiple:"","remote-method":e.searchUser,loading:e.userLoading},model:{value:e.form.assignees,callback:function(t){e.$set(e.form,"assignees",t)},expression:"form.assignees"}},e._l(e.userList,(function(s,a){return t("Option",{key:a,attrs:{value:s.id,label:s.nickname}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(s.nickname))]),t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(s.username))])])})),1)],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.isGateway,expression:"isGateway"}],attrs:{label:"下一审批人"}},[t("span",[e._v("分支网关处暂不支持自定义选择下一审批人，将发送给下一节点所有人")])]),t("FormItem",{attrs:{label:"优先级",prop:"priority"}},[t("dict",{attrs:{dict:"priority"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1),t("FormItem",{attrs:{label:"消息通知"}},[t("Checkbox",{model:{value:e.form.sendMessage,callback:function(t){e.$set(e.form,"sendMessage",t)},expression:"form.sendMessage"}},[e._v("站内消息通知")]),t("Checkbox",{model:{value:e.form.sendSms,callback:function(t){e.$set(e.form,"sendSms",t)},expression:"form.sendSms"}},[e._v("短信通知")]),t("Checkbox",{model:{value:e.form.sendEmail,callback:function(t){e.$set(e.form,"sendEmail",t)},expression:"form.sendEmail"}},[e._v("邮件通知")])],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:e.handelCancel}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmit}},[e._v("提交")])],1)],1),t("Modal",{attrs:{title:"确认撤回","mask-closable":!1,width:500},model:{value:e.modalCancelVisible,callback:function(t){e.modalCancelVisible=t},expression:"modalCancelVisible"}},[t("Form",{ref:"delForm",attrs:{"label-width":70},model:{value:e.cancelForm,callback:function(t){e.cancelForm=t},expression:"cancelForm"}},[t("FormItem",{attrs:{label:"撤回原因",prop:"reason"}},[t("Input",{attrs:{type:"textarea",rows:4},model:{value:e.cancelForm.reason,callback:function(t){e.$set(e.cancelForm,"reason",t)},expression:"cancelForm.reason"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.modalCancelVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmitCancel}},[e._v("提交")])],1)],1)],1)},r=[],i=s("81c1"),o=s("365c"),n=s("4158"),l=s("6c6d"),c=s("76e2"),d={name:"apply-manage",components:{historicDetail:n["default"],dict:c["default"]},data(){return{tableSize:"default",showHistory:!1,procInstId:"",maxHeight:510,openSearch:!0,openTip:!0,loading:!0,processModalVisible:!1,selectCat:[],category:[],error:"",showAssign:!1,isGateway:!1,isCustom:!1,searchProcessForm:{showLatest:!0,filter:!0,name:"",status:"1",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},options:{shortcuts:l["a"]},cancelForm:{reason:""},modalCancelVisible:!1,processLoading:!1,processColumns:[{type:"index",width:60,align:"center"},{title:"名称",key:"name",width:150,sortable:!0},{title:"备注描述",key:"description",width:150,sortable:!0},{title:"所属分类",key:"categoryTitle",width:150,sortable:!0},{title:"版本",key:"version",align:"center",sortable:!0,render:(e,t)=>{let s="";return t.row.version&&(s="v."+t.row.version),e("div",s)}},{title:"操作",key:"action",width:130,align:"center",fixed:"right",render:(e,t)=>e("div",[e("Button",{props:{type:"default",size:"small"},on:{click:()=>{this.chooseProcess(t.row)}}},"选择流程")])}],processData:[],showType:"thumb",selectList:[],drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",searchForm:{title:"",status:"",result:"",pageNumber:1,pageSize:10,startDate:"",endDate:"",sort:"createTime",order:"desc"},userLoading:!1,modalVisible:!1,selectDate:null,form:{sendMessage:!0,sendSms:!0,sendEmail:!0,procDefId:"",assignees:[],priority:"0"},formValidate:{procDefId:[{required:!0,message:"不能为空",trigger:"change"}],priority:[{required:!0,message:"不能为空",trigger:"change"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"标题",key:"title",minWidth:150,sortable:!0},{title:"所属流程",key:"processName",minWidth:150,tooltip:!0,render:(e,t)=>{let s="";return t.row.version&&(s=t.row.processName+" - v."+t.row.version),e("div",[e("span",s)])}},{title:"当前审批环节",key:"currTaskName",minWidth:150,tooltip:!0},{title:"状态",key:"status",align:"center",width:120,sortable:!0,render:(e,t)=>{let s="未知",a="";return 0==t.row.status?(s="草稿",a="default"):1==t.row.status?(s="处理中",a="orange"):2==t.row.status?(s="已结束",a="blue"):3==t.row.status&&(s="已撤回",a="magenta"),e("div",[e("Tag",{props:{color:a}},s)])}},{title:"结果",key:"result",align:"center",width:120,sortable:!0,render:(e,t)=>{let s="未知",a="";return 0==t.row.result?(s="未提交",a="default"):1==t.row.result?(s="处理中",a="orange"):2==t.row.result?(s="已通过",a="green"):3==t.row.result&&(s="已驳回",a="red"),e("div",[e("Tag",{props:{color:a}},s)])}},{title:"创建时间",key:"createTime",width:180,sortType:"desc",sortable:!0},{title:"提交申请时间",key:"applyTime",width:180,sortable:!0},{title:"操作",key:"action",align:"center",width:250,fixed:"right",render:(e,t)=>{let s="";return s=0==t.row.status?[e("a",{on:{click:()=>{this.apply(t.row)}}},"提交申请"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.edit(t.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.remove(t.row)}}},"删除")]:1==t.row.status?[e("a",{on:{click:()=>{this.cancel(t.row)}}},"撤回"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.history(t.row)}}},"查看进度"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.detail(t.row)}}},"表单数据")]:2==t.row.status&&3==t.row.result||3==t.row.status?[e("a",{on:{click:()=>{this.apply(t.row)}}},"重新申请"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.edit(t.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.history(t.row)}}},"审批历史")]:[e("a",{on:{click:()=>{this.detail(t.row)}}},"表单数据"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.history(t.row)}}},"审批历史")],e("div",s)}}],data:[],total:0,assigneeList:[],userList:[]}},methods:{init(){this.getDataList(),this.getProcessList(),this.initCategoryData()},getProcessList(){this.processLoading=!0,Object(i["J"])(this.searchProcessForm).then(e=>{this.processLoading=!1,e.success&&(this.processData=e.result.content)})},changeProcessPage(e){this.searchProcessForm.pageNumber=e,this.getProcessList()},changeProcessPageSize(e){this.searchProcessForm.pageSize=e,this.getProcessList()},searchProcess(){this.searchProcessForm.pageNumber=1,this.getProcessList()},searchUser(e){e&&(this.userLoading=!0,Object(o["Fc"])(e).then(e=>{this.userLoading=!1,e.success&&(this.userList=e.result)}))},initCategoryData(){Object(i["N"])().then(e=>{e.success&&(e.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),this.category=e.result)})},loadData(e,t){e.loading=!0,Object(i["O"])(e.value).then(s=>{e.loading=!1,s.success&&(s.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=s.result,t())})},handleChangeCat(e,t){let s="";e&&e.length>0&&(s=e[e.length-1]),this.searchProcessForm.categoryId=s},dropDown(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},changeSort(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getDataList()},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},selectDateRange(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},changeTableSize(e){this.tableSize=e},exportData(){this.$refs.table.exportCsv({filename:"数据"})},getDataList(){this.loading=!0,this.searchForm.status||(this.searchForm.status=" "),this.searchForm.result||(this.searchForm.result=" "),Object(i["A"])(this.searchForm).then(e=>{this.loading=!1,e.success&&(this.data=e.result.content,this.total=e.result.totalElements,0==this.data.length&&this.searchForm.pageNumber>1&&(this.searchForm.pageNumber-=1,this.getDataList()))})},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.getDataList()},handelCancel(){this.modalVisible=!1},handelSubmit(){this.$refs.form.validate(e=>{if(e){if((this.showAssign||this.isCustom)&&this.form.assignees.length<1)return void(this.error="请至少选择一个审批人");this.error="",this.submitLoading=!0,Object(i["d"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)})}})},add(){this.processModalVisible=!0},chooseProcess(e){if(!e.routeName)return void this.$Message.warning("该流程信息未完善，请于流程管理中编辑流程完善信息");this.processModalVisible=!1;let t={type:0,backRoute:this.$route.name,procDefId:e.id};this.$router.push({name:e.routeName,query:t})},edit(e){if(!e.routeName)return void this.$Message.error("表单路由名为空");let t={type:1,id:e.tableId,backRoute:this.$route.name};this.$router.push({name:e.routeName,query:t})},detail(e){if(!e.routeName)return void this.$Message.error("表单路由名为空");let t={type:2,id:e.tableId,backRoute:this.$route.name};this.$router.push({name:e.routeName,query:t})},apply(e){e.procDefId&&"null"!=e.procDefId?(this.form.id=e.id,this.form.procDefId=e.procDefId,this.form.title=e.title,this.userLoading=!0,Object(i["C"])(e.procDefId).then(e=>{if(this.userLoading=!1,e.success){if(this.error="",3==e.result.type||4==e.result.type)return this.isGateway=!0,this.form.firstGateway=!0,this.showAssign=!1,void(this.isCustom=!1);if(5==e.result.type)return this.isCustom=!0,this.isGateway=!1,this.form.firstGateway=!1,void(this.showAssign=!1);if(1==e.result.type)if(this.showAssign=!0,this.isGateway=!1,this.form.firstGateway=!1,this.isCustom=!1,e.result.users&&e.result.users.length>0){this.assigneeList=e.result.users;let t=[];e.result.users.forEach(e=>{t.push(e.id)}),this.form.assignees=t,this.showAssign=!0}else this.form.assignees=[],this.showAssign=!0,this.error='请进入"流程管理"为审批节点分配候选审批人员'}}),this.modalVisible=!0):this.$Message.error("流程定义为空")},cancel(e){this.cancelForm.id=e.id,this.cancelForm.procInstId=e.procInstId,this.modalCancelVisible=!0},handelSubmitCancel(){this.submitLoading=!0,Object(i["h"])(this.cancelForm).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalCancelVisible=!1)})},history(e){e.procInstId?(this.procInstId=e.procInstId,this.showHistory=!0):this.$Message.error("流程实例ID不存在")},remove(e){this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.title+" ?",loading:!0,onOk:()=>{Object(i["m"])({ids:e.id}).then(e=>{this.$Modal.remove(),e.success&&(this.clearSelectAll(),this.$Message.success("操作成功"),this.getDataList())})}})},showSelect(e){this.selectList=e},clearSelectAll(){this.$refs.table.selectAll(!1)},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let e="";this.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(i["m"])({ids:e}).then(e=>{this.$Modal.remove(),e.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})}},mounted(){this.maxHeight=Number(document.documentElement.clientHeight-180),this.init()},watch:{$route(e,t){"apply-manage"==e.name&&(this.getDataList(),this.getProcessList())}}},u=d,h=(s("6ee5"),s("2877")),m=Object(h["a"])(u,a,r,!1,null,null,null);t["default"]=m.exports},"6a25":function(e,t,s){"use strict";s("8be0")},"6c6d":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=[{text:"今日",value(){var e=new Date,t=new Date;return e.setTime(t.getTime()),[t,e]}},{text:"昨日",value(){var e=new Date,t=new Date;return t.setTime(t.getTime()-864e5),e.setTime(e.getTime()-864e5),[t,e]}},{text:"本周",value(){var e=new Date,t=e.getDay(),s=e.getDate(),a=e.getMonth(),r=t||7,i=new Date(e.getFullYear(),a,s+1-r),o=new Date(e.getFullYear(),a,s+7-r);return i.setTime(i.getTime()),o.setTime(o.getTime()),[i,o]}},{text:"本月",value(){var e=new Date,t=e.getYear();t+=t<2e3?1900:0;var s=e.getMonth(),a=new Date(t,s,1),r=new Date(t,s+1,1),i=(r-a)/864e5,o=new Date(t,s,1),n=new Date(t,s,i);return o.setTime(o.getTime()),n.setTime(n.getTime()),[o,n]}}]},"6ee5":function(e,t,s){"use strict";s("95f3")},"76e2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("Select",{attrs:{size:e.size,loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(s,a){return t("Option",{key:a,attrs:{value:s.value}},[e._v(e._s(s.title))])})),1)],1)},r=[],i=s("365c"),o={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData(e){this.loading=!0,Object(i["Ab"])(e).then(e=>{this.loading=!1,e.success&&(this.dictData=e.result)})},handleChange(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange(e){this.$emit("on-query-change",e)},handleClear(){this.$emit("on-clear","")},handleOpenChange(e){this.$emit("on-open-change",e)},handleSelect(e){this.$emit("on-select",e)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value(e){this.setCurrentValue(e)},dict(e){this.getData(e)}},mounted(){this.getData(this.dict)}},n=o,l=s("2877"),c=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=c.exports},"81c1":function(e,t,s){"use strict";s.d(t,"x",(function(){return r})),s.d(t,"r",(function(){return i})),s.d(t,"y",(function(){return o})),s.d(t,"D",(function(){return n})),s.d(t,"F",(function(){return l})),s.d(t,"c",(function(){return c})),s.d(t,"s",(function(){return d})),s.d(t,"o",(function(){return u})),s.d(t,"J",(function(){return h})),s.d(t,"U",(function(){return m})),s.d(t,"X",(function(){return p})),s.d(t,"i",(function(){return g})),s.d(t,"K",(function(){return b})),s.d(t,"v",(function(){return f})),s.d(t,"w",(function(){return y})),s.d(t,"p",(function(){return v})),s.d(t,"L",(function(){return w})),s.d(t,"B",(function(){return k})),s.d(t,"I",(function(){return C})),s.d(t,"C",(function(){return D})),s.d(t,"G",(function(){return x})),s.d(t,"H",(function(){return F})),s.d(t,"V",(function(){return S})),s.d(t,"q",(function(){return O})),s.d(t,"j",(function(){return I})),s.d(t,"T",(function(){return T})),s.d(t,"t",(function(){return _})),s.d(t,"M",(function(){return P})),s.d(t,"k",(function(){return j})),s.d(t,"P",(function(){return L})),s.d(t,"Q",(function(){return $})),s.d(t,"z",(function(){return z})),s.d(t,"e",(function(){return M})),s.d(t,"f",(function(){return N})),s.d(t,"g",(function(){return B})),s.d(t,"n",(function(){return V})),s.d(t,"N",(function(){return A})),s.d(t,"O",(function(){return R})),s.d(t,"a",(function(){return H})),s.d(t,"u",(function(){return E})),s.d(t,"l",(function(){return q})),s.d(t,"R",(function(){return G})),s.d(t,"A",(function(){return U})),s.d(t,"d",(function(){return W})),s.d(t,"S",(function(){return J})),s.d(t,"h",(function(){return Q})),s.d(t,"m",(function(){return Y})),s.d(t,"E",(function(){return K})),s.d(t,"b",(function(){return X})),s.d(t,"W",(function(){return Z}));var a=s("7f80");const r="/xboot/actModel/export/",i="/xboot/actModel/deployByFile",o="/xboot/actProcess/export",n="/xboot/actProcess/getHighlightImg/",l=e=>Object(a["b"])("/actModel/getByCondition",e),c=e=>Object(a["e"])("/actModel/add",e),d=(e,t)=>Object(a["b"])("/actModel/deploy/"+e,t),u=e=>Object(a["e"])("/actModel/delByIds",e),h=e=>Object(a["b"])("/actProcess/getByCondition",e),m=e=>Object(a["e"])("/actProcess/updateInfo",e),p=e=>Object(a["e"])("/actProcess/updateStatus",e),g=(e,t)=>Object(a["b"])("/actProcess/convertToModel/"+e,t),b=(e,t)=>Object(a["b"])("/actProcess/getProcessNode/"+e,t),f=e=>Object(a["e"])("/actProcess/editNodeUser",e),y=e=>Object(a["e"])("/actProcess/editStartUser",e),v=e=>Object(a["e"])("/actProcess/delByIds",e),w=e=>Object(a["b"])("/actProcess/getRunningProcess",e),k=e=>Object(a["b"])("/actProcess/getFinishedProcess",e),C=(e,t)=>Object(a["b"])("/actProcess/getByKey/"+e,t),D=(e,t)=>Object(a["b"])("/actProcess/getFirstNode/"+e,t),x=(e,t,s)=>Object(a["b"])(`/actProcess/getNextNode/${e}/${t}`,s),F=(e,t)=>Object(a["b"])("/actProcess/getNode/"+e,t),S=e=>Object(a["e"])("/actProcess/updateInsStatus",e),O=e=>Object(a["e"])("/actProcess/delInsByIds",e),I=e=>Object(a["e"])("/actProcess/delHistoricInsByIds",e),T=e=>Object(a["b"])("/actTask/todoList",e),_=e=>Object(a["b"])("/actTask/doneList",e),P=(e,t)=>Object(a["b"])("/actTask/historicFlow/"+e,t),j=e=>Object(a["e"])("/actTask/delegate",e),L=e=>Object(a["e"])("/actTask/pass",e),$=e=>Object(a["e"])("/actTask/passAll",e),z=(e,t)=>Object(a["b"])("/actTask/getBackList/"+e,t),M=e=>Object(a["e"])("/actTask/back",e),N=e=>Object(a["e"])("/actTask/backAll",e),B=e=>Object(a["e"])("/actTask/backToTask",e),V=e=>Object(a["e"])("/actTask/deleteHistoric",e),A=e=>Object(a["b"])("/actCategory/getByParentId/0",e),R=(e,t)=>Object(a["b"])("/actCategory/getByParentId/"+e,t),H=e=>Object(a["e"])("/actCategory/add",e),E=e=>Object(a["e"])("/actCategory/edit",e),q=e=>Object(a["e"])("/actCategory/delByIds",e),G=e=>Object(a["b"])("/actCategory/search",e),U=e=>Object(a["b"])("/actBusiness/getByCondition",e),W=e=>Object(a["e"])("/actBusiness/apply",e),J=e=>Object(a["e"])("/actBusiness/start",e),Q=e=>Object(a["e"])("/actBusiness/cancel",e),Y=e=>Object(a["e"])("/actBusiness/delByIds",e),K=(e,t)=>Object(a["b"])("/leave/get/"+e,t),X=e=>Object(a["e"])("/leave/add",e),Z=e=>Object(a["f"])("/leave/update",e)},"8be0":function(e,t,s){},"95f3":function(e,t,s){}}]);