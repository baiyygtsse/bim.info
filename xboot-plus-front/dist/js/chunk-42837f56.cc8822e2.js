(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42837f56","chunk-1e6e206c","chunk-48bb1b53","chunk-6a894892"],{1338:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},["darkMode"==t.mainTheme?e("img",{attrs:{src:s("d939"),width:"220px"}}):e("img",{attrs:{src:s("9279"),width:"220px"}}),e("div",{staticClass:"description"},[t._v(t._s(t.$t("xboot")))])])])},r=[],i={name:"xboot-header",computed:{mainTheme(){return this.$store.state.theme.theme.mainTheme}}},n=i,o=(s("bf60"),s("2877")),l=Object(o["a"])(n,a,r,!1,null,"eb7d1ad6",null);e["default"]=l.exports},"4de4":function(t,e,s){"use strict";s("f03a")},"529b":function(t,e,s){},"5c5f":function(t,e,s){"use strict";s("7921")},7921:function(t,e,s){},"8cc9":function(t,e,s){"use strict";s("da43")},"8d45":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this;t._self._c;return t._m(0)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"spinner"},[e("div",{staticClass:"rect1"}),e("div",{staticClass:"rect2"}),e("div",{staticClass:"rect3"}),e("div",{staticClass:"rect4"}),e("div",{staticClass:"rect5"})])}],i={name:"rectLoading"},n=i,o=(s("8cc9"),s("2877")),l=Object(o["a"])(n,a,r,!1,null,null,null);e["default"]=l.exports},9477:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"relate"},[e("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"center",align:"middle"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkVaptcha.apply(null,arguments)}}},[e("Col",{staticClass:"content"},[e("div",[e("Header"),t.relateLoading?t._e():e("div",[e("Tabs",{attrs:{value:"1"}},[e("TabPane",{attrs:{label:t.$t("relateTitle"),name:"1",icon:"md-person-add"}},[e("Form",{ref:"relateLoginForm",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[e("FormItem",{attrs:{prop:"username"}},[e("Input",{attrs:{prefix:"ios-person-outline",size:"large",clearable:"",placeholder:"请输入登录账号",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("FormItem",{attrs:{prop:"password"}},[e("Input",{attrs:{type:"password",prefix:"ios-lock-outline",size:"large",clearable:"",placeholder:"请输入密码",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1),e("Row",[e("Button",{attrs:{type:"primary",size:"large",loading:t.loading,long:""},on:{click:t.checkVaptcha}},[t.loading?e("span",[t._v(t._s(t.$t("relating")))]):e("span",[t._v(t._s(t.$t("relate")))])])],1),e("Row",{staticClass:"other-thing",attrs:{type:"flex",justify:"space-between"}},[e("router-link",{staticClass:"back",attrs:{to:"/reset"}},[t._v(t._s(t.$t("forgetPass")))]),e("router-link",{staticClass:"back",attrs:{to:"/register"}},[t._v(" "+t._s(t.$t("registerNow"))+" ")])],1)],1),t.relateLoading?e("div",[e("RectLoading")],1):t._e()],1),e("Footer")],1),e("LangSwitch")],1)],1)},r=[],i=s("852e"),n=s.n(i),o=s("365c"),l=s("c276"),c=s("1338"),u=s("c9d5"),d=s("ab7e"),h=s("8d45"),f={components:{LangSwitch:d["default"],Header:c["default"],Footer:u["default"],RectLoading:h["default"]},data(){return{relateLoading:!0,loadingVaptcha:!0,loading:!1,verified:!1,form:{isLogin:!1,username:"",password:"",socialType:null,id:"",token:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},vaptchaObject:null}},methods:{submitRelate(){this.form.id?this.$refs.relateLoginForm.validate(t=>{t&&(this.loading=!0,this.form.isLogin=!1,Object(o["sc"])(this.form).then(t=>{t.success?Object(o["Fb"])({JWTKey:t.result}).then(t=>{if(t.success){this.$Message.success("绑定成功");let e=t.result;this.setStore("accessToken",e),Object(o["Pb"])().then(t=>{if(t.result){let s=t.result.ssoDomain;n.a.set("accessToken",e,{domain:s,expires:7})}}),Object(o["Uc"])().then(t=>{if(t.success){delete t.result.permissions;let e=[];t.result.roles.forEach(t=>{e.push(t.name)}),delete t.result.roles,this.setStore("roles",e),n.a.set("userInfo",JSON.stringify(t.result),{expires:7}),this.setStore("userInfo",t.result),this.$store.commit("setUserInfo",t.result),l["a"].initRouter(this),this.$router.push({name:"home_index"})}else this.loading=!1})}else this.loading=!1}):(this.loading=!1,this.vaptchaObject.reset())}))}):this.$Message.error("参数非法")},relateDirect(){this.form.isLogin=!0,Object(o["sc"])(this.form).then(t=>{t.success&&this.$Message.success("绑定成功"),this.$router.push({name:"ownspace_index",query:{type:"social"}})})},initVaptcha(){let t=this;vaptcha({vid:o["Wc"],type:"invisible",offline_server:o["Xc"]}).then((function(e){t.vaptchaObject=e;let s=n.a.get("userInfo");s&&t.vaptchaObject.validate(),e.listen("pass",(function(){t.form.token=e.getToken(),s?t.relateDirect():t.submitRelate()}))}))},checkVaptcha(){this.$refs.relateLoginForm.validate(t=>{t&&this.vaptchaObject.validate()})}},mounted(){let t=this.$route.query;this.form.socialType=t.socialType,this.form.id=t.id,this.initVaptcha();let e=n.a.get("userInfo");e||(this.relateLoading=!1)}},m=f,p=(s("5c5f"),s("2877")),g=Object(p["a"])(m,a,r,!1,null,null,null);e["default"]=g.exports},ab7e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"lang-icon"},[e("Dropdown",{attrs:{transfer:""},on:{"on-click":t.langChange}},[e("Icon",{attrs:{type:"md-globe",size:"26"}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:"zh-CN",selected:"zh-CN"==t.currLang}},[e("div",{staticClass:"lan-logo-content"},[e("img",{staticClass:"country-logo",attrs:{src:s("6336")}}),t._v("简体中文 ")])]),e("DropdownItem",{attrs:{name:"en-US",selected:"en-US"==t.currLang}},[e("div",{staticClass:"lan-logo-content"},[e("img",{staticClass:"country-logo",attrs:{src:s("38f6")}}),t._v("English ")])])],1)],1)],1)},r=[],i={name:"langSwitch",data(){return{currLang:"zh-CN"}},methods:{langChange(t){this.currLang=t,this.$i18n.locale=t,this.$store.commit("switchLang",t)}},mounted(){localStorage.lang&&(this.currLang=localStorage.lang)}},n=i,o=(s("4de4"),s("2877")),l=Object(o["a"])(n,a,r,!1,null,null,null);e["default"]=l.exports},bf60:function(t,e,s){"use strict";s("529b")},da43:function(t,e,s){},f03a:function(t,e,s){}}]);