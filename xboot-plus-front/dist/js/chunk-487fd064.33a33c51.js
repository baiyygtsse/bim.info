(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-487fd064","chunk-1e6e206c","chunk-48bb1b53","chunk-6a894892","chunk-2d0ceda3"],{"10fd":function(t,e,s){"use strict";s.d(e,"c",(function(){return o})),s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return n}));const o=(t,e,s)=>{var o=/^[a-zA-Z0-9_]{1,16}$/;e.length>16?s(new Error("长度不能超过16个字符")):o.test(e)?s():s(new Error("仅支持大小写英文、数字和下划线_"))},i=(t,e,s)=>{e.length<6?s(new Error("密码长度不得小于6位")):s()},n=(t,e,s)=>{var o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;o.test(e)?s():s(new Error("手机号格式错误"))}},1338:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},["darkMode"==t.mainTheme?e("img",{attrs:{src:s("d939"),width:"220px"}}):e("img",{attrs:{src:s("9279"),width:"220px"}}),e("div",{staticClass:"description"},[t._v(t._s(t.$t("xboot")))])])])},i=[],n={name:"xboot-header",computed:{mainTheme(){return this.$store.state.theme.theme.mainTheme}}},a=n,r=(s("bf60"),s("2877")),c=Object(r["a"])(a,o,i,!1,null,"eb7d1ad6",null);e["default"]=c.exports},"1f3b":function(t,e,s){"use strict";s("a0ca")},"4de4":function(t,e,s){"use strict";s("f03a")},"529b":function(t,e,s){},"60e8":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("Button",{attrs:{countTime:t.countTime,loading:t.loading,type:t.type,size:t.size,ghost:t.ghost,disabled:t.disabled||t.clicked,icon:t.icon,shape:t.shape,long:t.long},on:{click:t.handleClick}},[t._v(t._s(t.buttonText))])],1)},i=[],n={name:"iconChoose",props:{text:{type:String,default:"提交"},autoCountDown:{type:Boolean,default:!0},countTime:{type:[Number,String],default:60},suffixText:{type:String,default:"秒后重试"},type:String,size:String,loading:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:String,shape:String,long:{type:Boolean,default:!1}},data(){return{buttonText:this.text,count:Number(this.countTime),clicked:!1}},methods:{init(){},handleClick(){this.autoCountDown&&(this.clicked=!0,this.countDown()),this.$emit("on-click",!0)},startCountDown(){this.clicked=!0,this.countDown()},countDown(){if(0==this.count)return this.clicked=!1,this.count=this.countTime,void(this.buttonText=this.text);this.buttonText=this.count+" "+this.suffixText,this.count--,setTimeout(()=>{this.countDown()},1e3)},setText(t){t!==this.buttonText&&(this.buttonText=t)}},watch:{text(t){this.setText(t)}},mounted(){this.init()}},a=n,r=s("2877"),c=Object(r["a"])(a,o,i,!1,null,null,null);e["default"]=c.exports},"8cc9":function(t,e,s){"use strict";s("da43")},"8d45":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"spinner"},[e("div",{staticClass:"rect1"}),e("div",{staticClass:"rect2"}),e("div",{staticClass:"rect3"}),e("div",{staticClass:"rect4"}),e("div",{staticClass:"rect5"})])}],n={name:"rectLoading"},a=n,r=(s("8cc9"),s("2877")),c=Object(r["a"])(a,o,i,!1,null,null,null);e["default"]=c.exports},a0ca:function(t,e,s){},ab7e:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"lang-icon"},[e("Dropdown",{attrs:{transfer:""},on:{"on-click":t.langChange}},[e("Icon",{attrs:{type:"md-globe",size:"26"}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:"zh-CN",selected:"zh-CN"==t.currLang}},[e("div",{staticClass:"lan-logo-content"},[e("img",{staticClass:"country-logo",attrs:{src:s("6336")}}),t._v("简体中文 ")])]),e("DropdownItem",{attrs:{name:"en-US",selected:"en-US"==t.currLang}},[e("div",{staticClass:"lan-logo-content"},[e("img",{staticClass:"country-logo",attrs:{src:s("38f6")}}),t._v("English ")])])],1)],1)],1)},i=[],n={name:"langSwitch",data(){return{currLang:"zh-CN"}},methods:{langChange(t){this.currLang=t,this.$i18n.locale=t,this.$store.commit("switchLang",t)}},mounted(){localStorage.lang&&(this.currLang=localStorage.lang)}},a=n,r=(s("4de4"),s("2877")),c=Object(r["a"])(a,o,i,!1,null,null,null);e["default"]=c.exports},bf60:function(t,e,s){"use strict";s("529b")},da43:function(t,e,s){},dd7b:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"center",align:"middle"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitLogin.apply(null,arguments)}}},[e("Col",{staticClass:"content"},[e("div",[e("Header"),t.socialLogining?t._e():e("div",[e("div",{staticStyle:{position:"relative"}},[e("Tabs",{on:{"on-click":t.changeTab},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[e("TabPane",{attrs:{label:t.$t("usernameLogin"),name:"username",icon:"md-person"}},["username"==t.tabName?e("Form",{ref:"usernameLoginForm",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[e("FormItem",{attrs:{prop:"username"}},[e("Input",{attrs:{prefix:"ios-person-outline",size:"large",clearable:"",placeholder:"账号/手机号/邮箱",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("FormItem",{attrs:{prop:"password"}},[e("Input",{attrs:{type:"password",prefix:"ios-lock-outline",size:"large",password:"",placeholder:"请输入密码",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("FormItem",{attrs:{prop:"code",rules:{required:!0,message:"验证码不能为空"}}},[e("Row",{staticStyle:{"align-items":"center",overflow:"hidden"},attrs:{type:"flex",justify:"space-between"}},[e("Input",{staticClass:"input-verify",attrs:{size:"large",clearable:"",placeholder:"请输入图片验证码",maxlength:10},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),e("div",{staticClass:"code-image",staticStyle:{position:"relative","font-size":"12px"}},[t.loadingCaptcha?e("Spin",{attrs:{fix:""}}):t._e(),e("img",{staticStyle:{width:"110px",cursor:"pointer",display:"block"},attrs:{src:t.captchaImg,alt:"加载验证码失败"},on:{click:t.getCaptchaImg}})],1)],1)],1)],1):t._e()],1),e("TabPane",{attrs:{label:t.$t("mobileLogin"),name:"mobile",icon:"ios-phone-portrait"}},["mobile"==t.tabName?e("Form",{ref:"mobileLoginForm",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[e("FormItem",{attrs:{prop:"mobile"}},[e("Input",{attrs:{prefix:"ios-phone-portrait",size:"large",clearable:"",placeholder:"请输入手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),e("FormItem",{attrs:{prop:"code",rules:t.checkSms?{required:!0,message:"验证码不能为空"}:{}}},[e("Row",{attrs:{type:"flex",justify:"space-between"}},[e("Input",{staticClass:"input-verify",attrs:{prefix:"ios-mail-outline",size:"large",clearable:"",placeholder:"请输入短信验证码",maxlength:6},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),e("CountDownButton",{ref:"countDown",attrs:{autoCountDown:!1,size:"large",loading:t.sending,text:t.getSms},on:{"on-click":t.sendSmsCode}})],1)],1)],1):t._e()],1)],1),e("Tooltip",{staticClass:"qr block-tool",attrs:{content:"XBoot App扫码登录",placement:"right"}},[e("router-link",{attrs:{to:"/login-qr"}},[e("XIcon",{attrs:{type:"iconfont icon-saomadenglu1",size:"30"}})],1)],1)],1),e("Row",{attrs:{justify:"space-between",align:"middle"}},[e("Checkbox",{attrs:{size:"large"},model:{value:t.form.saveLogin,callback:function(e){t.$set(t.form,"saveLogin",e)},expression:"form.saveLogin"}},[t._v(t._s(t.$t("autoLogin")))]),e("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.handleDropDown}},[e("a",{staticClass:"forget-pass"},[t._v(t._s(t.$t("forgetPass")))]),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:"test"}},[t._v("体验测试账号")]),e("DropdownItem",{attrs:{name:"resetByMobile"}},[t._v("使用手机号重置密码(付费)")]),e("DropdownItem",{attrs:{name:"resetByEmail"}},[t._v("使用邮箱重置密码(付费)")])],1)],1)],1),e("Button",{staticClass:"login-btn",attrs:{type:"primary",size:"large",loading:t.loading,long:""},on:{click:t.submitLogin}},[t.loading?e("span",[t._v(t._s(t.$t("logining")))]):e("span",[t._v(t._s(t.$t("login")))])]),e("Row",{staticClass:"other-login",attrs:{type:"flex",justify:"space-between"}},[e("div",{staticClass:"other-way icons"},[t._v(" "+t._s(t.$t("otherLogin"))+" "),e("div",{staticClass:"other-icon",on:{click:t.toGithubLogin}},[e("Icon",{staticClass:"other-icon",attrs:{custom:"iconfont icon-github",size:"20"},on:{click:t.toGithubLogin}})],1),e("div",{staticClass:"other-icon",on:{click:t.toQQLogin}},[e("Icon",{attrs:{custom:"iconfont icon-qq",size:"22"}})],1),e("div",{staticClass:"other-icon",on:{click:t.toWeixinLogin}},[e("Icon",{attrs:{custom:"iconfont icon-weixin",size:"23"}})],1),e("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}],staticClass:"other-icon",attrs:{type:"ios-arrow-down",size:"16"},on:{click:function(e){t.showMore=!0}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"other-icon",on:{click:t.toWeiboLogin}},[e("Icon",{attrs:{custom:"iconfont icon-weibo",size:"23"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"other-icon",on:{click:t.toDingdingLogin}},[e("Icon",{attrs:{custom:"iconfont icon-dingding",size:"20"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"other-icon",on:{click:t.toWorkwechatLogin}},[e("Icon",{attrs:{custom:"iconfont icon-qiyeweixin",size:"20"}})],1),e("Icon",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"other-icon",attrs:{type:"ios-arrow-up",size:"16"},on:{click:function(e){t.showMore=!1}}})],1),e("router-link",{attrs:{to:"/register"}},[e("a",{staticClass:"forget-pass"},[t._v(t._s(t.$t("registerAccount")))])])],1)],1),t.socialLogining?e("div",[e("RectLoading")],1):t._e()],1),e("Footer")],1),e("LangSwitch")],1)],1)},i=[],n=s("365c"),a=s("10fd"),r=s("852e"),c=s.n(r),l=s("1338"),u=s("c9d5"),h=s("ab7e"),d=s("8d45"),g=s("60e8"),m=s("c276"),f={components:{CountDownButton:g["default"],RectLoading:d["default"],LangSwitch:h["default"],Header:l["default"],Footer:u["default"]},data(){return{showMore:!1,captchaImg:"",loadingCaptcha:!0,socialLogining:!0,error:!1,tabName:"username",getSms:"获取验证码",loading:!1,sending:!1,checkSms:!0,form:{username:"test或test2 可注册 支持第三方账号登录",password:"123456",mobile:"",code:"",captchaId:"",saveLogin:!0},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:a["a"],trigger:"blur"}]}}},methods:{changeTab(t){this.form.code=""},getCaptchaImg(){this.loadingCaptcha=!0,Object(n["ic"])().then(t=>{this.loadingCaptcha=!1,t.success&&(this.form.code="",this.form.captchaId=t.result,this.captchaImg=n["T"]+this.form.captchaId)})},sendSmsCode(){this.checkSms=!1,setTimeout(()=>{this.$refs.mobileLoginForm.validate(t=>{this.checkSms=!0,t&&(this.sending=!0,this.getSms="发送中",Object(n["Jc"])(this.form.mobile).then(t=>{this.getSms="获取验证码",this.sending=!1,t.success&&(this.$Message.success("发送短信验证码成功"),this.$refs.countDown.startCountDown())}))})},50)},afterLogin(t){let e=t.result;this.setStore("accessToken",e),Object(n["Pb"])().then(t=>{if(t.result){let s=t.result.ssoDomain;c.a.set("accessToken",e,{domain:s,expires:7})}}),Object(n["Uc"])().then(t=>{if(t.success){delete t.result.permissions;let e=[];t.result.roles.forEach(t=>{e.push(t.name)}),delete t.result.roles,this.setStore("roles",e),this.setStore("saveLogin",this.form.saveLogin),this.form.saveLogin?c.a.set("userInfo",JSON.stringify(t.result),{expires:7}):c.a.set("userInfo",JSON.stringify(t.result)),this.setStore("userInfo",t.result),this.$store.commit("setUserInfo",t.result),m["a"].initRouter(this),this.$router.push({name:"home_index"})}else this.loading=!1})},submitLogin(){"username"==this.tabName?this.$refs.usernameLoginForm.validate(t=>{t&&(this.loading=!0,Object(n["nc"])(this.form).then(t=>{t.success?this.afterLogin(t):(this.loading=!1,this.getCaptchaImg())}))}):"mobile"==this.tabName&&this.$refs.mobileLoginForm.validate(t=>{t&&(this.loading=!0,Object(n["Oc"])(this.form).then(t=>{t.success?this.afterLogin(t):this.loading=!1}))})},toGithubLogin(){this.socialLogining=!0,Object(n["gc"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},toQQLogin(){this.socialLogining=!0,Object(n["qc"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},toWeiboLogin(){this.socialLogining=!0,Object(n["Zc"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},toWeixinLogin(){this.socialLogining=!0,Object(n["Yc"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},toDingdingLogin(){this.socialLogining=!0,Object(n["R"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},toWorkwechatLogin(){this.socialLogining=!0,Object(n["ad"])().then(t=>{t.success?window.location.href=t.result:this.socialLogining=!1})},relatedLogin(){let t=this.$route.query,e=t.error;""!==e&&void 0!==e&&this.$Message.error(e);let s=t.related,o=t.JWTKey;s&&"1"==s&&o?Object(n["Fb"])({JWTKey:o}).then(t=>{if(t.success){this.socialLogining=!0;let e=t.result;this.setStore("accessToken",e),Object(n["Pb"])().then(t=>{if(t.result){let s=t.result.ssoDomain;c.a.set("accessToken",e,{domain:s,expires:7})}}),Object(n["Uc"])().then(t=>{if(t.success){delete t.result.permissions;let e=[];t.result.roles.forEach(t=>{e.push(t.name)}),delete t.result.roles,this.setStore("roles",e),c.a.set("userInfo",JSON.stringify(t.result),{expires:7}),this.setStore("userInfo",t.result),this.$store.commit("setUserInfo",t.result),m["a"].initRouter(this),this.$router.push({name:"home_index"})}else this.socialLogining=!1,this.$Message.error("获取登录用户信息失败")})}else this.socialLogining=!1,this.$Message.error("使用第三方账号登录失败")}):this.socialLogining=!1},handleDropDown(t){"test"==t?this.test():"resetByMobile"==t?this.$router.push({name:"reset"}):"resetByEmail"==t&&this.$router.push({name:"reset",query:{type:"1"}})},showNotice(){Object(n["Mb"])().then(t=>{if(t.success){if(!t.result)return;let e=t.result;e.open&&(e.title||e.content)&&"LOGIN"==e.position&&this.$Notice.info({title:e.title,desc:e.content,duration:e.duration})}})},test(){this.$Notice.info({title:"测试体验账号",desc:"账号：test或test2<br>密码：123456"})}},mounted(){this.showNotice(),this.relatedLogin(),this.getCaptchaImg()}},p=f,b=(s("1f3b"),s("2877")),w=Object(b["a"])(p,o,i,!1,null,null,null);e["default"]=w.exports},f03a:function(t,e,s){}}]);