(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b724fa14"],{4158:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",{staticStyle:{"margin-bottom":"10px"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"edit-head"},[e("a",{staticClass:"back-title",on:{click:t.close}},[e("Icon",{attrs:{type:"ios-arrow-back"}}),t._v("返回 ")],1),e("div",{staticClass:"head-name"},[t._v("流程审批进度历史")]),e("span"),e("a",{staticClass:"window-close",on:{click:t.close}},[e("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)])]),e("div",{staticStyle:{position:"relative"}},[e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data}}),e("div",{staticClass:"img-title"},[t._v("实时流程图")]),e("div",{staticStyle:{position:"relative"}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"imgUrl"}]}),t.loadingImg?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),t.loading?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)])],1)},c=[],r=n("81c1"),s=n("c276"),o={name:"historic_detail",props:{procInstId:String},data(){return{loading:!1,loadingImg:!1,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"任务名称",key:"name",minWidth:120,sortable:!0},{title:"处理人",key:"assignees",align:"center",sortable:!0,minWidth:150,render:(t,e)=>{if(e.row.assignees)return t("div",e.row.assignees.map((function(e,n){return e.isExecutor?t("Tooltip",{props:{placement:"top",content:e.username}},[t("Tag",{style:{"margin-right":"8px"},props:{type:"border",color:"primary"}},e.nickname)]):t("Tooltip",{props:{placement:"top",content:e.username}},[t("Tag",{style:{"margin-right":"8px"},props:{type:"border"}},e.nickname)])})))}},{title:"审批操作",key:"deleteReason",align:"center",minWidth:150,sortable:!0},{title:"审批意见",key:"comment",align:"center",minWidth:120,sortable:!0},{title:"耗时",key:"duration",align:"center",width:100,sortable:!0,render:(t,e)=>t("div",s["a"].millsToTime(e.row.duration))},{title:"创建时间",key:"createTime",width:170,sortType:"asc",sortable:!0},{title:"完成时间",key:"endTime",width:170,sortable:!0},{title:"状态",align:"center",width:120,render:(t,e)=>{let n="",i="";return e.row.endTime?(i="blue",n="已办理"):(i="default",n="待处理"),t("div",[t("Tag",{props:{color:i}},n)])}}],data:[],id:"",imgUrl:"",backRoute:""}},methods:{init(){this.$route.query.id?(this.id=this.$route.query.id,this.backRoute=this.$route.query.backRoute):this.id=this.procInstId,this.imgUrl=r["D"]+this.id+"?accessToken="+this.getStore("accessToken")+"&time="+new Date,this.getDataList()},getDataList(){this.loading=!0,Object(r["M"])(this.id).then(t=>{this.loading=!1,t.success&&(this.data=t.result,t.result&&0!=t.result.length||this.$Modal.info({title:"未找到该记录审批历史数据",content:"历史数据可能已被删除"}))})},close(){this.$route.query.id?(this.$store.commit("removeTag","historic_detail"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList),this.$router.push({name:this.backRoute})):this.$emit("close",!0)}},mounted(){this.init()},watch:{$route(t,e){"historic_detail"==t.name&&this.init()}}},a=o,d=(n("6a25"),n("2877")),u=Object(d["a"])(a,i,c,!1,null,null,null);e["default"]=u.exports},"6a25":function(t,e,n){"use strict";n("8be0")},"81c1":function(t,e,n){"use strict";n.d(e,"x",(function(){return c})),n.d(e,"r",(function(){return r})),n.d(e,"y",(function(){return s})),n.d(e,"D",(function(){return o})),n.d(e,"F",(function(){return a})),n.d(e,"c",(function(){return d})),n.d(e,"s",(function(){return u})),n.d(e,"o",(function(){return l})),n.d(e,"J",(function(){return b})),n.d(e,"U",(function(){return g})),n.d(e,"X",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"K",(function(){return h})),n.d(e,"v",(function(){return O})),n.d(e,"w",(function(){return y})),n.d(e,"p",(function(){return m})),n.d(e,"L",(function(){return j})),n.d(e,"B",(function(){return k})),n.d(e,"I",(function(){return T})),n.d(e,"C",(function(){return v})),n.d(e,"G",(function(){return P})),n.d(e,"H",(function(){return w})),n.d(e,"V",(function(){return I})),n.d(e,"q",(function(){return B})),n.d(e,"j",(function(){return C})),n.d(e,"T",(function(){return x})),n.d(e,"t",(function(){return S})),n.d(e,"M",(function(){return $})),n.d(e,"k",(function(){return M})),n.d(e,"P",(function(){return _})),n.d(e,"Q",(function(){return N})),n.d(e,"z",(function(){return L})),n.d(e,"e",(function(){return R})),n.d(e,"f",(function(){return U})),n.d(e,"g",(function(){return z})),n.d(e,"n",(function(){return q})),n.d(e,"N",(function(){return D})),n.d(e,"O",(function(){return F})),n.d(e,"a",(function(){return W})),n.d(e,"u",(function(){return H})),n.d(e,"l",(function(){return J})),n.d(e,"R",(function(){return A})),n.d(e,"A",(function(){return E})),n.d(e,"d",(function(){return K})),n.d(e,"S",(function(){return G})),n.d(e,"h",(function(){return Q})),n.d(e,"m",(function(){return V})),n.d(e,"E",(function(){return X})),n.d(e,"b",(function(){return Y})),n.d(e,"W",(function(){return Z}));var i=n("7f80");const c="/xboot/actModel/export/",r="/xboot/actModel/deployByFile",s="/xboot/actProcess/export",o="/xboot/actProcess/getHighlightImg/",a=t=>Object(i["b"])("/actModel/getByCondition",t),d=t=>Object(i["e"])("/actModel/add",t),u=(t,e)=>Object(i["b"])("/actModel/deploy/"+t,e),l=t=>Object(i["e"])("/actModel/delByIds",t),b=t=>Object(i["b"])("/actProcess/getByCondition",t),g=t=>Object(i["e"])("/actProcess/updateInfo",t),f=t=>Object(i["e"])("/actProcess/updateStatus",t),p=(t,e)=>Object(i["b"])("/actProcess/convertToModel/"+t,e),h=(t,e)=>Object(i["b"])("/actProcess/getProcessNode/"+t,e),O=t=>Object(i["e"])("/actProcess/editNodeUser",t),y=t=>Object(i["e"])("/actProcess/editStartUser",t),m=t=>Object(i["e"])("/actProcess/delByIds",t),j=t=>Object(i["b"])("/actProcess/getRunningProcess",t),k=t=>Object(i["b"])("/actProcess/getFinishedProcess",t),T=(t,e)=>Object(i["b"])("/actProcess/getByKey/"+t,e),v=(t,e)=>Object(i["b"])("/actProcess/getFirstNode/"+t,e),P=(t,e,n)=>Object(i["b"])(`/actProcess/getNextNode/${t}/${e}`,n),w=(t,e)=>Object(i["b"])("/actProcess/getNode/"+t,e),I=t=>Object(i["e"])("/actProcess/updateInsStatus",t),B=t=>Object(i["e"])("/actProcess/delInsByIds",t),C=t=>Object(i["e"])("/actProcess/delHistoricInsByIds",t),x=t=>Object(i["b"])("/actTask/todoList",t),S=t=>Object(i["b"])("/actTask/doneList",t),$=(t,e)=>Object(i["b"])("/actTask/historicFlow/"+t,e),M=t=>Object(i["e"])("/actTask/delegate",t),_=t=>Object(i["e"])("/actTask/pass",t),N=t=>Object(i["e"])("/actTask/passAll",t),L=(t,e)=>Object(i["b"])("/actTask/getBackList/"+t,e),R=t=>Object(i["e"])("/actTask/back",t),U=t=>Object(i["e"])("/actTask/backAll",t),z=t=>Object(i["e"])("/actTask/backToTask",t),q=t=>Object(i["e"])("/actTask/deleteHistoric",t),D=t=>Object(i["b"])("/actCategory/getByParentId/0",t),F=(t,e)=>Object(i["b"])("/actCategory/getByParentId/"+t,e),W=t=>Object(i["e"])("/actCategory/add",t),H=t=>Object(i["e"])("/actCategory/edit",t),J=t=>Object(i["e"])("/actCategory/delByIds",t),A=t=>Object(i["b"])("/actCategory/search",t),E=t=>Object(i["b"])("/actBusiness/getByCondition",t),K=t=>Object(i["e"])("/actBusiness/apply",t),G=t=>Object(i["e"])("/actBusiness/start",t),Q=t=>Object(i["e"])("/actBusiness/cancel",t),V=t=>Object(i["e"])("/actBusiness/delByIds",t),X=(t,e)=>Object(i["b"])("/leave/get/"+t,e),Y=t=>Object(i["e"])("/leave/add",t),Z=t=>Object(i["f"])("/leave/update",t)},"8be0":function(t,e,n){}}]);