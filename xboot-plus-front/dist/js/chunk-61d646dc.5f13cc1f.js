(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61d646dc"],{"2adc":function(t,e,s){"use strict";s("7dac")},5445:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",[e("Row",{directives:[{name:"show",rawName:"v-show",value:t.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}}},[e("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm,inline:"","label-width":70}},[e("FormItem",{attrs:{label:"项目名称",prop:"xmmc"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入项目名称",clearable:""},model:{value:t.searchForm.xmmc,callback:function(e){t.$set(t.searchForm,"xmmc",e)},expression:"searchForm.xmmc"}})],1),e("FormItem",{attrs:{label:"立项时间",prop:"lxsj"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{options:t.options,type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),t.drop?e("span",[e("FormItem",{attrs:{label:"项目负责人",prop:"xmfzr"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入项目负责人",clearable:""},model:{value:t.searchForm.xmfzr,callback:function(e){t.$set(t.searchForm,"xmfzr",e)},expression:"searchForm.xmfzr"}})],1),e("FormItem",{attrs:{label:"开工时间",prop:"kgsj"}},[e("DatePicker",{staticStyle:{width:"200px"},attrs:{options:t.options,type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),e("FormItem",{attrs:{label:"标段名称",prop:"bdmc"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入标段名称",clearable:""},model:{value:t.searchForm.bdmc,callback:function(e){t.$set(t.searchForm,"bdmc",e)},expression:"searchForm.bdmc"}})],1)],1):t._e(),e("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[e("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")]),e("Button",{on:{click:t.handleReset}},[t._v("重置")]),e("a",{staticClass:"drop-down",on:{click:t.dropDown}},[t._v(" "+t._s(t.dropDownContent)+" "),e("Icon",{attrs:{type:t.dropDownIcon}})],1)],1)],1)],1),e("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[e("div",[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加")]),e("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")])],1),e("div",{staticClass:"icons"},[e("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[e("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:t.getDataList}})],1),e("Tooltip",{attrs:{content:t.openSearch?"关闭搜索":"开启搜索",placement:"top",transfer:""}},[e("Icon",{staticClass:"item tip",attrs:{type:"ios-search",size:"18"},on:{click:function(e){t.openSearch=!t.openSearch}}})],1),e("Tooltip",{attrs:{content:t.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[e("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(e){t.openTip=!t.openTip}}})],1),e("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[e("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.changeTableSize}},[e("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{selected:"default"==t.tableSize,name:"default"}},[t._v("默认")]),e("DropdownItem",{attrs:{selected:"large"==t.tableSize,name:"large"}},[t._v("宽松")]),e("DropdownItem",{attrs:{selected:"small"==t.tableSize,name:"small"}},[t._v("紧密")])],1)],1)],1),e("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[e("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:t.exportData}})],1)],1)]),e("Alert",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[t._v(" 已选择 "),e("span",{staticClass:"select-count"},[t._v(t._s(t.selectList.length))]),t._v(" 项 "),e("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])]),e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,size:t.tableSize,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}}),e("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[e("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),e("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:920},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[e("Form",{ref:"form",attrs:{model:t.form,rules:t.formValidate,"label-position":"top"}},[e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"项目名称",prop:"xmmc"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.xmmc,callback:function(e){t.$set(t.form,"xmmc",e)},expression:"form.xmmc"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"立项时间",prop:"lxsj"}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:""},model:{value:t.form.lxsj,callback:function(e){t.$set(t.form,"lxsj",e)},expression:"form.lxsj"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"项目负责人",prop:"xmfzr"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.xmfzr,callback:function(e){t.$set(t.form,"xmfzr",e)},expression:"form.xmfzr"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"开工时间",prop:"kgsj"}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:""},model:{value:t.form.kgsj,callback:function(e){t.$set(t.form,"kgsj",e)},expression:"form.kgsj"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"计划完工时间",prop:"jhwgsj"}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:""},model:{value:t.form.jhwgsj,callback:function(e){t.$set(t.form,"jhwgsj",e)},expression:"form.jhwgsj"}})],1)],1),e("Col",{attrs:{span:"24"}},[e("FormItem",{attrs:{label:"项目建设内容",prop:"xmjsnr"}},[e("Input",{attrs:{type:"textarea",rows:4,maxlength:"250","show-word-limit":""},model:{value:t.form.xmjsnr,callback:function(e){t.$set(t.form,"xmjsnr",e)},expression:"form.xmjsnr"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"标段名称",prop:"bdmc"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.bdmc,callback:function(e){t.$set(t.form,"bdmc",e)},expression:"form.bdmc"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"中标人",prop:"zbr"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.zbr,callback:function(e){t.$set(t.form,"zbr",e)},expression:"form.zbr"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"标段负责人",prop:"bdfzr"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.bdfzr,callback:function(e){t.$set(t.form,"bdfzr",e)},expression:"form.bdfzr"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"24"}},[e("FormItem",{attrs:{label:"标段建设内容",prop:"bdjsnr"}},[e("Input",{attrs:{type:"textarea",rows:4,maxlength:"250","show-word-limit":""},model:{value:t.form.bdjsnr,callback:function(e){t.$set(t.form,"bdjsnr",e)},expression:"form.bdjsnr"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{attrs:{label:"标段开工时间",prop:"bdkgsj"}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:""},model:{value:t.form.bdkgsj,callback:function(e){t.$set(t.form,"bdkgsj",e)},expression:"form.bdkgsj"}})],1)],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)},r=[],o=s("365c"),i=s("6c6d"),l={name:"projectList",components:{},data(){return{tableSize:"default",openSearch:!0,openTip:!0,loading:!0,modalType:0,modalVisible:!1,modalTitle:"",drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:""},selectDate:null,options:{shortcuts:i["a"]},form:{xmmc:"",lxsj:"",xmfzr:"",kgsj:"",jhwgsj:"",xmjsnr:"",bdmc:"",zbr:"",bdfzr:"",bdjsnr:"",bdkgsj:""},formValidate:{},submitLoading:!1,selectList:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"项目名称",key:"xmmc",minWidth:120,sortable:!1},{title:"立项时间",key:"lxsj",minWidth:120,sortable:!0},{title:"项目负责人",key:"xmfzr",minWidth:120,sortable:!1},{title:"开工时间",key:"kgsj",minWidth:120,sortable:!0},{title:"计划完工时间",key:"jhwgsj",minWidth:120,sortable:!1},{title:"项目建设内容",key:"xmjsnr",minWidth:120,sortable:!1},{title:"标段名称",key:"bdmc",minWidth:120,sortable:!1},{title:"中标人",key:"zbr",minWidth:120,sortable:!1},{title:"标段负责人",key:"bdfzr",minWidth:120,sortable:!1},{title:"标段建设内容",key:"bdjsnr",minWidth:120,sortable:!1},{title:"标段开工时间",key:"bdkgsj",minWidth:120,sortable:!1},{title:"操作",key:"action",align:"center",width:150,render:(t,e)=>t("div",[t("a",{on:{click:()=>{this.edit(e.row)}}},"编辑"),t("Divider",{props:{type:"vertical"}}),t("a",{on:{click:()=>{this.remove(e.row)}}},"删除")])}],data:[],total:0}},methods:{init(){this.getDataList()},changePage(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize(t){this.searchForm.pageSize=t,this.getDataList()},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.getDataList()},changeSort(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"===t.order&&(this.searchForm.order=""),this.getDataList()},clearSelectAll(){this.$refs.table.selectAll(!1)},changeSelect(t){this.selectList=t},changeTableSize(t){this.tableSize=t},exportData(){this.$refs.table.exportCsv({filename:"数据"})},selectDateRange(t){t&&(this.searchForm.startDate=t[0],this.searchForm.endDate=t[1])},dropDown(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},getDataList(){this.loading=!0,Object(o["getProjectListList"])(this.searchForm).then(t=>{this.loading=!1,t.success&&(this.data=t.result.content,this.total=t.result.totalElements,0==this.data.length&&this.searchForm.pageNumber>1&&(this.searchForm.pageNumber-=1,this.getDataList()))})},handleSubmit(){this.$refs.form.validate(t=>{t&&("object"==typeof this.form.lxsj&&(this.form.lxsj=this.format(this.form.lxsj,"yyyy-MM-dd")),"object"==typeof this.form.kgsj&&(this.form.kgsj=this.format(this.form.kgsj,"yyyy-MM-dd")),"object"==typeof this.form.jhwgsj&&(this.form.jhwgsj=this.format(this.form.jhwgsj,"yyyy-MM-dd")),"object"==typeof this.form.bdkgsj&&(this.form.bdkgsj=this.format(this.form.bdkgsj,"yyyy-MM-dd")),this.submitLoading=!0,0===this.modalType?(delete this.form.id,Object(o["addProjectList"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)})):Object(o["editProjectList"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)}))})},add(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),delete this.form.id,this.modalVisible=!0},edit(t){this.modalType=1,this.modalTitle="编辑",this.$refs.form.resetFields();for(let a in t)null===t[a]&&(t[a]="");let e=JSON.stringify(t),s=JSON.parse(e);this.form=s,this.modalVisible=!0},remove(t){this.$Modal.confirm({title:"确认删除",content:"您确认要删除该条数据?",loading:!0,onOk:()=>{Object(o["deleteProjectList"])({ids:t.id}).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let t="";this.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),Object(o["deleteProjectList"])({ids:t}).then(t=>{this.$Modal.remove(),t.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})}},mounted(){this.init()}},n=l,c=(s("2adc"),s("2877")),m=Object(c["a"])(n,a,r,!1,null,null,null);e["default"]=m.exports},"6c6d":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));const a=[{text:"今日",value(){var t=new Date,e=new Date;return t.setTime(e.getTime()),[e,t]}},{text:"昨日",value(){var t=new Date,e=new Date;return e.setTime(e.getTime()-864e5),t.setTime(t.getTime()-864e5),[e,t]}},{text:"本周",value(){var t=new Date,e=t.getDay(),s=t.getDate(),a=t.getMonth(),r=e||7,o=new Date(t.getFullYear(),a,s+1-r),i=new Date(t.getFullYear(),a,s+7-r);return o.setTime(o.getTime()),i.setTime(i.getTime()),[o,i]}},{text:"本月",value(){var t=new Date,e=t.getYear();e+=e<2e3?1900:0;var s=t.getMonth(),a=new Date(e,s,1),r=new Date(e,s+1,1),o=(r-a)/864e5,i=new Date(e,s,1),l=new Date(e,s,o);return i.setTime(i.getTime()),l.setTime(l.getTime()),[i,l]}}]},"7dac":function(t,e,s){}}]);