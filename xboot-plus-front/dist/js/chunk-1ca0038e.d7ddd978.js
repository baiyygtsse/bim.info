(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ca0038e","chunk-660b82a7","chunk-2d0ceda3"],{"10fd":function(t,i,e){"use strict";e.d(i,"c",(function(){return s})),e.d(i,"b",(function(){return o})),e.d(i,"a",(function(){return a}));const s=(t,i,e)=>{var s=/^[a-zA-Z0-9_]{1,16}$/;i.length>16?e(new Error("长度不能超过16个字符")):s.test(i)?e():e(new Error("仅支持大小写英文、数字和下划线_"))},o=(t,i,e)=>{i.length<6?e(new Error("密码长度不得小于6位")):e()},a=(t,i,e)=>{var s=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;s.test(i)?e():e(new Error("手机号格式错误"))}},"30fa":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",[i("Modal",{attrs:{title:"身份验证",fullscreen:"","footer-hide":""},model:{value:t.passCheckVisible,callback:function(i){t.passCheckVisible=i},expression:"passCheckVisible"}},[i("div",{staticClass:"pass-check",on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.checkPass.apply(null,arguments)}}},[i("Icon",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"md-lock",size:"30"}}),i("div",{staticClass:"title",staticStyle:{"margin-bottom":"40px"}},[t._v("密码认证")]),i("div",{staticClass:"desc"},[t._v("请输入您的密码")]),i("Input",{staticStyle:{width:"300px","margin-bottom":"40px"},attrs:{autofocus:"",password:"",size:"large",placeholder:"请输入您的密码",type:"password"},model:{value:t.password,callback:function(i){t.password=i},expression:"password"}}),i("div",{staticStyle:{"margin-bottom":"60px"}},[i("Button",{staticStyle:{"margin-right":"20px"},attrs:{size:"large"},on:{click:function(i){t.passCheckVisible=!1}}},[t._v("取消")]),i("Button",{attrs:{loading:t.loading,disabled:!t.password,type:"primary",size:"large"},on:{click:t.checkPass}},[t._v("提交")])],1)],1)])],1)},o=[],a=e("365c"),l={name:"checkPassword",data(){return{loading:!1,passCheckVisible:!1,password:""}},methods:{checkPass(){this.loading=!0,Object(a["Sc"])({password:this.password}).then(t=>{this.loading=!1,t.success&&(this.passCheckVisible=!1,this.$emit("on-success",!0))})},show(){this.password="",this.passCheckVisible=!0}}},n=l,c=(e("74b2"),e("2877")),d=Object(c["a"])(n,s,o,!1,null,null,null);i["default"]=d.exports},"585f":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",[i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("账户密码")]),t.form.passStrength?i("div",{staticClass:"desc"},[t._v(" 当前密码强度： "),"弱"==t.form.passStrength?i("span",{staticClass:"red"},[t._v(t._s(t.form.passStrength))]):t._e(),"中"==t.form.passStrength?i("span",{staticClass:"middle"},[t._v(t._s(t.form.passStrength))]):t._e(),"强"==t.form.passStrength?i("span",{staticClass:"green"},[t._v(t._s(t.form.passStrength))]):t._e()]):t._e()]),i("div",[i("a",{on:{click:function(i){t.showChangePass=!0}}},[t._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("绑定手机")]),i("div",{staticClass:"desc"},[t.form.mobile?i("span",[t._v("已绑定手机："+t._s(t.form.mobile))]):i("span",[t._v("未绑定手机号")])])]),i("div",[i("a",{on:{click:t.showChangeMobile}},[t._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("绑定邮箱")]),i("div",{staticClass:"desc"},[t.form.email?i("span",[t._v("已绑定邮箱："+t._s(t.form.email))]):i("span",[t._v("未绑定邮箱")])])]),i("div",[i("a",{on:{click:t.showChangeEmail}},[t._v("修改")])])]),t._m(0),i("Modal",{attrs:{title:"修改手机号",closable:!1,"mask-closable":!1,width:500},model:{value:t.editMobileVisible,callback:function(i){t.editMobileVisible=i},expression:"editMobileVisible"}},[i("Form",{ref:"mobileEditForm",attrs:{model:t.mobileEditForm,"label-width":70,rules:t.mobileEditValidate}},[i("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[i("Input",{attrs:{placeholder:"请输入新手机号"},on:{"on-change":t.hasChangePhone},model:{value:t.mobileEditForm.mobile,callback:function(i){t.$set(t.mobileEditForm,"mobile",i)},expression:"mobileEditForm.mobile"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:t.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入您收到的短信验证码"},model:{value:t.mobileEditForm.code,callback:function(i){t.$set(t.mobileEditForm,"code",i)},expression:"mobileEditForm.code"}}),i("CountDownButton",{ref:"countDownMobile",attrs:{disabled:t.canSendMobileCode,autoCountDown:!1,loading:t.sending,text:t.getSms},on:{"on-click":t.sendEditMobileCode}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelInputCodeBox}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.checkCodeLoading},on:{click:t.submitEditMobile}},[t._v("提交")])],1)],1),i("Modal",{attrs:{title:"修改邮箱",closable:!1,"mask-closable":!1,width:500},model:{value:t.editEmailVisible,callback:function(i){t.editEmailVisible=i},expression:"editEmailVisible"}},[i("Form",{ref:"emailEditForm",attrs:{model:t.emailEditForm,"label-width":100,rules:t.emailEditValidate}},[i("FormItem",{attrs:{label:"新邮箱地址",prop:"email"}},[i("Input",{attrs:{placeholder:"请输入新邮箱地址"},on:{"on-change":t.hasChangeEmail},model:{value:t.emailEditForm.email,callback:function(i){t.$set(t.emailEditForm,"email",i)},expression:"emailEditForm.email"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:t.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入您收到的邮件中的验证码"},model:{value:t.emailEditForm.code,callback:function(i){t.$set(t.emailEditForm,"code",i)},expression:"emailEditForm.code"}}),i("CountDownButton",{ref:"countDownEmail",attrs:{disabled:t.canSendEditEmail,autoCountDown:!1,loading:t.sending,text:t.getSms},on:{"on-click":t.sendVerifyEmail}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelEditEmail}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.editEmailLoading},on:{click:t.submitEditEmail}},[t._v("提交")])],1)],1),i("changePass",{model:{value:t.showChangePass,callback:function(i){t.showChangePass=i},expression:"showChangePass"}}),i("check-password",{ref:"checkPassMobile",on:{"on-success":t.checkSuccessMobile}}),i("check-password",{ref:"checkPassEmail",on:{"on-success":t.checkSuccessEmail}})],1)},o=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("密保问题")]),i("div",{staticClass:"desc"},[t._v("未设置密保问题，密保问题可有效保护账户安全")])]),i("div",[i("a",[t._v("暂不支持设置")])])])}],a=e("365c"),l=e("10fd"),n=e("60e8"),c=e("30fa"),d=e("fdd1"),r={components:{changePass:d["default"],checkPassword:c["default"],CountDownButton:n["default"]},name:"security",data(){return{showChangePass:!1,form:{},mobileEditForm:{mobile:"",code:""},emailEditForm:{email:"",code:""},codeError:"",initPhone:"",initEmail:"",saveLoading:!1,sending:!1,getSms:"获取验证码",canSendMobileCode:!0,checkCodeLoading:!1,checkPassLoading:!1,editEmailLoading:!1,mobileEditValidate:{mobile:[{required:!0,message:"请输入手机号码"},{validator:l["a"]}]},emailEditValidate:{email:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"邮箱格式不正确"}]},editMobileVisible:!1,editEmailVisible:!1,canSendEditEmail:!0}},methods:{init(){let t=this.getUserInfo();this.form=t,this.initPhone=t.mobile,this.mobileEditForm.mobile=t.mobile,this.initEmail=t.email,this.emailEditForm.email=t.email},showChangeMobile(){this.$refs.checkPassMobile.show()},checkSuccessMobile(){this.editMobileVisible=!0},showChangeEmail(){this.$refs.checkPassEmail.show()},checkSuccessEmail(){this.editEmailVisible=!0},cancelInputCodeBox(){this.editMobileVisible=!1,this.form.mobile=this.initPhone},cancelEditEmail(){this.editEmailVisible=!1,this.emailEditForm.email=this.initEmail},sendEditMobileCode(){this.$refs["mobileEditForm"].validate(t=>{t&&(this.getSms="发送中",this.sending=!0,Object(a["Ic"])(this.mobileEditForm.mobile).then(t=>{this.getSms="获取验证码",this.sending=!1,t.success&&(this.$Message.success("发送短信验证码成功"),this.$refs.countDownMobile.startCountDown())}))})},submitEditMobile(){this.$refs["mobileEditForm"].validate(t=>{if(t){if(!this.mobileEditForm.code)return void(this.codeError="请填写短信验证码");this.codeError="",this.checkCodeLoading=!0,Object(a["o"])(this.mobileEditForm).then(t=>{this.checkCodeLoading=!1,t.success&&(this.$Message.success("修改成功"),this.form.mobile=this.mobileEditForm.mobile,this.initPhone=this.mobileEditForm.mobile,this.editMobileVisible=!1,this.$emit("on-success",!0))})}})},hasChangePhone(){this.mobileEditForm.mobile==this.initPhone?this.canSendMobileCode=!0:this.$refs["mobileEditForm"].validate(t=>{this.canSendMobileCode=!t})},hasChangeEmail(){this.emailEditForm.email==this.initEmail?this.canSendEditEmail=!0:this.canSendEditEmail=!1},sendVerifyEmail(){this.$refs["emailEditForm"].validate(t=>{t&&(this.getSms="发送中",this.sending=!0,Object(a["Hc"])(this.emailEditForm.email).then(t=>{this.getSms="获取验证码",this.sending=!1,t.success&&(this.$Message.success("发送邮件验证码成功，请注意查收"),this.$refs.countDownEmail.startCountDown())}))})},submitEditEmail(){this.$refs["emailEditForm"].validate(t=>{if(t){if(!this.emailEditForm.code)return void(this.codeError="验证码不能为空");this.codeError="",this.editEmailLoading=!0,Object(a["Y"])(this.emailEditForm).then(t=>{this.editEmailLoading=!1,t.success&&(this.initEmail=this.emailEditForm.email,this.form.email=this.emailEditForm.email,this.$Message.success("修改邮件成功"),this.editEmailVisible=!1,this.$emit("on-success",!0))})}})}},mounted(){this.init()}},m=r,h=e("2877"),u=Object(h["a"])(m,s,o,!1,null,null,null);i["default"]=u.exports},"60e8":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",[i("Button",{attrs:{countTime:t.countTime,loading:t.loading,type:t.type,size:t.size,ghost:t.ghost,disabled:t.disabled||t.clicked,icon:t.icon,shape:t.shape,long:t.long},on:{click:t.handleClick}},[t._v(t._s(t.buttonText))])],1)},o=[],a={name:"iconChoose",props:{text:{type:String,default:"提交"},autoCountDown:{type:Boolean,default:!0},countTime:{type:[Number,String],default:60},suffixText:{type:String,default:"秒后重试"},type:String,size:String,loading:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:String,shape:String,long:{type:Boolean,default:!1}},data(){return{buttonText:this.text,count:Number(this.countTime),clicked:!1}},methods:{init(){},handleClick(){this.autoCountDown&&(this.clicked=!0,this.countDown()),this.$emit("on-click",!0)},startCountDown(){this.clicked=!0,this.countDown()},countDown(){if(0==this.count)return this.clicked=!1,this.count=this.countTime,void(this.buttonText=this.text);this.buttonText=this.count+" "+this.suffixText,this.count--,setTimeout(()=>{this.countDown()},1e3)},setText(t){t!==this.buttonText&&(this.buttonText=t)}},watch:{text(t){this.setText(t)}},mounted(){this.init()}},l=a,n=e("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);i["default"]=c.exports},"6db7":function(t,i,e){},"74b2":function(t,i,e){"use strict";e("6db7")}}]);