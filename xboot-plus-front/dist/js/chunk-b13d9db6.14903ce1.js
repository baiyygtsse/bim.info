(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b13d9db6"],{"0573":function(t,e,i){},acd8:function(t,e,i){"use strict";i("0573")},d014:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-thumb"},[e("vuedraggable",{staticClass:"list-group",attrs:{list:t.uploadList,disabled:!t.draggable||!t.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:t.onEnd}},t._l(t.uploadList,(function(i,s){return e("div",{key:s,staticClass:"upload-list",style:{width:`calc(${t.width} + 2px)`,height:`calc(${t.height} + 2px)`,lineHeight:t.height,marginBottom:t.marginBottom}},["finished"==i.status?e("div",[e("img",{style:{height:t.height},attrs:{src:i.url}}),e("div",{staticClass:"upload-list-cover"},[e("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(i.url,s)}}}),e("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove(i)}}})],1)]):e("div",[i.showProgress?e("Progress",{attrs:{percent:i.percentage,"hide-info":""}}):t._e()],1)])})),0),t.material?t._e():e("Upload",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:t.width,marginBottom:t.marginBottom},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[e("div",{style:{width:t.width,height:t.height,lineHeight:t.height}},[e("Icon",{attrs:{type:"md-camera",size:"20"}})],1)]),t.material?e("div",{staticClass:"ivu-upload-drag",style:{width:t.width,height:t.height,lineHeight:t.height},on:{click:function(e){t.showMaterialCenter=!0}}},[e("Icon",{attrs:{type:"md-camera",size:"20"}})],1):t._e(),t.material?e("materialCenter",{attrs:{acceptImg:t.accept,maxSize:t.maxSize,multiple:t.multiple},on:{"on-change":t.selectFile},model:{value:t.showMaterialCenter,callback:function(e){t.showMaterialCenter=e},expression:"showMaterialCenter"}}):t._e()],1)},a=[],l=(i("0808"),i("6a37")),n=i.n(l),r=i("365c"),h=i("289a"),o=i.n(h),u=i("1f5f"),d={name:"uploadPicThumb",components:{vuedraggable:o.a,materialCenter:u["default"]},props:{value:{type:null},material:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:5},limit:{type:Number,default:5},width:{type:String,default:"60px"},height:{type:String,default:"60px"},marginBottom:{type:String,default:"0"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format(){if(this.accept){let t=[];return this.accept.split(",").forEach(e=>{t.push(e.replace(".","").replace(" ",""))}),t}return[]}},data(){return{accessToken:{},uploadFileUrl:r["Tc"],uploadList:[],showMaterialCenter:!1}},methods:{onEnd(){this.returnValue()},init(){this.setData(this.value),this.accessToken={accessToken:this.getStore("accessToken")}},handleView(t,e){let i=new Image;i.src=t;let s=new n.a(i,{hidden:function(){s.destroy()}});s.show()},handleRemove(t){const e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError(t,e,i){this.$Message.error(t.toString())},handleFormatError(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){let t=[];this.uploadList.forEach(e=>{t.push(e.url)}),this.$emit("input",t),this.$emit("on-change",t)}else{let t=this.uploadList[0].url;this.$emit("input",t),this.$emit("on-change",t)}},setData(t){if("string"==typeof t){if(this.multiple)return void this.$Message.warning("多张上传仅支持传入数组数据类型");if(!t)return;this.uploadList=[];let e={url:t,status:"finished"};this.uploadList.push(e),this.$emit("on-change",t)}else if("object"==typeof t){if(!this.multiple)return void this.$Message.warning("单张上传仅支持传入字符串数据类型");if(this.uploadList=[],t.length>this.limit){for(let e=0;e<this.limit;e++)this.uploadList.push({url:t[e],status:"finished"});this.$emit("on-change",t.slice(0,this.limit)),this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach(t=>{let e={url:t,status:"finished"};this.uploadList.push(e)}),this.$emit("on-change",t)}},selectFile(t){this.multiple?t.forEach(t=>{this.uploadList.push({url:t,status:"finished"})}):this.uploadList[0]={url:t,status:"finished"},this.returnValue()}},watch:{value(t){this.setData(t)}},mounted(){this.init()}},c=d,p=(i("acd8"),i("2877")),m=Object(p["a"])(c,s,a,!1,null,null,null);e["default"]=m.exports}}]);