(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22b94f02","chunk-b13d9db6","chunk-2d0d7882"],{"0573":function(t,e,a){},"76e2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("Select",{attrs:{size:t.size,loading:t.loading,placeholder:t.placeholder,multiple:t.multiple,disabled:t.disabled,filterable:t.filterable,transfer:t.transfer,clearable:t.clearable,placement:t.placement,"transfer-class-name":t.transferClassName,prefix:t.prefix,"max-tag-count":t.maxTagCount,"max-tag-placeholder":t.maxTagPlaceholder},on:{"on-change":t.handleChange,"on-query-change":t.handleQueryChange,"on-clear":t.handleClear,"on-open-change":t.handleOpenChange,"on-select":t.handleSelect},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},t._l(t.dictData,(function(a,i){return e("Option",{key:i,attrs:{value:a.value}},[t._v(t._s(a.title))])})),1)],1)},s=[],r=a("365c"),l={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData(t){this.loading=!0,Object(r["Ab"])(t).then(t=>{this.loading=!1,t.success&&(this.dictData=t.result)})},handleChange(t){this.$emit("input",t),this.$emit("on-change",t)},handleQueryChange(t){this.$emit("on-query-change",t)},handleClear(){this.$emit("on-clear","")},handleOpenChange(t){this.$emit("on-open-change",t)},handleSelect(t){this.$emit("on-select",t)},setCurrentValue(t){t!==this.currentValue&&(this.currentValue=t,this.$emit("on-change",this.currentValue))}},watch:{value(t){this.setCurrentValue(t)},dict(t){this.getData(t)}},mounted(){this.getData(this.dict)}},n=l,o=a("2877"),h=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=h.exports},9240:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("Form",{ref:"form",attrs:{model:t.form,"label-width":90,"label-position":"left"}},[e("FormItem",{attrs:{label:"登录账号：",prop:"username"}},[t._v(t._s(t.form.username))]),e("FormItem",{attrs:{label:"用户头像："}},[e("upload-pic-thumb",{attrs:{multiple:!1},model:{value:t.form.avatar,callback:function(e){t.$set(t.form,"avatar",e)},expression:"form.avatar"}})],1),e("FormItem",{attrs:{label:"用户名：",prop:"nickname",error:t.error}},[e("Input",{staticStyle:{width:"300px"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),e("FormItem",{attrs:{label:"性别："}},[e("dict",{staticStyle:{width:"300px"},attrs:{dict:"sex"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}})],1),e("FormItem",{attrs:{label:"生日："}},[e("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date"},on:{"on-change":t.changeBirth},model:{value:t.form.birth,callback:function(e){t.$set(t.form,"birth",e)},expression:"form.birth"}})],1),e("FormItem",{attrs:{label:"所在省市："}},[e("al-cascader",{staticStyle:{width:"300px"},attrs:{"data-type":"code",level:"2"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),e("FormItem",{attrs:{label:"街道地址：",prop:"street"}},[e("Input",{staticStyle:{width:"300px"},model:{value:t.form.street,callback:function(e){t.$set(t.form,"street",e)},expression:"form.street"}})],1),e("FormItem",{attrs:{label:"个人简介：",prop:"description"}},[e("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"个人简介"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("FormItem",{attrs:{label:"所属部门："}},[e("span",[t._v(t._s(t.form.departmentTitle))])]),e("FormItem",{attrs:{label:"用户类型："}},[e("span",[t._v(t._s(t.form.typeTxt))])]),e("FormItem",[e("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:t.loading},on:{click:t.saveEdit}},[t._v("保存")])],1)],1)],1)},s=[],r=a("365c"),l=a("d014"),n=a("76e2"),o={components:{uploadPicThumb:l["default"],dict:n["default"]},name:"user",data(){return{loading:!1,form:{address:[]},error:""}},methods:{init(){let t=this.getUserInfo();for(let e in t)null==t[e]&&(t[e]="");this.form=t,t.address?"string"==typeof t.address?this.form.address=t.address.split(","):this.form.address=t.address:this.form.address=[],0==this.form.type?this.form.typeTxt="普通用户":1==this.form.type&&(this.form.typeTxt="管理员")},changeBirth(t){this.form.birth=t},saveEdit(){this.form.nickname?(this.error="",this.loading=!0,"object"==typeof this.form.birth&&(this.form.birth=this.format(this.form.birth,"yyyy-MM-dd")),delete this.form.roles,Object(r["Vc"])(this.form).then(t=>{this.loading=!1,t.success&&(this.$Message.success("保存成功"),this.$store.commit("setNickname",this.form.nickname),this.$store.commit("setAvatar",this.form.avatar),this.$emit("on-success",!0))})):this.error="请输入用户名"}},mounted(){this.init()}},h=o,u=a("2877"),c=Object(u["a"])(h,i,s,!1,null,null,null);e["default"]=c.exports},acd8:function(t,e,a){"use strict";a("0573")},d014:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-thumb"},[e("vuedraggable",{staticClass:"list-group",attrs:{list:t.uploadList,disabled:!t.draggable||!t.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:t.onEnd}},t._l(t.uploadList,(function(a,i){return e("div",{key:i,staticClass:"upload-list",style:{width:`calc(${t.width} + 2px)`,height:`calc(${t.height} + 2px)`,lineHeight:t.height,marginBottom:t.marginBottom}},["finished"==a.status?e("div",[e("img",{style:{height:t.height},attrs:{src:a.url}}),e("div",{staticClass:"upload-list-cover"},[e("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a.url,i)}}}),e("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove(a)}}})],1)]):e("div",[a.showProgress?e("Progress",{attrs:{percent:a.percentage,"hide-info":""}}):t._e()],1)])})),0),t.material?t._e():e("Upload",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:t.width,marginBottom:t.marginBottom},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[e("div",{style:{width:t.width,height:t.height,lineHeight:t.height}},[e("Icon",{attrs:{type:"md-camera",size:"20"}})],1)]),t.material?e("div",{staticClass:"ivu-upload-drag",style:{width:t.width,height:t.height,lineHeight:t.height},on:{click:function(e){t.showMaterialCenter=!0}}},[e("Icon",{attrs:{type:"md-camera",size:"20"}})],1):t._e(),t.material?e("materialCenter",{attrs:{acceptImg:t.accept,maxSize:t.maxSize,multiple:t.multiple},on:{"on-change":t.selectFile},model:{value:t.showMaterialCenter,callback:function(e){t.showMaterialCenter=e},expression:"showMaterialCenter"}}):t._e()],1)},s=[],r=(a("0808"),a("6a37")),l=a.n(r),n=a("365c"),o=a("289a"),h=a.n(o),u=a("1f5f"),c={name:"uploadPicThumb",components:{vuedraggable:h.a,materialCenter:u["default"]},props:{value:{type:null},material:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:5},limit:{type:Number,default:5},width:{type:String,default:"60px"},height:{type:String,default:"60px"},marginBottom:{type:String,default:"0"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format(){if(this.accept){let t=[];return this.accept.split(",").forEach(e=>{t.push(e.replace(".","").replace(" ",""))}),t}return[]}},data(){return{accessToken:{},uploadFileUrl:n["Tc"],uploadList:[],showMaterialCenter:!1}},methods:{onEnd(){this.returnValue()},init(){this.setData(this.value),this.accessToken={accessToken:this.getStore("accessToken")}},handleView(t,e){let a=new Image;a.src=t;let i=new l.a(a,{hidden:function(){i.destroy()}});i.show()},handleRemove(t){const e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError(t,e,a){this.$Message.error(t.toString())},handleFormatError(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){let t=[];this.uploadList.forEach(e=>{t.push(e.url)}),this.$emit("input",t),this.$emit("on-change",t)}else{let t=this.uploadList[0].url;this.$emit("input",t),this.$emit("on-change",t)}},setData(t){if("string"==typeof t){if(this.multiple)return void this.$Message.warning("多张上传仅支持传入数组数据类型");if(!t)return;this.uploadList=[];let e={url:t,status:"finished"};this.uploadList.push(e),this.$emit("on-change",t)}else if("object"==typeof t){if(!this.multiple)return void this.$Message.warning("单张上传仅支持传入字符串数据类型");if(this.uploadList=[],t.length>this.limit){for(let e=0;e<this.limit;e++)this.uploadList.push({url:t[e],status:"finished"});this.$emit("on-change",t.slice(0,this.limit)),this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach(t=>{let e={url:t,status:"finished"};this.uploadList.push(e)}),this.$emit("on-change",t)}},selectFile(t){this.multiple?t.forEach(t=>{this.uploadList.push({url:t,status:"finished"})}):this.uploadList[0]={url:t,status:"finished"},this.returnValue()}},watch:{value(t){this.setData(t)}},mounted(){this.init()}},d=c,m=(a("acd8"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,null,null);e["default"]=p.exports}}]);