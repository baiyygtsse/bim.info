(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f227fee4","chunk-2d0cebea"],{"0072":function(e,t,a){"use strict";a("90a3")},"05d7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Card",{staticClass:"chat"},[t("Row",{attrs:{gutter:20}},[t("Col",{attrs:{md:24,lg:12}},[t("div",{staticClass:"setting-content"},[t("div",{staticClass:"setting-title"},[e._v("智能助手页面配置")]),t("Tabs",{model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[t("TabPane",{attrs:{label:"基础配置",name:"basic"}}),t("TabPane",{attrs:{label:"输入框",name:"quick"}}),t("TabPane",{attrs:{label:"公告",name:"notice"}}),t("TabPane",{attrs:{label:"反馈",name:"feedback"}}),t("TabPane",{attrs:{label:"未知答复",name:"system"}})],1),t("div",{staticStyle:{position:"relative"}},[t("Form",{ref:"emailForm",attrs:{model:e.form,"label-width":120,"label-position":"left",rules:e.formValidate}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"basic"==e.tabName,expression:"tabName == 'basic'"}]},[t("FormItem",{attrs:{label:"对话框标题名称",prop:"title"}},[t("Input",{attrs:{type:"text",placeholder:"请输入对话框标题名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("FormItem",{staticClass:"form-noheight",attrs:{label:"机器人头像",prop:"avatar"}},[t("uploadPicInput",{model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1),t("FormItem",{attrs:{label:"进入系统提示",prop:"sysMessage"}},[t("Input",{attrs:{type:"text",placeholder:"请输入进入系统提示"},model:{value:e.form.sysMessage,callback:function(t){e.$set(e.form,"sysMessage",t)},expression:"form.sysMessage"}})],1),t("FormItem",{attrs:{label:"初始消息",prop:"welcomeMessage"}},[t("Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入点踩后显示的文本"},model:{value:e.form.welcomeMessage,callback:function(t){e.$set(e.form,"welcomeMessage",t)},expression:"form.welcomeMessage"}})],1),t("FormItem",{attrs:{label:"初始富文本消息",prop:"initMessage"}},[t("editor",{attrs:{id:"initMessage",height:"150"},model:{value:e.form.initMessage,callback:function(t){e.$set(e.form,"initMessage",t)},expression:"form.initMessage"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"quick"==e.tabName,expression:"tabName == 'quick'"}]},[t("FormItem",{attrs:{label:"输入框占位文本",prop:"placeholder"}},[t("Input",{attrs:{type:"text",placeholder:"请输入输入框占位文本"},model:{value:e.form.placeholder,callback:function(t){e.$set(e.form,"placeholder",t)},expression:"form.placeholder"}})],1),t("FormItem",{attrs:{label:"快捷短语",prop:"quickReplies"}},[t("vuedraggable",{attrs:{list:e.tagList,animation:200,"ghost-class":"thumb-ghost"}},e._l(e.tagList,(function(a,s){return t("Tag",{key:s,class:{"ivu-close-color":a.isHighlight},attrs:{size:"large",closable:"",color:a.isHighlight?"blue":"default"},on:{"on-close":function(t){return e.handleDelete(a)}},nativeOn:{click:function(t){return e.editQuickReply(a)}}},[a.icon?t("span",[e._v("["+e._s(a.icon)+"] ")]):e._e(),e._v(e._s(a.name))])})),1),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("Button",{staticStyle:{"margin-top":"5px"},attrs:{icon:"md-add",type:"dashed"},on:{click:e.addQuickReply}},[e._v("添加快捷短语")]),t("Tooltip",{staticStyle:{display:"inline-block !important","padding-top":"5px"},attrs:{content:"点击短语可编辑，可拖拽交换顺序",placement:"right",transfer:"","max-width":"280"}},[t("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"notice"==e.tabName,expression:"tabName == 'notice'"}]},[t("FormItem",{attrs:{label:"公告开关",prop:"noticeType"}},[t("i-switch",{attrs:{"true-value":"richtext","false-value":""},model:{value:e.form.noticeType,callback:function(t){e.$set(e.form,"noticeType",t)},expression:"form.noticeType"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])]),t("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"开启后将在PC端的右侧显示公告内容",placement:"right",transfer:"","max-width":"280"}},[t("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1),t("FormItem",{attrs:{label:"公告标题",prop:"noticeTitle"}},[t("Input",{attrs:{type:"text",placeholder:"请输入公告标题"},model:{value:e.form.noticeTitle,callback:function(t){e.$set(e.form,"noticeTitle",t)},expression:"form.noticeTitle"}})],1),t("FormItem",{attrs:{label:"公告内容",prop:"noticeContent"}},[t("editor",{attrs:{id:"noticeContent",height:"250"},model:{value:e.form.noticeContent,callback:function(t){e.$set(e.form,"noticeContent",t)},expression:"form.noticeContent"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"feedback"==e.tabName,expression:"tabName == 'feedback'"}]},[t("FormItem",{attrs:{label:"点赞后反馈文本",prop:"textOfGood"}},[t("Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入点赞后显示的文本"},model:{value:e.form.textOfGood,callback:function(t){e.$set(e.form,"textOfGood",t)},expression:"form.textOfGood"}})],1),t("FormItem",{attrs:{label:"点踩后反馈文本",prop:"textOfBad"}},[t("Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入点踩后显示的文本"},model:{value:e.form.textOfBad,callback:function(t){e.$set(e.form,"textOfBad",t)},expression:"form.textOfBad"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"system"==e.tabName,expression:"tabName == 'system'"}]},[t("FormItem",{attrs:{label:"未找到任何匹配回答的答复",prop:"noDataReply"}},[t("editor",{attrs:{id:"noDataReply",height:"250"},model:{value:e.form.noDataReply,callback:function(t){e.$set(e.form,"noDataReply",t)},expression:"form.noDataReply"}})],1)],1),t("FormItem",[t("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.submit}},[e._v("保存更改")])],1)],1),e.loading?t("Spin",{attrs:{fix:""}}):e._e()],1)],1)]),t("Col",{staticClass:"iphone-content",attrs:{md:24,lg:12}},[t("div",{staticClass:"demo-model",style:{backgroundImage:"url("+a("fca1")+")"}},[t("div",{staticClass:"model-content"},[t("iframe",{staticClass:"iframe",attrs:{scrolling:"auto",frameborder:"0",src:e.demoUrl,id:"demo-modal"}})])])])],1),t("div",{staticClass:"preview-pc",on:{click:function(t){return e.showDemo(!0)}}},[t("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-desktop"}}),e._v("预览PC版 ")],1)],1),t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"replyForm",attrs:{model:e.replyForm,"label-position":"top",rules:e.replyFormValidate}},[t("FormItem",{attrs:{label:"快捷短语",prop:"name"}},[t("Input",{model:{value:e.replyForm.name,callback:function(t){e.$set(e.replyForm,"name",t)},expression:"replyForm.name"}})],1),t("FormItem",{attrs:{label:"图标",prop:"icon"}},[t("Select",{attrs:{filterable:"",clearable:""},model:{value:e.replyForm.icon,callback:function(t){e.$set(e.replyForm,"icon",t)},expression:"replyForm.icon"}},[t("Option",{attrs:{value:"alarm"}},[e._v("闹钟 alarm")]),t("Option",{attrs:{value:"apps"}},[e._v("应用 apps")]),t("Option",{attrs:{value:"bullhorn"}},[e._v("喇叭 bullhorn")]),t("Option",{attrs:{value:"camera"}},[e._v("相机 camera")]),t("Option",{attrs:{value:"cart"}},[e._v("购物车 cart")]),t("Option",{attrs:{value:"close"}},[e._v("关闭 close")]),t("Option",{attrs:{value:"check"}},[e._v("确认 check")]),t("Option",{attrs:{value:"edit"}},[e._v("编辑 edit")]),t("Option",{attrs:{value:"ellipsis-h"}},[e._v("更多 ellipsis-h")]),t("Option",{attrs:{value:"file"}},[e._v("文件 file")]),t("Option",{attrs:{value:"folder"}},[e._v("文件夹 folder")]),t("Option",{attrs:{value:"home"}},[e._v("首页 home")]),t("Option",{attrs:{value:"image"}},[e._v("图片 image")]),t("Option",{attrs:{value:"info-circle"}},[e._v("提示 info-circle")]),t("Option",{attrs:{value:"keyboard"}},[e._v("键盘 keyboard")]),t("Option",{attrs:{value:"message"}},[e._v("消息 message")]),t("Option",{attrs:{value:"mic"}},[e._v("麦克风 mic")]),t("Option",{attrs:{value:"paper-plane"}},[e._v("发送 paper-plane")]),t("Option",{attrs:{value:"plus"}},[e._v("加号 plus")]),t("Option",{attrs:{value:"refresh"}},[e._v("刷新 refresh")]),t("Option",{attrs:{value:"search"}},[e._v("搜索 search")]),t("Option",{attrs:{value:"share"}},[e._v("分享 share")]),t("Option",{attrs:{value:"smile"}},[e._v("笑脸 smile")]),t("Option",{attrs:{value:"tel"}},[e._v("电话 tel")]),t("Option",{attrs:{value:"thumbs-down"}},[e._v("点赞 thumbs-down")]),t("Option",{attrs:{value:"thumbs-up"}},[e._v("点踩 thumbs-up")])],1)],1),t("FormItem",{attrs:{label:"高亮显示",prop:"isHighlight"}},[t("i-switch",{model:{value:e.replyForm.isHighlight,callback:function(t){e.$set(e.replyForm,"isHighlight",t)},expression:"replyForm.isHighlight"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),t("FormItem",{attrs:{label:"右上角红点",prop:"isNew"}},[t("i-switch",{model:{value:e.replyForm.isNew,callback:function(t){e.$set(e.replyForm,"isNew",t)},expression:"replyForm.isNew"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)},i=[],l=a("365c"),o=a("ee24"),r=a("6181"),n=a("289a"),c=a.n(n),p={name:"chat-setting",components:{editor:o["default"],uploadPicInput:r["default"],vuedraggable:c.a},data(){return{tabName:"basic",loading:!1,saveLoading:!1,form:{noticeType:""},formValidate:{},modalType:0,modalVisible:!1,modalTitle:"",replyForm:{name:"",icon:"",isHighlight:!1,isNew:!1},replyFormValidate:{name:[{required:!0,message:"不能为空",trigger:"blur"}]},tagList:[],domain:"",demoUrl:""}},methods:{init(){this.getData(),this.initUrl()},getData(){this.loading=!0,Object(l["zb"])().then(e=>{if(this.loading=!1,e.success&&e.result){let t=e.result;for(let e in t)null!=t[e]&&"null"!=t[e]||(t[e]="");let a=JSON.stringify(t),s=JSON.parse(a);this.form=s,e.result.quickReplies&&e.result.quickReplies.length>=0&&"null"!=e.result.quickReplies&&(this.tagList=JSON.parse(e.result.quickReplies))}})},initUrl(){Object(l["Pb"])().then(e=>{e.result&&(this.domain=e.result.domain,this.showDemo())})},showDemo(e){this.domain?(this.demoUrl=`${this.domain}/chat/chat.html?accessToken=${this.getStore("accessToken")}&time=${new Date}`,e&&window.open(this.demoUrl)):this.$Modal.confirm({title:"您还未配置访问域名",content:"您还未配置应用部署访问域名，是否现在立即去配置?（配置后请刷新该页面）",onOk:()=>{this.$router.push({name:"setting",query:{name:"other"}})}})},addQuickReply(){this.modalType=0,this.modalTitle="添加快捷短语",this.$refs.replyForm.resetFields(),this.modalVisible=!0},editQuickReply(e){this.modalType=1,this.modalTitle="编辑快捷短语";for(let s in e)null==e[s]&&(e[s]="");let t=JSON.stringify(e),a=JSON.parse(t);this.replyForm=a,this.modalVisible=!0},handleDelete(e){this.tagList=this.tagList.filter(t=>t.name!=e.name)},handleSubmit(){this.$refs.replyForm.validate(e=>{if(e)if(0==this.modalType)this.tagList.push({id:(new Date).getTime(),name:this.replyForm.name,icon:this.replyForm.icon,isHighlight:this.replyForm.isHighlight,isNew:this.replyForm.isNew}),this.modalVisible=!1;else{for(let e=0;e<this.tagList.length;e++)this.tagList[e].id==this.replyForm.id&&(this.tagList[e]=this.replyForm);this.modalVisible=!1}})},submit(){this.submitLoading=!0,this.form.quickReplies=JSON.stringify(this.tagList),Object(l["U"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.showDemo())})}},mounted(){this.init()}},m=p,u=(a("0072"),a("2877")),d=Object(u["a"])(m,s,i,!1,null,null,null);t["default"]=d.exports},6181:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{width:"100%","margin-right":"10px"}},[t("Input",{attrs:{placeholder:e.placeholder,size:e.size,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength},on:{"on-change":e.handleChange},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[t("Poptip",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{slot:"append",transfer:"",trigger:"hover",title:"图片预览",placement:"right",width:"350"},slot:"append"},[t("Button",{attrs:{icon:e.previewIcon}}),t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.currentValue,expression:"currentValue"}],staticStyle:{width:"100%",margin:"0 auto",display:"block",cursor:"zoom-in"},attrs:{src:e.currentValue},on:{click:e.viewImage}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.currentValue,expression:"!currentValue"}]},[e._v("无效的图片链接")]),t("a",{directives:[{name:"show",rawName:"v-show",value:e.currentValue,expression:"currentValue"}],staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:e.viewImage}},[e._v("查看大图")])])],1)],1)],1),e.material?e._e():t("Upload",{attrs:{action:e.uploadFileUrl,headers:e.accessToken,"on-success":e.handleSuccess,"on-error":e.handleError,format:e.format,accept:e.accept,"max-size":1024*e.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.beforeUpload,"show-upload-list":!1,"v-show":e.showUpload}},[t("Button",{attrs:{loading:e.loading,size:e.size,disabled:e.disabled,icon:e.icon,type:e.type,shape:e.shape,ghost:e.ghost}},[e._v(e._s(e.text))])],1),e.material?t("Button",{attrs:{size:e.size,disabled:e.disabled,icon:e.icon,type:e.type,shape:e.shape,ghost:e.ghost},on:{click:function(t){e.showMaterialCenter=!0}}},[e._v(e._s(e.text))]):e._e(),e.material?t("materialCenter",{attrs:{showInput:!1,acceptImg:e.accept,maxSize:e.maxSize},on:{"on-change":e.selectFile},model:{value:e.showMaterialCenter,callback:function(t){e.showMaterialCenter=t},expression:"showMaterialCenter"}}):e._e()],1)])},i=[],l=(a("0808"),a("6a37")),o=a.n(l),r=a("365c"),n=a("1f5f"),c={name:"uploadPicInput",components:{materialCenter:n["default"]},props:{value:String,size:String,placeholder:{type:String,default:"可输入图片链接"},disabled:{type:Boolean,default:!1},material:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,previewIcon:{type:String,default:"md-eye"},icon:{type:String,default:"ios-cloud-upload-outline"},text:{type:String,default:"上传图片"},type:String,shape:String,ghost:{type:Boolean,default:!1},maxSize:{type:Number,default:5},accept:{type:String,default:".jpg, .jpeg, .png, .gif"},showUpload:{type:Boolean,default:!0}},computed:{format(){if(this.accept){let e=[];return this.accept.split(",").forEach(t=>{e.push(t.replace(".","").replace(" ",""))}),e}return[]}},data(){return{accessToken:{},currentValue:this.value,loading:!1,uploadFileUrl:r["Tc"],showMaterialCenter:!1}},methods:{init(){this.accessToken={accessToken:this.getStore("accessToken")}},viewImage(){let e=new Image;e.src=this.currentValue;let t=new o.a(e,{hidden:function(){t.destroy()}});t.show()},handleFormatError(e){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+e.name+" ’格式不正确, 请选择 "+this.accept+" 格式文件"})},handleMaxSize(e){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+e.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},beforeUpload(){return this.loading=!0,!0},handleSuccess(e,t){this.loading=!1,e.success?(this.currentValue=e.result,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)):this.$Message.error(e.message)},handleError(e,t,a){this.loading=!1,this.$Message.error(e.toString())},handleChange(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))},selectFile(e){this.setCurrentValue(e)}},watch:{value(e){this.setCurrentValue(e)}},mounted(){this.init()}},p=c,m=a("2877"),u=Object(m["a"])(p,s,i,!1,null,null,null);t["default"]=u.exports},"90a3":function(e,t,a){},fca1:function(e,t,a){e.exports=a.p+"img/iPhoneX.c1d421f4.png"}}]);