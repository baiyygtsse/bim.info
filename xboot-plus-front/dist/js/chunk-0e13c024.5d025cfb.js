(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e13c024","chunk-2d20f739"],{"0928":function(e,t,a){},"55b8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("Tabs",{attrs:{animated:!1},on:{"on-click":e.handleClickTab},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[t("TabPane",{attrs:{name:"redis",label:"Redis管理"}},[t("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[t("div",[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加")]),t("Dropdown",{on:{"on-click":e.handleDropdown}},[t("Button",[e._v(" 更多操作 "),t("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{name:"delAll"}},[e._v("批量删除")]),t("DropdownItem",{attrs:{name:"clear"}},[e._v("清空全部")])],1)],1),t("Input",{staticStyle:{width:"250px"},attrs:{suffix:"ios-search",placeholder:"输入Key搜索",clearable:""},on:{"on-change":e.search},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),t("div",{staticClass:"icons"},[t("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:e.getDataList}})],1),t("Tooltip",{attrs:{content:e.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(t){e.openTip=!e.openTip}}})],1),t("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.changeTableSize}},[t("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{selected:"default"==e.tableSize,name:"default"}},[e._v("默认")]),t("DropdownItem",{attrs:{selected:"large"==e.tableSize,name:"large"}},[e._v("宽松")]),t("DropdownItem",{attrs:{selected:"small"==e.tableSize,name:"small"}},[e._v("紧密")])],1)],1)],1),t("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:e.exportData}})],1)],1)]),t("Alert",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])]),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,size:e.tableSize},on:{"on-selection-change":e.changeSelect}}),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),t("TabPane",{attrs:{name:"monitor",label:"Redis监控"}},["monitor"==e.tabName?t("redis-monitor"):e._e()],1)],1)],1),t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,"label-width":80,rules:e.formValidate}},[t("FormItem",{attrs:{label:"Key",prop:"key"}},[t("Input",{staticStyle:{width:"100%"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1),t("FormItem",{attrs:{label:"Value",prop:"value"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:5},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),t("FormItem",{attrs:{label:"过期时间",prop:"expireTime"}},[t("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"永久不过期设为-1"}},[t("InputNumber",{attrs:{min:-1},model:{value:e.form.expireTime,callback:function(t){e.$set(e.form,"expireTime",t)},expression:"form.expireTime"}})],1),t("span",{staticStyle:{"margin-left":"5px"}},[e._v("秒")])],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)},i=[],r=a("365c"),o=a("b44e"),l={name:"redis-notCache",components:{redisMonitor:o["default"]},data(){return{tabName:"redis",searchKey:"",tableSize:"default",openTip:!0,loading:!0,modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10},form:{key:"",value:"",expireTime:null},formValidate:{key:[{required:!0,message:"不能为空",trigger:"change"}],value:[{required:!0,message:"不能为空",trigger:"change"}],expireTime:[{required:!0,type:"number",message:"不能为空",trigger:"change"}]},submitLoading:!1,selectList:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"Key",key:"key",minWidth:200,sortable:!0},{title:"Value",key:"value",minWidth:400,ellipsis:!0,sortable:!0},{title:"过期时间(秒)",key:"expireTime",width:150,sortable:!0},{title:"操作",key:"action",align:"center",fixed:"right",width:150,render:(e,t)=>e("div",[e("a",{on:{click:()=>{this.edit(t.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.remove(t.row)}}},"删除")])}],data:[],pageNumber:1,pageSize:10,total:0}},methods:{init(){Object(r["Wb"])().then(e=>{let t=e.result.keySize;t>1e5&&this.$Notice.info({title:"提示",desc:"检测到存储的数据已超过10万条，为避免加载过多数据当前仅显示前10万条数据"})}),this.getDataList()},handleClickTab(e){"monitor"==e&&this.$Message.info("每隔5秒刷新一次数据，请耐心等待图表绘制")},handleDropdown(e){"delAll"==e?this.delAll():"clear"==e&&this.clear()},changeTableSize(e){this.tableSize=e},exportData(){this.$refs.table.exportCsv({filename:"数据"})},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},search(){this.searchForm.key=this.searchKey,this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},clearSelectAll(){this.$refs.table.selectAll(!1)},changeSelect(e){this.selectList=e},getDataList(){this.loading=!0,Object(r["Ub"])(this.searchForm).then(e=>{this.loading=!1,e.success&&(this.data=e.result.content,this.total=e.result.totalElements,0==this.data.length&&this.searchForm.pageNumber>1&&(this.searchForm.pageNumber-=1,this.getDataList()))})},handleSubmit(){this.$refs.form.validate(e=>{e&&(this.submitLoading=!0,Object(r["Ac"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)}))})},add(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),delete this.form.id,this.modalVisible=!0},edit(e){if(e.value.indexOf("非字符")>-1)return void this.$Message.warning("非字符格式数据暂不支持编辑");this.modalType=1,this.modalTitle="编辑",this.$refs.form.resetFields();for(let s in e)null==e[s]&&(e[s]="");let t=JSON.stringify(e),a=JSON.parse(t);this.form.value="读取中...",this.form.expireTime=null,Object(r["Tb"])(a.key).then(e=>{this.form.value="",e.success&&(a.value=e.result.value,a.expireTime=e.result.expireTime,this.form=a)}),this.modalVisible=!0},clear(){this.$Modal.confirm({title:"请谨慎进行此操作！",content:"您确认要彻底清空删除所有数据?",loading:!0,onOk:()=>{Object(r["z"])().then(e=>{this.$Modal.remove(),e.success&&(this.$Message.success("操作成功"),this.getDataList())})}})},remove(e){this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.key+" ?",loading:!0,onOk:()=>{Object(r["M"])({keys:e.key}).then(e=>{this.$Modal.remove(),e.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let e="";this.selectList.forEach((function(t){e+=t.key+","})),e=e.substring(0,e.length-1),Object(r["M"])({keys:e}).then(e=>{this.$Modal.remove(),e.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})}},mounted(){this.init()}},n=l,c=(a("6d06"),a("2877")),m=Object(c["a"])(n,s,i,!1,null,null,null);t["default"]=m.exports},"6d06":function(e,t,a){"use strict";a("0928")},b44e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Row",[t("Col",{attrs:{span:"12"}},[t("apexchart",{ref:"memoryInfo",attrs:{type:"area",height:"350",options:e.memory.chartOptions,series:e.memory.series}})],1),t("Col",{attrs:{span:"12"}},[t("apexchart",{ref:"keySize",attrs:{type:"area",height:"350",options:e.key.chartOptions,series:e.key.series}})],1)],1),t("Divider",{attrs:{orientation:"left"}},[e._v("Redis详细信息")]),t("Table",{attrs:{columns:e.columns,data:e.redisInfo,"show-header":!1,size:"small"}})],1)},i=[],r=a("365c"),o={name:"redisMonitor",data(){return{memory:{series:[{name:"内存(KB)",data:[0]}],chartOptions:{chart:{animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:5e3}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Redis内存实时占用情况（KB）",align:"left"},markers:{size:0},xaxis:{},yaxis:{},legend:{show:!1}},data:[],xdata:[]},key:{series:[{name:"key数量",data:[0]}],chartOptions:{chart:{animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:5e3}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},colors:["#f5564e"],stroke:{curve:"smooth"},title:{text:"Redis key实时数量（个）",align:"left"},markers:{size:0},xaxis:{},yaxis:{},legend:{show:!1}},data:[],xdata:[]},columns:[{key:"key",minWidth:200},{key:"description",minWidth:500},{key:"value",width:400}],redisInfo:[],timer:null,minMemory:1e10,maxMemory:-1e10,minSize:1e10,maxSize:-1e10}},methods:{init(){this.getData(),this.getInfo()},getData(){this.getRequestData(),this.timer=setInterval(()=>{this.getRequestData()},5e3)},getRequestData(){Object(r["Xb"])().then(e=>{let t=Number(e.result.memory)/1024;t<this.minMemory&&(this.minMemory=t),t>this.maxMemory&&(this.maxMemory=t),this.memory.data.push(Number(t.toFixed(2))),this.memory.xdata.push(e.result.time),this.memory.data.length>=6&&(this.memory.data.shift(),this.memory.xdata.shift()),this.$refs.memoryInfo.updateSeries([{name:"内存(KB)",data:this.memory.data}]),this.$refs.memoryInfo.updateOptions({xaxis:{categories:this.memory.xdata},yaxis:{min:this.minMemory-2,max:this.maxMemory+2}},!0,!0)}),Object(r["Wb"])().then(e=>{let t=e.result.keySize;t<this.minSize&&(this.minSize=t),t>this.maxSize&&(this.maxSize=t),this.key.data.push(t),this.key.xdata.push(e.result.time),this.key.data.length>=6&&(this.key.data.shift(),this.key.xdata.shift()),this.$refs.keySize.updateSeries([{name:"key数量",data:this.key.data}]),this.$refs.keySize.updateOptions({xaxis:{categories:this.key.xdata},yaxis:{min:this.minSize-2,max:this.maxSize+2}},!0,!0)})},getInfo(){Object(r["Vb"])().then(e=>{let t=[];e.result.forEach(e=>{e.description&&t.push(e)}),this.redisInfo=t})}},beforeDestroy(){this.timer&&clearInterval(this.timer)},mounted(){this.init()}},l=o,n=a("2877"),c=Object(n["a"])(l,s,i,!1,null,null,null);t["default"]=c.exports}}]);