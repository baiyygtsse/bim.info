(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d3af28d"],{"013f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[t("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"模型名称",prop:"name"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入名称",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("FormItem",{attrs:{label:"标识Key",prop:"modelKey"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入标识",clearable:""},model:{value:e.searchForm.modelKey,callback:function(t){e.$set(e.searchForm,"modelKey",t)},expression:"searchForm.modelKey"}})],1),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[t("div",[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加空白模型")]),t("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")])],1),t("div",{staticClass:"icons"},[t("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:e.getDataList}})],1),t("Tooltip",{attrs:{content:e.openSearch?"关闭搜索":"开启搜索",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"ios-search",size:"18"},on:{click:function(t){e.openSearch=!e.openSearch}}})],1),t("Tooltip",{attrs:{content:e.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(t){e.openTip=!e.openTip}}})],1),t("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.changeTableSize}},[t("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{selected:"default"==e.tableSize,name:"default"}},[e._v("默认")]),t("DropdownItem",{attrs:{selected:"large"==e.tableSize,name:"large"}},[e._v("宽松")]),t("DropdownItem",{attrs:{selected:"small"==e.tableSize,name:"small"}},[e._v("紧密")])],1)],1)],1),t("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:e.exportData}})],1)],1)]),t("Alert",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])]),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,size:e.tableSize,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect}}),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,"label-width":80,rules:e.formValidate}},[t("FormItem",{attrs:{label:"名称",prop:"name"}},[t("Input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("FormItem",{attrs:{label:"标识Key",prop:"modelKey"}},[t("Input",{model:{value:e.form.modelKey,callback:function(t){e.$set(e.form,"modelKey",t)},expression:"form.modelKey"}})],1),t("FormItem",{attrs:{label:"备注",prop:"description"}},[t("Input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:e.handelCancel}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmit}},[e._v("提交")])],1)],1),t("Modal",{staticClass:"modeler",attrs:{closable:!1,"mask-closable":!1,"footer-hide":"",width:900,fullscreen:e.full},on:{"on-cancel":e.handleClose},model:{value:e.showModeler,callback:function(t){e.showModeler=t},expression:"showModeler"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticClass:"ivu-modal-header-inner"},[e._v("Activiti工作流在线流程设计编辑")]),t("a",{staticClass:"modal-fullscreen",on:{click:e.handleFull}},[t("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.full,expression:"!full"}],staticClass:"model-fullscreen-icon",attrs:{type:"ios-expand"}}),t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.full,expression:"full"}],staticClass:"model-fullscreen-icon",attrs:{type:"ios-contract"}})],1),t("a",{staticClass:"ivu-modal-close",on:{click:e.handleClose}},[t("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)]),t("div",{style:{position:"relative",height:e.modalHeight}},[t("iframe",{attrs:{id:"iframe",src:e.modelerUrl,frameborder:"0",width:"100%",height:"100%",scrolling:"auto"}}),e.modelerLoading?t("Spin",{attrs:{fix:"",size:"large"}}):e._e()],1)])],1)},o=[],i=s("81c1"),n=s("365c"),r={name:"model-manage",data(){return{tableSize:"default",full:!0,modalHeight:"100%",openSearch:!0,openTip:!0,showModeler:!1,modelerLoading:!1,domain:"",modelerUrl:"",loading:!0,selectList:[],searchForm:{name:"",modelKey:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},modalType:0,modalVisible:!1,modalTitle:"",form:{name:"",modelKey:"",description:""},formValidate:{name:[{required:!0,message:"不能为空",trigger:"change"}],modelKey:[{required:!0,message:"不能为空",trigger:"change"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"名称",key:"name",minWidth:180,sortable:!0,fixed:"left"},{title:"标识Key",key:"modelKey",minWidth:150,sortable:!0},{title:"备注描述",key:"description",minWidth:150,sortable:!0},{title:"版本",key:"version",width:130,align:"center",sortable:!0,render:(e,t)=>{let s="";return t.row.version&&(s="v."+t.row.version),e("div",s)}},{title:"创建时间",key:"createTime",width:180,sortable:!0,sortType:"desc"},{title:"更新时间",key:"updateTime",width:180,sortable:!0},{title:"操作",key:"action",width:300,align:"center",fixed:"right",render:(e,t)=>e("div",[e("a",{on:{click:()=>{this.edit(t.row)}}},"在线设计"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.deploy(t.row)}}},"部署发布"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.export(t.row)}}},"导出XML"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.remove(t.row)}}},"删除")])}],data:[],total:0}},methods:{init(){this.getDataList(),this.getDomain()},getDomain(){Object(n["Pb"])().then(e=>{e.result&&(this.domain=e.result.domain)})},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},changeTableSize(e){this.tableSize=e},exportData(){this.$refs.table.exportCsv({filename:"数据"})},getDataList(){this.loading=!0,Object(i["F"])(this.searchForm).then(e=>{this.loading=!1,e.success&&(this.data=e.result.content,this.total=e.result.totalElements,0==this.data.length&&this.searchForm.pageNumber>1&&(this.searchForm.pageNumber-=1,this.getDataList()))})},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"==e.order&&(this.searchForm.order=""),this.getDataList()},handelCancel(){this.modalVisible=!1},handelSubmit(){this.$refs.form.validate(e=>{e&&(this.submitLoading=!0,0==this.modalType&&(delete this.form.id,Object(i["c"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1)})))})},add(){this.modalType=0,this.modalTitle="添加空白模型",this.$refs.form.resetFields(),this.modalVisible=!0},edit(e){if(!this.domain)return void this.$Modal.confirm({title:"您还未配置访问域名",content:"您还未配置应用部署访问域名，是否现在立即去配置?（配置后请刷新该页面）",onOk:()=>{this.$router.push({name:"setting",query:{name:"other"}})}});this.modelerUrl=`${this.domain}/modeler/modeler.html?modelId=${e.id}&accessToken=${this.getStore("accessToken")}&time=${new Date}`,this.showModeler=!0,this.modelerLoading=!0;let t=this,s=document.getElementById("iframe");s.attachEvent?s.attachEvent("onload",(function(){t.modelerLoading=!1})):s.onload=function(){t.modelerLoading=!1}},handleFull(){this.full=!this.full,this.full?this.modalHeight="100%":this.modalHeight="550px"},handleClose(){this.$Modal.confirm({title:"确认关闭",content:"请记得点击左上角保存按钮，确定关闭编辑器?",onOk:()=>{this.getDataList(),this.showModeler=!1}})},deploy(e){this.$Modal.confirm({title:"确认部署发布",content:"您确认要部署发布模型 "+e.name+" ?",loading:!0,onOk:()=>{Object(i["s"])(e.id).then(e=>{this.$Modal.remove(),e.success&&setTimeout(()=>{this.showJump()},300)})}})},showJump(){this.$Modal.confirm({title:"部署发布成功",content:"建议立即去分配审批节点人员并编辑流程信息，是否立即跳转查看该流程?",onOk:()=>{this.$router.push({name:"process-manage"})}})},export(e){window.open(i["x"]+e.id+"?accessToken="+this.getStore("accessToken"))},remove(e){this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+e.name+" ?",loading:!0,onOk:()=>{Object(i["o"])({ids:e.id}).then(e=>{this.$Modal.remove(),e.success&&(this.clearSelectAll(),this.$Message.success("操作成功"),this.getDataList())})}})},showSelect(e){this.selectList=e},clearSelectAll(){this.$refs.table.selectAll(!1)},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据?",loading:!0,onOk:()=>{let e="";this.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(i["o"])({ids:e}).then(e=>{this.$Modal.remove(),e.success&&(this.$Message.success("操作成功"),this.clearSelectAll(),this.getDataList())})}})}},mounted(){this.init()},watch:{$route(e,t){"model-manage"==e.name&&this.getDataList()}}},c=r,l=(s("db54"),s("2877")),d=Object(l["a"])(c,a,o,!1,null,null,null);t["default"]=d.exports},"0524":function(e,t,s){},"81c1":function(e,t,s){"use strict";s.d(t,"x",(function(){return o})),s.d(t,"r",(function(){return i})),s.d(t,"y",(function(){return n})),s.d(t,"D",(function(){return r})),s.d(t,"F",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"s",(function(){return d})),s.d(t,"o",(function(){return u})),s.d(t,"J",(function(){return h})),s.d(t,"U",(function(){return m})),s.d(t,"X",(function(){return p})),s.d(t,"i",(function(){return f})),s.d(t,"K",(function(){return b})),s.d(t,"v",(function(){return g})),s.d(t,"w",(function(){return y})),s.d(t,"p",(function(){return v})),s.d(t,"L",(function(){return k})),s.d(t,"B",(function(){return w})),s.d(t,"I",(function(){return O})),s.d(t,"C",(function(){return j})),s.d(t,"G",(function(){return S})),s.d(t,"H",(function(){return T})),s.d(t,"V",(function(){return x})),s.d(t,"q",(function(){return F})),s.d(t,"j",(function(){return I})),s.d(t,"T",(function(){return C})),s.d(t,"t",(function(){return L})),s.d(t,"M",(function(){return $})),s.d(t,"k",(function(){return M})),s.d(t,"P",(function(){return P})),s.d(t,"Q",(function(){return z})),s.d(t,"z",(function(){return D})),s.d(t,"e",(function(){return B})),s.d(t,"f",(function(){return _})),s.d(t,"g",(function(){return N})),s.d(t,"n",(function(){return K})),s.d(t,"N",(function(){return A})),s.d(t,"O",(function(){return V})),s.d(t,"a",(function(){return H})),s.d(t,"u",(function(){return E})),s.d(t,"l",(function(){return R})),s.d(t,"R",(function(){return U})),s.d(t,"A",(function(){return J})),s.d(t,"d",(function(){return q})),s.d(t,"S",(function(){return W})),s.d(t,"h",(function(){return X})),s.d(t,"m",(function(){return G})),s.d(t,"E",(function(){return Q})),s.d(t,"b",(function(){return Y})),s.d(t,"W",(function(){return Z}));var a=s("7f80");const o="/xboot/actModel/export/",i="/xboot/actModel/deployByFile",n="/xboot/actProcess/export",r="/xboot/actProcess/getHighlightImg/",c=e=>Object(a["b"])("/actModel/getByCondition",e),l=e=>Object(a["e"])("/actModel/add",e),d=(e,t)=>Object(a["b"])("/actModel/deploy/"+e,t),u=e=>Object(a["e"])("/actModel/delByIds",e),h=e=>Object(a["b"])("/actProcess/getByCondition",e),m=e=>Object(a["e"])("/actProcess/updateInfo",e),p=e=>Object(a["e"])("/actProcess/updateStatus",e),f=(e,t)=>Object(a["b"])("/actProcess/convertToModel/"+e,t),b=(e,t)=>Object(a["b"])("/actProcess/getProcessNode/"+e,t),g=e=>Object(a["e"])("/actProcess/editNodeUser",e),y=e=>Object(a["e"])("/actProcess/editStartUser",e),v=e=>Object(a["e"])("/actProcess/delByIds",e),k=e=>Object(a["b"])("/actProcess/getRunningProcess",e),w=e=>Object(a["b"])("/actProcess/getFinishedProcess",e),O=(e,t)=>Object(a["b"])("/actProcess/getByKey/"+e,t),j=(e,t)=>Object(a["b"])("/actProcess/getFirstNode/"+e,t),S=(e,t,s)=>Object(a["b"])(`/actProcess/getNextNode/${e}/${t}`,s),T=(e,t)=>Object(a["b"])("/actProcess/getNode/"+e,t),x=e=>Object(a["e"])("/actProcess/updateInsStatus",e),F=e=>Object(a["e"])("/actProcess/delInsByIds",e),I=e=>Object(a["e"])("/actProcess/delHistoricInsByIds",e),C=e=>Object(a["b"])("/actTask/todoList",e),L=e=>Object(a["b"])("/actTask/doneList",e),$=(e,t)=>Object(a["b"])("/actTask/historicFlow/"+e,t),M=e=>Object(a["e"])("/actTask/delegate",e),P=e=>Object(a["e"])("/actTask/pass",e),z=e=>Object(a["e"])("/actTask/passAll",e),D=(e,t)=>Object(a["b"])("/actTask/getBackList/"+e,t),B=e=>Object(a["e"])("/actTask/back",e),_=e=>Object(a["e"])("/actTask/backAll",e),N=e=>Object(a["e"])("/actTask/backToTask",e),K=e=>Object(a["e"])("/actTask/deleteHistoric",e),A=e=>Object(a["b"])("/actCategory/getByParentId/0",e),V=(e,t)=>Object(a["b"])("/actCategory/getByParentId/"+e,t),H=e=>Object(a["e"])("/actCategory/add",e),E=e=>Object(a["e"])("/actCategory/edit",e),R=e=>Object(a["e"])("/actCategory/delByIds",e),U=e=>Object(a["b"])("/actCategory/search",e),J=e=>Object(a["b"])("/actBusiness/getByCondition",e),q=e=>Object(a["e"])("/actBusiness/apply",e),W=e=>Object(a["e"])("/actBusiness/start",e),X=e=>Object(a["e"])("/actBusiness/cancel",e),G=e=>Object(a["e"])("/actBusiness/delByIds",e),Q=(e,t)=>Object(a["b"])("/leave/get/"+e,t),Y=e=>Object(a["e"])("/leave/add",e),Z=e=>Object(a["f"])("/leave/update",e)},db54:function(e,t,s){"use strict";s("0524")}}]);