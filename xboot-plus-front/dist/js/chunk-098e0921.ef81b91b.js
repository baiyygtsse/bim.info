(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-098e0921","chunk-2d0d7882"],{"2ca8":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{title:"提交申请","mask-closable":!1,width:500},model:{value:e.applyModalVisible,callback:function(t){e.applyModalVisible=t},expression:"applyModalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,"label-width":85,rules:e.formValidate}},[t("FormItem",{attrs:{label:"标题",prop:"title"}},[t("Input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.showAssign,expression:"showAssign"}],attrs:{label:"选择审批人",prop:"assignees",error:e.error}},[t("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:"",multiple:"",loading:e.userLoading},model:{value:e.form.assignees,callback:function(t){e.$set(e.form,"assignees",t)},expression:"form.assignees"}},e._l(e.assigneeList,(function(s,r){return t("Option",{key:r,attrs:{value:s.id,label:s.nickname}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(s.nickname))]),t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(s.username))])])})),1)],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.isCustom,expression:"isCustom"}],attrs:{label:"自定义搜索选择审批人",prop:"assignees",error:e.error}},[t("Select",{attrs:{placeholder:"请输入用户名搜索选择用户",filterable:"",remote:"",multiple:"","remote-method":e.searchUser,loading:e.userLoading},model:{value:e.form.assignees,callback:function(t){e.$set(e.form,"assignees",t)},expression:"form.assignees"}},e._l(e.userList,(function(s,r){return t("Option",{key:r,attrs:{value:s.id,label:s.nickname}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(s.nickname))]),t("span",{staticStyle:{color:"#ccc"}},[e._v(e._s(s.username))])])})),1)],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.isGateway,expression:"isGateway"}],attrs:{label:"下一审批人"}},[t("span",[e._v("分支网关处暂不支持自定义选择下一审批人，将发送给下一节点所有人")])]),t("FormItem",{attrs:{label:"优先级",prop:"priority"}},[t("dict",{attrs:{dict:"priority"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1),t("FormItem",{attrs:{label:"消息通知"}},[t("Checkbox",{model:{value:e.form.sendMessage,callback:function(t){e.$set(e.form,"sendMessage",t)},expression:"form.sendMessage"}},[e._v("站内消息通知")]),t("Checkbox",{model:{value:e.form.sendSms,callback:function(t){e.$set(e.form,"sendSms",t)},expression:"form.sendSms"}},[e._v("短信通知")]),t("Checkbox",{model:{value:e.form.sendEmail,callback:function(t){e.$set(e.form,"sendEmail",t)},expression:"form.sendEmail"}},[e._v("邮件通知")])],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.applyModalVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmit}},[e._v("提交")])],1)],1)],1)},i=[],n=s("81c1"),a=s("365c"),o=s("76e2"),c={name:"processStart",components:{dict:o["default"]},props:{value:{type:Boolean,default:!1},processKey:String,actBusinessId:String},data(){return{userLoading:!1,showAssign:!1,isGateway:!1,isCustom:!1,error:"",submitLoading:!1,applyModalVisible:this.value,form:{title:"",procDefId:"",assignees:[],priority:"0",sendMessage:!0,sendSms:!0,sendEmail:!0},formValidate:{title:[{required:!0,message:"不能为空",trigger:"change"}],priority:[{required:!0,message:"不能为空",trigger:"change"}]},assigneeList:[],routeName:"",userList:[]}},methods:{init(){},searchUser(e){e&&(this.userLoading=!0,Object(a["Fc"])(e).then(e=>{this.userLoading=!1,e.success&&(this.userList=e.result)}))},showApply(){this.userLoading=!0,Object(n["C"])(this.form.procDefId).then(e=>{if(this.userLoading=!1,e.success){if(this.error="",3==e.result.type||4==e.result.type)return this.isGateway=!0,this.form.firstGateway=!0,this.showAssign=!1,void(this.isCustom=!1);if(5==e.result.type)return this.isCustom=!0,this.isGateway=!1,this.form.firstGateway=!1,void(this.showAssign=!1);if(1==e.result.type)if(this.showAssign=!0,this.isGateway=!1,this.form.firstGateway=!1,this.isCustom=!1,e.result.users&&e.result.users.length>0){this.assigneeList=e.result.users;let t=[];e.result.users.forEach(e=>{t.push(e.id)}),this.form.assignees=t,this.showAssign=!0}else this.form.assignees=[],this.showAssign=!0,this.error='请进入"流程管理"为审批节点分配候选审批人员'}}),this.applyModalVisible=!0},handelSubmit(){this.$refs.form.validate(e=>{if(e){if((this.showAssign||this.isCustom)&&this.form.assignees.length<1)return void(this.error="请至少选择一个审批人");this.error="",this.submitLoading=!0,Object(n["S"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.applyModalVisible=!1,this.$emit("on-submit",!0),this.routeName="")})}})},show(){return this.processKey?this.actBusinessId?(this.form.id=this.actBusinessId,this.$emit("on-loading",!0),void Object(n["I"])(this.processKey).then(e=>{if(this.$emit("on-loaded",!1),e.success){if(!e.result)return this.$Message.error("未找到标识为 "+this.processKey+" 的流程"),void this.$emit("input",!1);if(!e.result.routeName)return this.$Message.warning("该流程信息未完善，请于流程管理中编辑流程完善信息"),void this.$emit("input",!1);this.routeName=e.result.routeName,this.form.procDefId=e.result.id,this.form.title=e.result.name,this.showApply()}})):(this.$Message.error("请传入业务表ActBusiness的ID"),void this.$emit("input",!1)):(this.$Message.error("请先传入要申请的流程key"),void this.$emit("input",!1))},close(){this.applyModalVisible=!1}},watch:{value(e){1==e&&this.show()},applyModalVisible(e){this.$emit("input",e)}},mounted(){this.init()}},l=c,u=s("2877"),d=Object(u["a"])(l,r,i,!1,null,null,null);t["default"]=d.exports},"76e2":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("Select",{attrs:{size:e.size,loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(s,r){return t("Option",{key:r,attrs:{value:s.value}},[e._v(e._s(s.title))])})),1)],1)},i=[],n=s("365c"),a={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData(e){this.loading=!0,Object(n["Ab"])(e).then(e=>{this.loading=!1,e.success&&(this.dictData=e.result)})},handleChange(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange(e){this.$emit("on-query-change",e)},handleClear(){this.$emit("on-clear","")},handleOpenChange(e){this.$emit("on-open-change",e)},handleSelect(e){this.$emit("on-select",e)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value(e){this.setCurrentValue(e)},dict(e){this.getData(e)}},mounted(){this.getData(this.dict)}},o=a,c=s("2877"),l=Object(c["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports},"81c1":function(e,t,s){"use strict";s.d(t,"x",(function(){return i})),s.d(t,"r",(function(){return n})),s.d(t,"y",(function(){return a})),s.d(t,"D",(function(){return o})),s.d(t,"F",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"s",(function(){return u})),s.d(t,"o",(function(){return d})),s.d(t,"J",(function(){return h})),s.d(t,"U",(function(){return f})),s.d(t,"X",(function(){return m})),s.d(t,"i",(function(){return b})),s.d(t,"K",(function(){return p})),s.d(t,"v",(function(){return g})),s.d(t,"w",(function(){return y})),s.d(t,"p",(function(){return v})),s.d(t,"L",(function(){return O})),s.d(t,"B",(function(){return j})),s.d(t,"I",(function(){return k})),s.d(t,"C",(function(){return w})),s.d(t,"G",(function(){return x})),s.d(t,"H",(function(){return C})),s.d(t,"V",(function(){return B})),s.d(t,"q",(function(){return $})),s.d(t,"j",(function(){return I})),s.d(t,"T",(function(){return S})),s.d(t,"t",(function(){return M})),s.d(t,"M",(function(){return P})),s.d(t,"k",(function(){return _})),s.d(t,"P",(function(){return L})),s.d(t,"Q",(function(){return V})),s.d(t,"z",(function(){return T})),s.d(t,"e",(function(){return N})),s.d(t,"f",(function(){return A})),s.d(t,"g",(function(){return F})),s.d(t,"n",(function(){return D})),s.d(t,"N",(function(){return G})),s.d(t,"O",(function(){return E})),s.d(t,"a",(function(){return K})),s.d(t,"u",(function(){return q})),s.d(t,"l",(function(){return U})),s.d(t,"R",(function(){return z})),s.d(t,"A",(function(){return H})),s.d(t,"d",(function(){return J})),s.d(t,"S",(function(){return Q})),s.d(t,"h",(function(){return R})),s.d(t,"m",(function(){return W})),s.d(t,"E",(function(){return X})),s.d(t,"b",(function(){return Y})),s.d(t,"W",(function(){return Z}));var r=s("7f80");const i="/xboot/actModel/export/",n="/xboot/actModel/deployByFile",a="/xboot/actProcess/export",o="/xboot/actProcess/getHighlightImg/",c=e=>Object(r["b"])("/actModel/getByCondition",e),l=e=>Object(r["e"])("/actModel/add",e),u=(e,t)=>Object(r["b"])("/actModel/deploy/"+e,t),d=e=>Object(r["e"])("/actModel/delByIds",e),h=e=>Object(r["b"])("/actProcess/getByCondition",e),f=e=>Object(r["e"])("/actProcess/updateInfo",e),m=e=>Object(r["e"])("/actProcess/updateStatus",e),b=(e,t)=>Object(r["b"])("/actProcess/convertToModel/"+e,t),p=(e,t)=>Object(r["b"])("/actProcess/getProcessNode/"+e,t),g=e=>Object(r["e"])("/actProcess/editNodeUser",e),y=e=>Object(r["e"])("/actProcess/editStartUser",e),v=e=>Object(r["e"])("/actProcess/delByIds",e),O=e=>Object(r["b"])("/actProcess/getRunningProcess",e),j=e=>Object(r["b"])("/actProcess/getFinishedProcess",e),k=(e,t)=>Object(r["b"])("/actProcess/getByKey/"+e,t),w=(e,t)=>Object(r["b"])("/actProcess/getFirstNode/"+e,t),x=(e,t,s)=>Object(r["b"])(`/actProcess/getNextNode/${e}/${t}`,s),C=(e,t)=>Object(r["b"])("/actProcess/getNode/"+e,t),B=e=>Object(r["e"])("/actProcess/updateInsStatus",e),$=e=>Object(r["e"])("/actProcess/delInsByIds",e),I=e=>Object(r["e"])("/actProcess/delHistoricInsByIds",e),S=e=>Object(r["b"])("/actTask/todoList",e),M=e=>Object(r["b"])("/actTask/doneList",e),P=(e,t)=>Object(r["b"])("/actTask/historicFlow/"+e,t),_=e=>Object(r["e"])("/actTask/delegate",e),L=e=>Object(r["e"])("/actTask/pass",e),V=e=>Object(r["e"])("/actTask/passAll",e),T=(e,t)=>Object(r["b"])("/actTask/getBackList/"+e,t),N=e=>Object(r["e"])("/actTask/back",e),A=e=>Object(r["e"])("/actTask/backAll",e),F=e=>Object(r["e"])("/actTask/backToTask",e),D=e=>Object(r["e"])("/actTask/deleteHistoric",e),G=e=>Object(r["b"])("/actCategory/getByParentId/0",e),E=(e,t)=>Object(r["b"])("/actCategory/getByParentId/"+e,t),K=e=>Object(r["e"])("/actCategory/add",e),q=e=>Object(r["e"])("/actCategory/edit",e),U=e=>Object(r["e"])("/actCategory/delByIds",e),z=e=>Object(r["b"])("/actCategory/search",e),H=e=>Object(r["b"])("/actBusiness/getByCondition",e),J=e=>Object(r["e"])("/actBusiness/apply",e),Q=e=>Object(r["e"])("/actBusiness/start",e),R=e=>Object(r["e"])("/actBusiness/cancel",e),W=e=>Object(r["e"])("/actBusiness/delByIds",e),X=(e,t)=>Object(r["b"])("/leave/get/"+e,t),Y=e=>Object(r["e"])("/leave/add",e),Z=e=>Object(r["f"])("/leave/update",e)}}]);