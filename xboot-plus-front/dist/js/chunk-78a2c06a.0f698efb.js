(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a2c06a","chunk-2d0d7882"],{"76e2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("Select",{attrs:{size:e.size,loading:e.loading,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,filterable:e.filterable,transfer:e.transfer,clearable:e.clearable,placement:e.placement,"transfer-class-name":e.transferClassName,prefix:e.prefix,"max-tag-count":e.maxTagCount,"max-tag-placeholder":e.maxTagPlaceholder},on:{"on-change":e.handleChange,"on-query-change":e.handleQueryChange,"on-clear":e.handleClear,"on-open-change":e.handleOpenChange,"on-select":e.handleSelect},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},e._l(e.dictData,(function(r,a){return t("Option",{key:a,attrs:{value:r.value}},[e._v(e._s(r.title))])})),1)],1)},n=[],s=r("365c"),i={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData(e){this.loading=!0,Object(s["Ab"])(e).then(e=>{this.loading=!1,e.success&&(this.dictData=e.result)})},handleChange(e){this.$emit("input",e),this.$emit("on-change",e)},handleQueryChange(e){this.$emit("on-query-change",e)},handleClear(){this.$emit("on-clear","")},handleOpenChange(e){this.$emit("on-open-change",e)},handleSelect(e){this.$emit("on-select",e)},setCurrentValue(e){e!==this.currentValue&&(this.currentValue=e,this.$emit("on-change",this.currentValue))}},watch:{value(e){this.setCurrentValue(e)},dict(e){this.getData(e)}},mounted(){this.getData(this.dict)}},c=i,o=r("2877"),l=Object(o["a"])(c,a,n,!1,null,null,null);t["default"]=l.exports},"81c1":function(e,t,r){"use strict";r.d(t,"x",(function(){return n})),r.d(t,"r",(function(){return s})),r.d(t,"y",(function(){return i})),r.d(t,"D",(function(){return c})),r.d(t,"F",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"s",(function(){return u})),r.d(t,"o",(function(){return d})),r.d(t,"J",(function(){return h})),r.d(t,"U",(function(){return f})),r.d(t,"X",(function(){return p})),r.d(t,"i",(function(){return m})),r.d(t,"K",(function(){return b})),r.d(t,"v",(function(){return g})),r.d(t,"w",(function(){return y})),r.d(t,"p",(function(){return O})),r.d(t,"L",(function(){return D})),r.d(t,"B",(function(){return j})),r.d(t,"I",(function(){return v})),r.d(t,"C",(function(){return k})),r.d(t,"G",(function(){return x})),r.d(t,"H",(function(){return I})),r.d(t,"V",(function(){return T})),r.d(t,"q",(function(){return P})),r.d(t,"j",(function(){return C})),r.d(t,"T",(function(){return B})),r.d(t,"t",(function(){return $})),r.d(t,"M",(function(){return w})),r.d(t,"k",(function(){return S})),r.d(t,"P",(function(){return _})),r.d(t,"Q",(function(){return N})),r.d(t,"z",(function(){return M})),r.d(t,"e",(function(){return F})),r.d(t,"f",(function(){return q})),r.d(t,"g",(function(){return L})),r.d(t,"n",(function(){return V})),r.d(t,"N",(function(){return R})),r.d(t,"O",(function(){return H})),r.d(t,"a",(function(){return J})),r.d(t,"u",(function(){return z})),r.d(t,"l",(function(){return A})),r.d(t,"R",(function(){return E})),r.d(t,"A",(function(){return Q})),r.d(t,"d",(function(){return U})),r.d(t,"S",(function(){return K})),r.d(t,"h",(function(){return W})),r.d(t,"m",(function(){return G})),r.d(t,"E",(function(){return X})),r.d(t,"b",(function(){return Y})),r.d(t,"W",(function(){return Z}));var a=r("7f80");const n="/xboot/actModel/export/",s="/xboot/actModel/deployByFile",i="/xboot/actProcess/export",c="/xboot/actProcess/getHighlightImg/",o=e=>Object(a["b"])("/actModel/getByCondition",e),l=e=>Object(a["e"])("/actModel/add",e),u=(e,t)=>Object(a["b"])("/actModel/deploy/"+e,t),d=e=>Object(a["e"])("/actModel/delByIds",e),h=e=>Object(a["b"])("/actProcess/getByCondition",e),f=e=>Object(a["e"])("/actProcess/updateInfo",e),p=e=>Object(a["e"])("/actProcess/updateStatus",e),m=(e,t)=>Object(a["b"])("/actProcess/convertToModel/"+e,t),b=(e,t)=>Object(a["b"])("/actProcess/getProcessNode/"+e,t),g=e=>Object(a["e"])("/actProcess/editNodeUser",e),y=e=>Object(a["e"])("/actProcess/editStartUser",e),O=e=>Object(a["e"])("/actProcess/delByIds",e),D=e=>Object(a["b"])("/actProcess/getRunningProcess",e),j=e=>Object(a["b"])("/actProcess/getFinishedProcess",e),v=(e,t)=>Object(a["b"])("/actProcess/getByKey/"+e,t),k=(e,t)=>Object(a["b"])("/actProcess/getFirstNode/"+e,t),x=(e,t,r)=>Object(a["b"])(`/actProcess/getNextNode/${e}/${t}`,r),I=(e,t)=>Object(a["b"])("/actProcess/getNode/"+e,t),T=e=>Object(a["e"])("/actProcess/updateInsStatus",e),P=e=>Object(a["e"])("/actProcess/delInsByIds",e),C=e=>Object(a["e"])("/actProcess/delHistoricInsByIds",e),B=e=>Object(a["b"])("/actTask/todoList",e),$=e=>Object(a["b"])("/actTask/doneList",e),w=(e,t)=>Object(a["b"])("/actTask/historicFlow/"+e,t),S=e=>Object(a["e"])("/actTask/delegate",e),_=e=>Object(a["e"])("/actTask/pass",e),N=e=>Object(a["e"])("/actTask/passAll",e),M=(e,t)=>Object(a["b"])("/actTask/getBackList/"+e,t),F=e=>Object(a["e"])("/actTask/back",e),q=e=>Object(a["e"])("/actTask/backAll",e),L=e=>Object(a["e"])("/actTask/backToTask",e),V=e=>Object(a["e"])("/actTask/deleteHistoric",e),R=e=>Object(a["b"])("/actCategory/getByParentId/0",e),H=(e,t)=>Object(a["b"])("/actCategory/getByParentId/"+e,t),J=e=>Object(a["e"])("/actCategory/add",e),z=e=>Object(a["e"])("/actCategory/edit",e),A=e=>Object(a["e"])("/actCategory/delByIds",e),E=e=>Object(a["b"])("/actCategory/search",e),Q=e=>Object(a["b"])("/actBusiness/getByCondition",e),U=e=>Object(a["e"])("/actBusiness/apply",e),K=e=>Object(a["e"])("/actBusiness/start",e),W=e=>Object(a["e"])("/actBusiness/cancel",e),G=e=>Object(a["e"])("/actBusiness/delByIds",e),X=(e,t)=>Object(a["b"])("/leave/get/"+e,t),Y=e=>Object(a["e"])("/leave/add",e),Z=e=>Object(a["f"])("/leave/update",e)},8695:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("p",{attrs:{slot:"title"},slot:"title"},[0==e.type?t("span",[e._v("新增请假申请")]):1==e.type?t("span",[e._v("编辑请假申请")]):t("span",[e._v("查看请假申请详情")])]),t("Row",[t("Form",{ref:"form",staticStyle:{position:"relative"},attrs:{model:e.form,"label-width":110,rules:e.formValidate,"label-position":"left"}},[0!=e.type&&1!=e.type?t("FormItem",{attrs:{label:"请假申请人",prop:"title"}},[e._v(e._s(e.form.createBy))]):e._e(),t("FormItem",{attrs:{label:"请假类型",prop:"type"}},[t("dict",{staticStyle:{width:"300px"},attrs:{dict:"leave_type"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),t("FormItem",{attrs:{label:"标题",prop:"title"}},[t("Input",{staticStyle:{width:"550px"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("FormItem",{attrs:{label:"原因",prop:"description"}},[t("Input",{staticStyle:{width:"550px"},attrs:{type:"textarea",rows:5,placeholder:"请输入详细情况"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("FormItem",{attrs:{label:"请假时间范围",required:"",error:e.errorMsg}},[t("DatePicker",{staticStyle:{width:"550px"},attrs:{options:e.options,type:"datetimerange",format:"yyyy-MM-dd HH:mm",clearable:"",placeholder:"选择起始时间"},on:{"on-change":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1),t("FormItem",{attrs:{label:"请假时长"}},[e._v(e._s(e.form.duration)+" 小时")]),t("FormItem",{staticClass:"br"},[0==e.type||1==e.type?t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handelSubmit}},[e._v("保存并关闭")]):e._e(),0!=e.type?t("Button",{attrs:{type:"info"},on:{click:e.handelPrint}},[e._v("打印")]):e._e(),t("Button",{on:{click:e.handelCancel}},[e._v("关闭")])],1),e.loading?t("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1)],1)},n=[],s=r("76e2"),i=r("81c1"),c=r("e351"),o=r.n(c),l={name:"leave-notcache",components:{dict:s["default"]},data(){return{type:0,loading:!1,modalVisible:!1,selectDate:null,form:{type:"",title:"",description:"",startDate:"",endDate:"",duration:0},formValidate:{type:[{required:!0,message:"类型不能为空",trigger:"change"}],title:[{required:!0,message:"标题不能为空",trigger:"change"}],description:[{required:!0,message:"原因不能为空",trigger:"change"}]},errorMsg:"",submitLoading:!1,processList:[],backRoute:"",procDefId:"",options:{shortcuts:[{text:"1 天",value(){const e=new Date,t=new Date;return e.setTime(t.getTime()),[t,e]}},{text:"2 天",value(){const e=new Date,t=new Date;return e.setTime(t.getTime()+864e5),[t,e]}},{text:"3 天",value(){const e=new Date,t=new Date;return e.setTime(t.getTime()+1728e5),[t,e]}},{text:"1 周",value(){const e=new Date,t=new Date;return e.setTime(t.getTime()+5184e5),[t,e]}},{text:"1 个月",value(){const e=new Date,t=new Date;return e.setTime(t.getTime()+25056e5),[t,e]}}]}}},methods:{init(){this.type=this.$route.query.type,this.backRoute=this.$route.query.backRoute,this.procDefId=this.$route.query.procDefId,0!=this.type?(this.form.id=this.$route.query.id,this.getData()):(this.$refs.form.resetFields(),this.selectDate=[])},selectDateRange(e){if(e[0]){this.form.startDate=e[0],this.form.endDate=e[1];let t=this.stringToDate(this.form.startDate),r=this.stringToDate(this.form.endDate),a=r.getTime()-t.getTime(),n=Math.round(a/36e5);this.form.duration=n}else this.form.startDate="",this.form.endDate="",this.form.duration=0},stringToDate(e){let t=e.split(" "),r=t[0].split("-"),a=parseInt(r[0],10),n=parseInt(r[1],10)-1,s=parseInt(r[2],10),i=t[1].split(":"),c=parseInt(i[0],10),o=parseInt(i[1],10),l=new Date(a,n,s,c,o,0);return l},getData(){this.loading=!0,Object(i["E"])(this.form.id).then(e=>{if(this.loading=!1,e.success){let t=e.result;for(let e in t)null==t[e]&&(t[e]="");let r=JSON.stringify(t),a=JSON.parse(r);this.form=a,this.selectDate=[],this.selectDate[0]=a.startDate,this.selectDate[1]=a.endDate,this.customList2="ROLE_ADMIN"}})},handelSubmit(){this.$refs.form.validate(e=>{if(e){if(!this.form.startDate)return void(this.errorMsg="请选择时间范围");this.errorMsg="",this.submitLoading=!0,0==this.type?(delete this.form.id,this.form.procDefId=this.procDefId,Object(i["b"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.closeCurrentPage())})):1==this.type&&Object(i["W"])(this.form).then(e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.closeCurrentPage())})}})},handelPrint(){let e=[],t=this.form;e.push(t),o()({printable:e,type:"json",header:"请假申请表",gridStyle:"border: 1px solid lightgray; text-align:center",properties:[{field:"createBy",displayName:"申请人"},{field:"type",displayName:"请假类型"},{field:"title",displayName:"标题"},{field:"description",displayName:"原因"},{field:"startDate",displayName:"请假开始时间"},{field:"endDate",displayName:"请假结束时间"},{field:"duration",displayName:"持续时长（小时）"}]})},handelCancel(){this.closeCurrentPage()},closeCurrentPage(){this.$store.commit("removeTag","leave"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList),this.$router.push({name:this.backRoute})}},mounted(){this.init()},watch:{$route(e,t){"leave"==e.name&&(this.getDictData(),this.type=this.$route.query.type,this.backRoute=this.$route.query.backRoute,this.procDefId=this.$route.query.procDefId,0!=this.type?(this.form.id=this.$route.query.id,this.getData()):(this.$refs.form.resetFields(),this.selectDate=[]))}}},u=l,d=r("2877"),h=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=h.exports}}]);