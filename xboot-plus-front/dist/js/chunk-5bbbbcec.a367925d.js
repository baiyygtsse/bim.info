(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bbbbcec","chunk-2d0cebea","chunk-2d21802a"],{"10fd":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return i}));const r=(t,e,a)=>{var r=/^[a-zA-Z0-9_]{1,16}$/;e.length>16?a(new Error("长度不能超过16个字符")):r.test(e)?a():a(new Error("仅支持大小写英文、数字和下划线_"))},s=(t,e,a)=>{e.length<6?a(new Error("密码长度不得小于6位")):a()},i=(t,e,a)=>{var r=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;r.test(e)?a():a(new Error("手机号格式错误"))}},"2e48":function(t,e,a){},"38bf":function(t,e,a){"use strict";a("2e48")},6181:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"100%","margin-right":"10px"}},[e("Input",{attrs:{placeholder:t.placeholder,size:t.size,disabled:t.disabled,readonly:t.readonly,maxlength:t.maxlength},on:{"on-change":t.handleChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},[e("Poptip",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{slot:"append",transfer:"",trigger:"hover",title:"图片预览",placement:"right",width:"350"},slot:"append"},[e("Button",{attrs:{icon:t.previewIcon}}),e("div",{attrs:{slot:"content"},slot:"content"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticStyle:{width:"100%",margin:"0 auto",display:"block",cursor:"zoom-in"},attrs:{src:t.currentValue},on:{click:t.viewImage}}),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.currentValue,expression:"!currentValue"}]},[t._v("无效的图片链接")]),e("a",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticStyle:{"margin-top":"5px","text-align":"right",display:"block"},on:{click:t.viewImage}},[t._v("查看大图")])])],1)],1)],1),t.material?t._e():e("Upload",{attrs:{action:t.uploadFileUrl,headers:t.accessToken,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.beforeUpload,"show-upload-list":!1,"v-show":t.showUpload}},[e("Button",{attrs:{loading:t.loading,size:t.size,disabled:t.disabled,icon:t.icon,type:t.type,shape:t.shape,ghost:t.ghost}},[t._v(t._s(t.text))])],1),t.material?e("Button",{attrs:{size:t.size,disabled:t.disabled,icon:t.icon,type:t.type,shape:t.shape,ghost:t.ghost},on:{click:function(e){t.showMaterialCenter=!0}}},[t._v(t._s(t.text))]):t._e(),t.material?e("materialCenter",{attrs:{showInput:!1,acceptImg:t.accept,maxSize:t.maxSize},on:{"on-change":t.selectFile},model:{value:t.showMaterialCenter,callback:function(e){t.showMaterialCenter=e},expression:"showMaterialCenter"}}):t._e()],1)])},s=[],i=(a("0808"),a("6a37")),o=a.n(i),n=a("365c"),l=a("1f5f"),c={name:"uploadPicInput",components:{materialCenter:l["default"]},props:{value:String,size:String,placeholder:{type:String,default:"可输入图片链接"},disabled:{type:Boolean,default:!1},material:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,previewIcon:{type:String,default:"md-eye"},icon:{type:String,default:"ios-cloud-upload-outline"},text:{type:String,default:"上传图片"},type:String,shape:String,ghost:{type:Boolean,default:!1},maxSize:{type:Number,default:5},accept:{type:String,default:".jpg, .jpeg, .png, .gif"},showUpload:{type:Boolean,default:!0}},computed:{format(){if(this.accept){let t=[];return this.accept.split(",").forEach(e=>{t.push(e.replace(".","").replace(" ",""))}),t}return[]}},data(){return{accessToken:{},currentValue:this.value,loading:!1,uploadFileUrl:n["Tc"],showMaterialCenter:!1}},methods:{init(){this.accessToken={accessToken:this.getStore("accessToken")}},viewImage(){let t=new Image;t.src=this.currentValue;let e=new o.a(t,{hidden:function(){e.destroy()}});e.show()},handleFormatError(t){this.loading=!1,this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 格式文件"})},handleMaxSize(t){this.loading=!1,this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},beforeUpload(){return this.loading=!0,!0},handleSuccess(t,e){this.loading=!1,t.success?(this.currentValue=t.result,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)):this.$Message.error(t.message)},handleError(t,e,a){this.loading=!1,this.$Message.error(t.toString())},handleChange(t){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)},setCurrentValue(t){t!==this.currentValue&&(this.currentValue=t,this.$emit("on-change",this.currentValue))},selectFile(t){this.setCurrentValue(t)}},watch:{value(t){this.setCurrentValue(t)}},mounted(){this.init()}},m=c,p=a("2877"),u=Object(p["a"])(m,r,s,!1,null,null,null);e["default"]=u.exports},b562:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return n})),a.d(e,"b",(function(){return l}));var r=a("7f80");const s=t=>Object(r["b"])("/app/member/getByCondition",t),i=t=>Object(r["e"])("/app/member/admin/add",t),o=t=>Object(r["e"])("/app/member/admin/edit",t),n=t=>Object(r["e"])("/app/member/admin/status",t),l=t=>Object(r["e"])("/app/member/delByIds",t)},bc75:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-edit"},[e("Drawer",{attrs:{title:t.title,width:"720",draggable:"","mask-closable":"0"==t.type},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"drawer-content",style:{maxHeight:t.maxHeight}},[e("div",{staticClass:"drawer-header"},[e("div",{staticStyle:{"margin-right":"16px"}},[t._v("基本信息")]),e("Avatar",{directives:[{name:"show",rawName:"v-show",value:"2"!=t.type,expression:"type != '2'"}],attrs:{src:t.form.avatar,size:"large"}})],1),e("Form",{directives:[{name:"show",rawName:"v-show",value:"2"!=t.type,expression:"type != '2'"}],attrs:{"label-colon":""}},[e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"用户名/UID"}},[t._v(" "+t._s(t.form.username)+" "),e("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"账户已禁用"}},[e("Icon",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.status,expression:"form.status == -1"}],staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-lock",size:"18"}})],1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"邀请码"}},[t._v(t._s(t.form.inviteCode))])],1)],1)],1),e("Form",{ref:"form",attrs:{model:t.form,rules:t.formValidate,"label-position":"top"}},[e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"昵称",prop:"nickname"}},[e("Input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[e("Input",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"邮箱",prop:"email"}},[e("Input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"性别"}},[e("Select",{attrs:{transfer:""},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[e("Option",{attrs:{value:"男"}},[t._v("男")]),e("Option",{attrs:{value:"女"}},[t._v("女")])],1)],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{staticClass:"form-noheight",attrs:{label:"头像"}},[e("upload-pic-input",{model:{value:t.form.avatar,callback:function(e){t.$set(t.form,"avatar",e)},expression:"form.avatar"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"生日"}},[e("DatePicker",{staticStyle:{display:"block"},attrs:{type:"date",transfer:""},on:{"on-change":t.changeBirth},model:{value:t.form.birth,callback:function(e){t.$set(t.form,"birth",e)},expression:"form.birth"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"地区"}},[e("Input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"定位"}},[e("mapLocate",{attrs:{id:"userLocate",readonly:!0,clearable:!1,text:"查看地图",preview:!0},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"积分"}},[e("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"个人简介"}},[e("Input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),e("Divider"),e("p",{staticClass:"drawer-title"},[t._v("VIP信息")]),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"用户类型"}},[e("Select",{attrs:{transfer:"",placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[e("Option",{attrs:{value:0}},[t._v("普通会员")]),e("Option",{attrs:{value:1}},[t._v("VIP")])],1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"VIP状态"}},[e("Select",{attrs:{transfer:"",placeholder:"请选择"},model:{value:t.form.vipStatus,callback:function(e){t.$set(t.form,"vipStatus",e)},expression:"form.vipStatus"}},[e("Option",{attrs:{value:0}},[t._v("未开通")]),e("Option",{attrs:{value:1}},[t._v("已开通")]),e("Option",{attrs:{value:2}},[t._v("已过期")])],1)],1)],1)],1),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"VIP开通时间"}},[e("DatePicker",{staticStyle:{display:"block"},attrs:{type:"datetime",transfer:""},on:{"on-change":t.changeVipStartTime},model:{value:t.form.vipStartTime,callback:function(e){t.$set(t.form,"vipStartTime",e)},expression:"form.vipStartTime"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"VIP到期时间"}},[e("DatePicker",{staticStyle:{display:"block"},attrs:{type:"datetime",transfer:""},on:{"on-change":t.changeVipEndTime},model:{value:t.form.vipEndTime,callback:function(e){t.$set(t.form,"vipEndTime",e)},expression:"form.vipEndTime"}})],1)],1)],1),e("Divider"),e("p",{staticClass:"drawer-title"},[t._v("其他信息")]),e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"角色权限（可直接输入回车添加）"}},[e("Select",{attrs:{multiple:"",filterable:"","allow-create":"",transfer:"",placeholder:"请选择或输入添加"},on:{"on-create":t.createPerm},model:{value:t.permissions,callback:function(e){t.permissions=e},expression:"permissions"}},t._l(t.permissionList,(function(a,r){return e("Option",{key:r,attrs:{value:a}},[t._v(t._s(a))])})),1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"注册平台"}},[e("Select",{attrs:{transfer:"",placeholder:"请选择"},model:{value:t.form.platform,callback:function(e){t.$set(t.form,"platform",e)},expression:"form.platform"}},[e("Option",{attrs:{value:0}},[t._v("PC/H5")]),e("Option",{attrs:{value:1}},[t._v("Android")]),e("Option",{attrs:{value:2}},[t._v("IOS")]),e("Option",{attrs:{value:3}},[t._v("微信小程序")]),e("Option",{attrs:{value:4}},[t._v("支付宝小程序")]),e("Option",{attrs:{value:5}},[t._v("QQ小程序")]),e("Option",{attrs:{value:6}},[t._v("字节小程序")]),e("Option",{attrs:{value:7}},[t._v("百度小程序")]),e("Option",{attrs:{value:-1}},[t._v("未知")])],1)],1)],1)],1)],1),e("div",{staticStyle:{height:"50px"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=t.type,expression:"type != '0'"}],staticClass:"drawer-footer br"},[e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("提交")]),e("Button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)])],1)},s=[],i=a("b562"),o=a("10fd"),n=a("6181"),l=a("5e58"),c=a("1c77"),m={name:"user",components:{uploadPicInput:n["default"],SetPassword:l["default"],mapLocate:c["default"]},props:{value:{type:Boolean,default:!1},data:{type:Object},type:{type:String,default:"0"}},data(){return{permissions:[],permissionList:[],visible:this.value,title:"",submitLoading:!1,maxHeight:510,form:{},formValidate:{nickname:[{required:!0,message:"请输入昵称",trigger:"change"}],mobile:[{required:!0,message:"请输入手机号",trigger:"change"},{validator:o["a"],trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{validator:o["b"],trigger:"change"}],email:[{type:"email",message:"邮箱格式不正确"}]}}},methods:{init(){},changeBirth(t,e){this.form.birth=t},changeVipStartTime(t,e){this.form.vipStartTime=t},changeVipEndTime(t,e){this.form.vipEndTime=t},createPerm(t){this.permissionList.push(t)},submit(){this.$refs.form.validate(t=>{t&&(this.form.permissions=this.permissions.join(","),"object"==typeof this.form.birth&&(this.form.birth=this.format(this.form.birth,"yyyy-MM-dd")),"object"==typeof this.form.vipStartTime&&(this.form.vipStartTime=this.format(this.form.vipStartTime,"yyyy-MM-dd HH:mm:ss")),"object"==typeof this.form.vipEndTime&&(this.form.vipEndTime=this.format(this.form.vipEndTime,"yyyy-MM-dd HH:mm:ss")),"1"==this.type?(this.submitLoading=!0,Object(i["c"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.$emit("on-submit",!0),this.visible=!1)})):(this.submitLoading=!0,Object(i["a"])(this.form).then(t=>{this.submitLoading=!1,t.success&&(this.$Message.success("操作成功"),this.$emit("on-submit",!0),this.visible=!1)})))})},setCurrentValue(t){if(t!==this.visible){if("1"==this.type?(this.title="编辑会员",this.maxHeight=Number(document.documentElement.clientHeight-121)+"px"):"2"==this.type?(this.title="添加会员",this.maxHeight=Number(document.documentElement.clientHeight-121)+"px"):(this.title="会员详情",this.maxHeight="100%"),this.$refs.form.resetFields(),this.permissions=[],this.permissionList=[],"0"==this.type||"1"==this.type){let t=this.data;t.permissions&&(this.permissions=t.permissions.split(","),this.permissionList=t.permissions.split(",")),this.form=t}else this.permissions=["MEMBER"],this.permissionList=["MEMBER"],this.form={type:0,grade:0,vipStatus:0,platform:-1};this.visible=t}}},watch:{value(t){this.setCurrentValue(t)},visible(t){this.$emit("input",t)}},mounted(){this.init()}},p=m,u=(a("38bf"),a("2877")),d=Object(u["a"])(p,r,s,!1,null,null,null);e["default"]=d.exports},c8ba:function(t,e){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(r){"object"===typeof window&&(a=window)}t.exports=a}}]);